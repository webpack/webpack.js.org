name: Webpack persistent cache
description: Cache webpack's persistent cache between builds.

outputs:
  cache-hit:
    description: Whether the cache was restored from the cache key.
    value: ${{ steps.build-webpack-persistent-cache.outputs.cache-hit }}

runs:
  using: composite
  steps:
    - uses: actions/cache@0057852bfaa89a56745cba8c7296529d2fc39830 # v4.3.0
      id: build-webpack-persistent-cache
      with:
        path: node_modules/.cache
        key: build-${{ hashFiles('**/webpack.*.mjs') }}-${{ hashFiles('**/yarn.lock') }}
        restore-keys: |-
          build-${{ hashFiles('**/webpack.*.mjs') }}-${{ hashFiles('**/yarn.lock') }}
          build-${{ hashFiles('**/webpack.*.mjs') }}-
