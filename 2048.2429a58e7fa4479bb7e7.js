(self.webpackChunk=self.webpackChunk||[]).push([[2048],{2048:function(n,s,a){"use strict";a.r(s),s.default='<p><a href="https://npmjs.com/package/val-loader"><img src="https://img.shields.io/npm/v/val-loader.svg" alt="npm"></a> <a href="https://nodejs.org"><img src="https://img.shields.io/node/v/val-loader.svg" alt="node"></a> <a href="https://david-dm.org/webpack-contrib/val-loader"><img src="https://david-dm.org/webpack-contrib/val-loader.svg" alt="deps"></a> <a href="https://github.com/webpack-contrib/val-loader/actions"><img src="https://github.com/webpack-contrib/val-loader/workflows/val-loader/badge.svg" alt="tests"></a> <a href="https://codecov.io/gh/webpack-contrib/val-loader"><img src="https://codecov.io/gh/webpack-contrib/val-loader/branch/master/graph/badge.svg" alt="coverage"></a> <a href="https://gitter.im/webpack/webpack"><img src="https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg" alt="chat"></a> <a href="https://packagephobia.now.sh/result?p=val-loader"><img src="https://packagephobia.now.sh/badge?p=val-loader" alt="size"></a></p> <p>A webpack loader which executes a given module, and returns the result of the execution at build-time, when the module is required in the bundle. In this way, the loader changes a module from code to a result.</p> <p>Another way to view <code>val-loader</code>, is that it allows a user a way to make their own custom loader logic, without having to write a custom loader.</p> <p>The target module is called with two arguments: <code>(options, loaderContext)</code></p> <ul> <li><code>options</code>: The loader options (for instance provided in the webpack config. See the <a href="#examples">example</a> below).</li> <li><code>loaderContext</code>: <a href="/api/loaders/#the-loader-context">The loader context</a>.</li> </ul> <h2 id="getting-started">Getting Started<a href="#getting-started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>To begin, you\'ll need to install <code>val-loader</code>:</p> <pre><code class="hljs language-console">$ npm install val-loader --save-dev\n</code></pre> <p>Then add the loader to your <code>webpack</code> config. For example:</p> <p><strong>target-file.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> loaderContext</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span> code<span class="token operator">:</span> <span class="token string">"module.exports = 42;"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/target-file.js$/</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">val-loader</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p><strong>src/entry.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> answer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"target-file"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>And run <code>webpack</code> via your preferred method.</p> <h2 id="options">Options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <table> <thead> <tr> <th align="center">Name</th> <th align="center">Type</th> <th align="center">Default</th> <th align="left">Description</th> </tr> </thead> <tbody> <tr> <td align="center" data-th="Name"><span><strong><a href="#executablefile"><code>executableFile</code></a></strong></span></td> <td align="center" data-th="Type"><span><code>{String}</code></span></td> <td align="center" data-th="Default"><span><code>undefined</code></span></td> <td align="left" data-th="Description"><span>Allows to specify path to the executable file</span></td> </tr> </tbody> </table> <h3 id="executablefile">executableFile<a href="#executablefile" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>String</code> Default: <code>undefined</code></p> <p>Allows to specify path to the executable file</p> <p><strong>data.json</strong></p> <pre><code class="hljs language-json"><span class="token punctuation">{</span>\n  <span class="token property">"years"</span><span class="token operator">:</span> <span class="token string">"10"</span>\n<span class="token punctuation">}</span></code></pre> <p><strong>executable-file.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">yearsInMs</span><span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> loaderContext<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> years <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> value <span class="token operator">=</span> years <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    cacheable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    code<span class="token operator">:</span> <span class="token string">"module.exports = "</span> <span class="token operator">+</span> value<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(json)$/i</span><span class="token punctuation">,</span>\n        rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> <span class="token string">"val-loader"</span><span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              executableFile<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>\n                __dirname<span class="token punctuation">,</span>\n                <span class="token string">"fixtures"</span><span class="token punctuation">,</span>\n                <span class="token string">"executableFile.js"</span>\n              <span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.json$/i</span><span class="token punctuation">,</span>\n        type<span class="token operator">:</span> <span class="token string">"asset/resource"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="return-object-properties">Return Object Properties<a href="#return-object-properties" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>Targeted modules of this loader must export a <code>Function</code> that returns an object, or a <code>Promise</code> resolving an object (e.g. async function), containing a <code>code</code> property at a minimum, but can contain any number of additional properties.</p> <h3 id="code"><code>code</code><a href="#code" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>String|Buffer</code> Default: <code>undefined</code> <em>Required</em></p> <p>Code passed along to webpack or the next loader that will replace the module.</p> <h3 id="sourcemap"><code>sourceMap</code><a href="#sourcemap" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>Object</code> Default: <code>undefined</code></p> <p>A source map passed along to webpack or the next loader.</p> <h3 id="ast"><code>ast</code><a href="#ast" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>Array[Object]</code> Default: <code>undefined</code></p> <p>An <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">Abstract Syntax Tree</a> that will be passed to the next loader. Useful to speed up the build time if the next loader uses the same AST.</p> <h3 id="dependencies"><code>dependencies</code><a href="#dependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>Array[String]</code> Default: <code>[]</code></p> <p>An array of absolute, native paths to file dependencies that should be watched by webpack for changes.</p> <p>Dependencies can also be added using <a href="/api/loaders/#thisadddependency"><code>loaderContext.addDependency(file: string)</code></a>.</p> <h3 id="contextdependencies"><code>contextDependencies</code><a href="#contextdependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>Array[String]</code> Default: <code>[]</code></p> <p>An array of absolute, native paths to directory dependencies that should be watched by webpack for changes.</p> <p>Context dependencies can also be added using <a href="/api/loaders/#thisaddcontextdependency"><code>loaderContext.addContextDependency(directory: string)</code></a>.</p> <h3 id="builddependencies"><code>buildDependencies</code><a href="#builddependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>Array[String]</code> Default: <code>[]</code></p> <p>An array of absolute, native paths to directory dependencies that should be watched by webpack for changes.</p> <p>Build dependencies can also be added using <code>loaderContext.addBuildDependency(file: string)</code>.</p> <h3 id="cacheable"><code>cacheable</code><a href="#cacheable" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>Boolean</code> Default: <code>false</code></p> <p>If <code>true</code>, specifies that the code can be re-used in watch mode if none of the <code>dependencies</code> have changed.</p> <h2 id="examples">Examples<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="simple">Simple<a href="#simple" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>In this example the loader is configured to operator on a file name of <code>years-in-ms.js</code>, execute the code, and store the result in the bundle as the result of the execution. This example passes <code>years</code> as an <code>option</code>, which corresponds to the <code>years</code> parameter in the target module exported function:</p> <p><strong>years-in-ms.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">yearsInMs</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> years <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> value <span class="token operator">=</span> years <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// NOTE: this return value will replace the module in the bundle</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    cacheable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    code<span class="token operator">:</span> <span class="token string">"module.exports = "</span> <span class="token operator">+</span> value<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"src/years-in-ms.js"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> <span class="token string">"val-loader"</span><span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              years<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>In the bundle, requiring the module then returns:</p> <pre><code class="hljs language-js"><span class="token keyword">import</span> tenYearsMs <span class="token keyword">from</span> <span class="token string">"years-in-ms"</span><span class="token punctuation">;</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tenYearsMs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 315360000000</span></code></pre> <h3 id="modernizr">Modernizr<a href="#modernizr" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Example shows how to build <a href="https://www.npmjs.com/package/modernizr"><code>modernizr</code></a>.</p> <p><strong>entry.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">import</span> modenizr <span class="token keyword">from</span> <span class="token string">"./modernizr.js"</span><span class="token punctuation">;</span></code></pre> <p><strong>modernizr.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> modernizr <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"modernizr"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// It is impossible to throw an error because modernizr causes the process.exit(1)</span>\n    modernizr<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">output</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        cacheable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n        code<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">var modernizr; var hadGlobal = \'Modernizr\' in window; var oldGlobal = window.Modernizr; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>output<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> modernizr = window.Modernizr; if (hadGlobal) { window.Modernizr = oldGlobal; } else { delete window.Modernizr; } export default modernizr;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"src"</span><span class="token punctuation">,</span> <span class="token string">"modernizr.js"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> <span class="token string">"val-loader"</span><span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              minify<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n              options<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"setClasses"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n              <span class="token string">"feature-detects"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n                <span class="token string">"test/css/flexbox"</span><span class="token punctuation">,</span>\n                <span class="token string">"test/es6/promises"</span><span class="token punctuation">,</span>\n                <span class="token string">"test/serviceworker"</span><span class="token punctuation">,</span>\n              <span class="token punctuation">]</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="figlet">Figlet<a href="#figlet" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Example shows how to build <a href="https://www.npmjs.com/package/figlet"><code>figlet</code></a>.</p> <p><strong>entry.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> figlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./figlet.js"</span><span class="token punctuation">;</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>figlet<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p><strong>figlet.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> figlet <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"figlet"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">wrapOutput</span><span class="token punctuation">(</span><span class="token parameter">output<span class="token punctuation">,</span> config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> figletOutput <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>textBefore<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    figletOutput <span class="token operator">+=</span> <span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>config<span class="token punctuation">.</span>textBefore<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  output<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\\n"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">line</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    figletOutput <span class="token operator">+=</span> <span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>line<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>textAfter<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    figletOutput <span class="token operator">+=</span> <span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>config<span class="token punctuation">.</span>textAfter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">module.exports = decodeURI("</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>figletOutput<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">");</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nmodule<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> defaultConfig <span class="token operator">=</span> <span class="token punctuation">{</span>\n    fontOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n      font<span class="token operator">:</span> <span class="token string">"ANSI Shadow"</span><span class="token punctuation">,</span>\n      horizontalLayout<span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>\n      kerning<span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>\n      verticalLayout<span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    text<span class="token operator">:</span> <span class="token string">"FIGLET-LOADER"</span><span class="token punctuation">,</span>\n    textAfter<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    textBefore<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">const</span> config <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> defaultConfig<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    figlet<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>text<span class="token punctuation">,</span> config<span class="token punctuation">.</span>fontOptions<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> output</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n\n      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        cacheable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n        code<span class="token operator">:</span> <span class="token string">"module.exports = "</span> <span class="token operator">+</span> <span class="token function">wrapOutput</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"src"</span><span class="token punctuation">,</span> <span class="token string">"figlet.js"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> <span class="token string">"val-loader"</span><span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              text<span class="token operator">:</span> <span class="token string">"FIGLET"</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="contributing">Contributing<a href="#contributing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>Please take a moment to read our contributing guidelines if you haven\'t yet done so.</p> <p><a href="https://github.com/webpack-contrib/val-loader/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p> <h2 id="license">License<a href="#license" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><a href="https://github.com/webpack-contrib/val-loader/blob/master/LICENSE">MIT</a></p> '}}]);