"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2157],{2157:function(n,e,s){s.r(e),s.d(e,{default:function(){return o}});var a=s(2540),c=s(3317);function t(n){const e={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",span:"span",strong:"strong",...(0,c.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.p,{children:["The ",(0,a.jsx)(e.code,{children:"NormalModuleReplacementPlugin"})," allows you to replace resources that match ",(0,a.jsx)(e.code,{children:"resourceRegExp"})," with ",(0,a.jsx)(e.code,{children:"newResource"}),". If ",(0,a.jsx)(e.code,{children:"newResource"})," is relative, it is resolved relative to the previous resource. If ",(0,a.jsx)(e.code,{children:"newResource"})," is a function, it is expected to overwrite the request attribute of the supplied resource."]}),"\n",(0,a.jsx)(e.p,{children:"This can be useful for allowing different behaviour between builds."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-js",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"new"})," ",(0,a.jsxs)(e.span,{className:"token class-name",children:["webpack",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"NormalModuleReplacementPlugin"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"resourceRegExp",(0,a.jsx)(e.span,{className:"token punctuation",children:","})," newResource",(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(e.p,{children:["Note that the ",(0,a.jsx)(e.code,{children:"resourceRegExp"})," is tested against the request you write in your code, not the resolved resource. For instance, ",(0,a.jsx)(e.code,{children:"'./sum'"})," will be used to test instead of ",(0,a.jsx)(e.code,{children:"'./sum.js'"})," when you have code ",(0,a.jsx)(e.code,{children:"import sum from './sum'"}),"."]}),"\n",(0,a.jsxs)(e.p,{children:["Also please note that when using Windows, you have to accomodate for the different folder separator symbol. E.g. ",(0,a.jsx)(e.code,{children:"/src\\/environments\\/environment\\.ts/"})," won't work on Windows, you have to use ",(0,a.jsx)(e.code,{children:"/src[\\\\/]environments[\\\\/]environment\\.ts/,"})," instead."]}),"\n",(0,a.jsxs)(e.h2,{children:[(0,a.jsx)(e.span,{id:"basic-example"}),"Basic Example",(0,a.jsx)(e.a,{href:"#basic-example","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(e.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(e.p,{children:["Replace a specific module when building for a ",(0,a.jsx)(e.a,{href:"/guides/production",children:"development environment"}),"."]}),"\n",(0,a.jsxs)(e.p,{children:["Say you have a configuration file ",(0,a.jsx)(e.code,{children:"some/path/config.development.module.js"})," and a special version for production in ",(0,a.jsx)(e.code,{children:"some/path/config.production.module.js"})]}),"\n",(0,a.jsx)(e.p,{children:"Add the following plugin when building for production:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"new"})," ",(0,a.jsxs)(e.span,{className:"token class-name",children:["webpack",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"NormalModuleReplacementPlugin"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"\n  ",(0,a.jsx)(e.span,{className:"token regex",children:"/some\\/path\\/config\\.development\\.js/"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(e.span,{className:"token string",children:"'./config.production.js'"}),"\n",(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(e.h2,{children:[(0,a.jsx)(e.span,{id:"advanced-example"}),"Advanced Example",(0,a.jsx)(e.a,{href:"#advanced-example","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(e.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(e.p,{children:["Conditional build depending on an ",(0,a.jsx)(e.a,{href:"/configuration/configuration-types",children:"specified environment"}),"."]}),"\n",(0,a.jsx)(e.p,{children:"Say you want a configuration with specific values for different build targets."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:["module",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function-variable function",children:"exports"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"function"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token parameter",children:"env"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(e.span,{className:"token keyword",children:"var"})," appTarget ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," env",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token constant",children:"APP_TARGET"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"||"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'VERSION_A'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n  ",(0,a.jsx)(e.span,{className:"token keyword",children:"return"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n    plugins",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),"\n      ",(0,a.jsx)(e.span,{className:"token keyword",children:"new"})," ",(0,a.jsxs)(e.span,{className:"token class-name",children:["webpack",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"NormalModuleReplacementPlugin"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token regex",children:"/-APP_TARGET$/"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"function"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"\n        ",(0,a.jsx)(e.span,{className:"token parameter",children:"resource"}),"\n      ",(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n        resource",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"request ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," resource",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"request",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"replace"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"\n          ",(0,a.jsx)(e.span,{className:"token regex",children:"/-APP_TARGET/"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n          ",(0,a.jsxs)(e.span,{className:"token template-string",children:[(0,a.jsx)(e.span,{className:"token template-punctuation string",children:"`"}),(0,a.jsx)(e.span,{className:"token string",children:"-"}),(0,a.jsxs)(e.span,{className:"token interpolation",children:[(0,a.jsx)(e.span,{className:"token interpolation-punctuation punctuation",children:"${"}),"appTarget",(0,a.jsx)(e.span,{className:"token interpolation-punctuation punctuation",children:"}"})]}),(0,a.jsx)(e.span,{className:"token template-punctuation string",children:"`"})]}),"\n        ",(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n\n        ",(0,a.jsx)(e.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"resource",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"createData",(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n          resource",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"createData",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"request ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," resource",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"request",(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n        ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n      ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsx)(e.p,{children:"Create the two configuration files:"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"app/config-VERSION_A.js"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"export"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"default"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n  title",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'I am version A'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"app/config-VERSION_B.js"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"export"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"default"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n  title",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'I am version B'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsx)(e.p,{children:"Then import that configuration using the keyword you're looking for in the regexp:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," config ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'app/config-APP_TARGET'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\nconsole",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"log"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"config",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"title",(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsx)(e.p,{children:"And now you get the right configuration imported depending on which target you're building for:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-bash",children:["npx webpack --env ",(0,a.jsx)(e.span,{className:"token assign-left variable",children:"APP_TARGET"}),(0,a.jsx)(e.span,{className:"token operator",children:"="}),"VERSION_A\n",(0,a.jsx)(e.span,{className:"token operator",children:"="}),(0,a.jsx)(e.span,{className:"token operator",children:">"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'I am version A'"}),"\n\nnpx webpack --env ",(0,a.jsx)(e.span,{className:"token assign-left variable",children:"APP_TARGET"}),(0,a.jsx)(e.span,{className:"token operator",children:"="}),"VERSION_B\n",(0,a.jsx)(e.span,{className:"token operator",children:"="}),(0,a.jsx)(e.span,{className:"token operator",children:">"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'I am version B'"})]})})]})}function o(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(t,{...n})}):t(n)}}}]);