"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2203],{2203:function(n,s,e){e.r(s),e.d(s,{default:function(){return o}});var a=e(2540),c=e(3317);function t(n){const s={a:"a",aside:"aside",code:"code",h2:"h2",h6:"h6",p:"p",pre:"pre",span:"span",strong:"strong",...(0,c.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.p,{children:["As of webpack 5, you can use ",(0,a.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers",children:"Web Workers"})," without ",(0,a.jsx)(s.a,{href:"https://github.com/webpack-contrib/worker-loader",children:(0,a.jsx)(s.code,{children:"worker-loader"})}),"."]}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"syntax"}),"Syntax",(0,a.jsx)(s.a,{href:"#syntax","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Worker"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"URL"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:"'./worker.js'"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"import"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"meta",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"url",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:[(0,a.jsx)(s.span,{className:"token comment",children:"// or customize the chunk name with magic comments"}),"\n",(0,a.jsx)(s.span,{className:"token comment",children:"// see https://webpack.js.org/api/module-methods/#magic-comments"}),"\n",(0,a.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Worker"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:'/* webpackChunkName: "foo-worker" */'})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"URL"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:"'./worker.js'"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"import"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"meta",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"url",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsx)(s.p,{children:"The syntax was chosen to allow running code without bundler, it is also available in native ECMAScript modules in the browser."}),"\n",(0,a.jsxs)(s.p,{children:["Note that while the ",(0,a.jsxs)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Worker/Worker",children:[(0,a.jsx)(s.code,{children:"Worker"})," API"]})," suggests that ",(0,a.jsx)(s.code,{children:"Worker"})," constructor would accept a string representing the URL of the script, in webpack 5 you can only use ",(0,a.jsx)(s.code,{children:"URL"})," instead."]}),"\n",(0,a.jsxs)(s.aside,{className:"warning",children:[(0,a.jsx)(s.h6,{className:"warning__prefix",children:"warning"}),(0,a.jsxs)(s.p,{children:["Using a variable in the ",(0,a.jsx)(s.code,{children:"Worker"})," constructor is not supported by webpack. For example, the following code will not work: ",(0,a.jsx)(s.code,{children:"const url = new URL('./path/to/worker.ts', import.meta.url); const worker = new Worker(url);"}),". This is because webpack cannot analyse the syntax statically. It is important to be aware of this limitation when using ",(0,a.jsx)(s.code,{children:"Worker"})," syntax with webpack."]})]}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"example"}),"Example",(0,a.jsx)(s.a,{href:"#example","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"src/index.js"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"const"})," worker ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Worker"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"URL"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:"'./deep-thought.js'"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"import"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"meta",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"url",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\nworker",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"postMessage"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  question",(0,a.jsx)(s.span,{className:"token operator",children:":"}),"\n    ",(0,a.jsx)(s.span,{className:"token string",children:"'The Answer to the Ultimate Question of Life, The Universe, and Everything.'"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\nworker",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function-variable function",children:"onmessage"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token parameter",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," data",(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," answer ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  console",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"log"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"answer",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"src/deep-thought.js"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:["self",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function-variable function",children:"onmessage"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token parameter",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," data",(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," question ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  self",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"postMessage"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    answer",(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token number",children:"42"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"nodejs"}),"Node.js",(0,a.jsx)(s.a,{href:"#nodejs","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsx)(s.p,{children:"Similar syntax is supported in Node.js (>= 12.17.0):"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"})," Worker ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(s.span,{className:"token string",children:"'worker_threads'"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\n",(0,a.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Worker"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"URL"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:"'./worker.js'"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"import"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"meta",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"url",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(s.p,{children:["Note that this is only available in ESM. ",(0,a.jsx)(s.code,{children:"Worker"})," in CommonJS syntax is not supported by either webpack or Node.js."]})]})}function o(n={}){const{wrapper:s}={...(0,c.R)(),...n.components};return s?(0,a.jsx)(s,{...n,children:(0,a.jsx)(t,{...n})}):t(n)}}}]);