"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2367],{2367:function(n,s,a){a.r(s),s.default='<p>Plugin and Loader for <a href="http://webpack.js.org/">webpack</a> to optimize (compress) all images using <a href="https://github.com/imagemin/imagemin">imagemin</a>. Do not worry about size of images, now they are always optimized/compressed.</p> <p><a href="https://npmjs.com/package/image-minimizer-webpack-plugin"><img src="https://img.shields.io/npm/v/image-minimizer-webpack-plugin.svg" alt="npm"></a> <a href="https://nodejs.org"><img src="https://img.shields.io/node/v/image-minimizer-webpack-plugin.svg" alt="node"></a> <a href="https://david-dm.org/webpack-contrib/image-minimizer-webpack-plugin"><img src="https://david-dm.org/webpack-contrib/image-minimizer-webpack-plugin.svg" alt="deps"></a> <a href="https://github.com/webpack-contrib/image-minimizer-webpack-plugin/actions"><img src="https://github.com/webpack-contrib/image-minimizer-webpack-plugin/workflows/image-minimizer-webpack-plugin/badge.svg" alt="tests"></a> <a href="https://codecov.io/gh/webpack-contrib/image-minimizer-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/image-minimizer-webpack-plugin/branch/master/graph/badge.svg" alt="cover"></a> <a href="https://gitter.im/webpack/webpack"><img src="https://badges.gitter.im/webpack/webpack.svg" alt="chat"></a> <a href="https://packagephobia.now.sh/result?p=image-minimizer-webpack-plugin"><img src="https://packagephobia.now.sh/badge?p=image-minimizer-webpack-plugin" alt="size"></a></p> <h2 id="getting-started">Getting Started<a href="#getting-started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>This plugin can use 2 tools to compress images:</p> <ul> <li><a href="https://github.com/imagemin/imagemin"><code>imagemin</code></a> - optimize your images by default, since it is stable and works with all types of images</li> <li><a href="https://github.com/GoogleChromeLabs/squoosh/tree/dev/libsquoosh"><code>squoosh</code></a> - while working in experimental mode with <code>.jpg</code>, <code>.jpeg</code>, <code>.png</code>, <code>.webp</code>, <code>.avif</code> file types.</li> </ul> <p>To begin, you\'ll need to install <code>image-minimizer-webpack-plugin</code>:</p> <pre><code class="hljs language-console">$ npm install image-minimizer-webpack-plugin --save-dev\n</code></pre> <p>Images can be optimized in two modes:</p> <ol> <li><a href="https://en.wikipedia.org/wiki/Lossless_compression">Lossless</a> (without loss of quality).</li> <li><a href="https://en.wikipedia.org/wiki/Lossy_compression">Lossy</a> (with loss of quality).</li> </ol> <h3 id="optimize-with-imagemin">Optimize with <a href="https://github.com/imagemin/imagemin">imagemin</a><a href="#optimize-with-imagemin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Note:</p> <ul> <li><a href="https://github.com/imagemin/imagemin-mozjpeg">imagemin-mozjpeg</a> can be configured in lossless and lossy mode.</li> <li><a href="https://github.com/imagemin/imagemin-svgo">imagemin-svgo</a> can be configured in lossless and lossy mode.</li> </ul> <p>Explore the options to get the best result for you.</p> <p><strong>Recommended imagemin plugins for lossless optimization</strong></p> <pre><code class="hljs language-shell"><span class="token function">npm</span> <span class="token function">install</span> imagemin-gifsicle imagemin-jpegtran imagemin-optipng imagemin-svgo --save-dev</code></pre> <p><strong>Recommended imagemin plugins for lossy optimization</strong></p> <pre><code class="hljs language-shell"><span class="token function">npm</span> <span class="token function">install</span> imagemin-gifsicle imagemin-mozjpeg imagemin-pngquant imagemin-svgo --save-dev</code></pre> <p>For <code>imagemin-svgo</code> v9.0.0+ need use svgo <a href="https://github.com/svg/svgo#configuration">configuration</a></p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token punctuation">{</span> extendDefaultPlugins <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"svgo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        <span class="token comment">// Lossless optimization with custom option</span>\n        <span class="token comment">// Feel free to experiment with options for better result for you</span>\n        plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">[</span><span class="token string">"gifsicle"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> interlaced<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n          <span class="token punctuation">[</span><span class="token string">"jpegtran"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> progressive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n          <span class="token punctuation">[</span><span class="token string">"optipng"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> optimizationLevel<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n          <span class="token comment">// Svgo configuration here https://github.com/svg/svgo#configuration</span>\n          <span class="token punctuation">[</span>\n            <span class="token string">"svgo"</span><span class="token punctuation">,</span>\n            <span class="token punctuation">{</span>\n              plugins<span class="token operator">:</span> <span class="token function">extendDefaultPlugins</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n                <span class="token punctuation">{</span>\n                  name<span class="token operator">:</span> <span class="token string">"removeViewBox"</span><span class="token punctuation">,</span>\n                  active<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                <span class="token punctuation">{</span>\n                  name<span class="token operator">:</span> <span class="token string">"addAttributesToSVGElement"</span><span class="token punctuation">,</span>\n                  params<span class="token operator">:</span> <span class="token punctuation">{</span>\n                    attributes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> xmlns<span class="token operator">:</span> <span class="token string">"http://www.w3.org/2000/svg"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n                  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n              <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="optimize-with-squoosh">Optimize with <a href="https://github.com/GoogleChromeLabs/squoosh/tree/dev/libsquoosh"><code>squoosh</code></a><a href="#optimize-with-squoosh" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-console">$ npm install @squoosh/lib --save-dev\n</code></pre> <p><strong>Recommended <code>@squoosh/lib</code> options for lossy optimization</strong></p> <p>For lossy optimization we recommend using the default settings <code>@squoosh/lib</code>. The default values and supported file types for each option can be found in the <code>[codecs.ts]</code>(<a href="https://github.com/GoogleChromeLabs/squoosh/blob/dev/libsquoosh/src/codecs.ts">https://github.com/GoogleChromeLabs/squoosh/blob/dev/libsquoosh/src/codecs.ts</a>) file under <code>codecs</code>.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png)$/i</span><span class="token punctuation">,</span>\n        type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      minify<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>squooshMinify<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p><strong>Recommended <code>squoosh</code> options for lossless optimization</strong></p> <p>For lossless optimization we recommend using the options listed below in <code>minimizerOptions.encodeOptions</code>.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png)$/i</span><span class="token punctuation">,</span>\n        type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      minify<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>squooshMinify<span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        encodeOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n          mozjpeg<span class="token operator">:</span> <span class="token punctuation">{</span>\n            <span class="token comment">// That setting might be close to lossless, but it’s not guaranteed</span>\n            <span class="token comment">// https://github.com/GoogleChromeLabs/squoosh/issues/85</span>\n            quality<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          webp<span class="token operator">:</span> <span class="token punctuation">{</span>\n            lossless<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          avif<span class="token operator">:</span> <span class="token punctuation">{</span>\n            <span class="token comment">// https://github.com/GoogleChromeLabs/squoosh/blob/dev/codecs/avif/enc/README.md</span>\n            cqLevel<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <blockquote> <p>ℹ️ If you want to use <code>loader</code> or <code>plugin</code> standalone see sections below, but this is not recommended.</p> </blockquote> <h3 id="standalone-loader">Standalone Loader<a href="#standalone-loader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><a href="/concepts/loaders/">Documentation: Using loaders</a></p> <p>In your <code>webpack.config.js</code>, add the <code>ImageMinimizerPlugin.loader</code> and specify the <a href="/guides/asset-modules/">asset modules options</a>:</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              severityError<span class="token operator">:</span> <span class="token string">"warning"</span><span class="token punctuation">,</span> <span class="token comment">// Ignore errors on corrupted images</span>\n              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n                plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"gifsicle"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n              <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="standalone-plugin">Standalone Plugin<a href="#standalone-plugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><a href="/concepts/plugins/">Documentation: Using plugins</a></p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token comment">// Make sure that the plugin placed after any plugins that added images</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      severityError<span class="token operator">:</span> <span class="token string">"warning"</span><span class="token punctuation">,</span> <span class="token comment">// Ignore errors on corrupted images</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"gifsicle"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token comment">// Disable `loader`</span>\n      loader<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="options">Options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="plugin-options">Plugin Options<a href="#plugin-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <table> <thead> <tr> <th align="center">Name</th> <th align="center">Type</th> <th align="center">Default</th> <th align="left">Description</th> </tr> </thead> <tbody> <tr> <td align="center" data-th="Name"><span><strong><code>test</code></strong></span></td> <td align="center" data-th="Type"><span><code>{String\\/RegExp|Array&#x3C;String|RegExp>}</code></span></td> <td align="center" data-th="Default"><span><code>/.(jpe?g|png|gif|tif|webp|svg|avif)$/i</code></span></td> <td align="left" data-th="Description"><span>Test to match files against</span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>include</code></strong></span></td> <td align="center" data-th="Type"><span><code>{String\\/RegExp|Array&#x3C;String|RegExp>}</code></span></td> <td align="center" data-th="Default"><span><code>undefined</code></span></td> <td align="left" data-th="Description"><span>Files to <code>include</code></span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>exclude</code></strong></span></td> <td align="center" data-th="Type"><span><code>{String\\/RegExp|Array&#x3C;String|RegExp>}</code></span></td> <td align="center" data-th="Default"><span><code>undefined</code></span></td> <td align="left" data-th="Description"><span>Files to <code>exclude</code></span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>filter</code></strong></span></td> <td align="center" data-th="Type"><span><code>{Function}</code></span></td> <td align="center" data-th="Default"><span><code>() => true</code></span></td> <td align="left" data-th="Description"><span>Allows filtering of images for optimization</span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>severityError</code></strong></span></td> <td align="center" data-th="Type"><span><code>{String}</code></span></td> <td align="center" data-th="Default"><span><code>\'error\'</code></span></td> <td align="left" data-th="Description"><span>Allows to choose how errors are displayed</span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>minify</code></strong></span></td> <td align="center" data-th="Type"><span><code>{Function | Array&#x3C;Function>}</code></span></td> <td align="center" data-th="Default"><span><code>ImageMinimizerPlugin.imageminMinify</code></span></td> <td align="left" data-th="Description"><span>Allows to override default minify function</span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>minimizerOptions</code></strong></span></td> <td align="center" data-th="Type"><span><code>{Object|Array&#x3C;Object>}</code></span></td> <td align="center" data-th="Default"><span><code>{ plugins: [] }</code></span></td> <td align="left" data-th="Description"><span>Options for <code>imagemin</code></span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>loader</code></strong></span></td> <td align="center" data-th="Type"><span><code>{Boolean}</code></span></td> <td align="center" data-th="Default"><span><code>true</code></span></td> <td align="left" data-th="Description"><span>Automatically adding <code>imagemin-loader</code></span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>maxConcurrency</code></strong></span></td> <td align="center" data-th="Type"><span><code>{Number}</code></span></td> <td align="center" data-th="Default"><span><code>Math.max(1, os.cpus().length - 1)</code></span></td> <td align="left" data-th="Description"><span>Maximum number of concurrency optimization processes in one time</span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>filename</code></strong></span></td> <td align="center" data-th="Type"><span><code>{string|Function}</code></span></td> <td align="center" data-th="Default"><span><code>\'[path][name][ext]\'</code></span></td> <td align="left" data-th="Description"><span>Allows to set the filename for the generated asset. Useful for converting to a <code>webp</code></span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>deleteOriginalAssets</code></strong></span></td> <td align="center" data-th="Type"><span><code>{Boolean}</code></span></td> <td align="center" data-th="Default"><span><code>false</code></span></td> <td align="left" data-th="Description"><span>Allows to delete the original asset. Useful for converting to a <code>webp</code> and remove original assets</span></td> </tr> </tbody> </table> <h4 id="test"><code>test</code><a href="#test" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>String|RegExp|Array&#x3C;String|RegExp></code> Default: <code>/\\.(jpe?g\\|png\\|gif\\|tif\\|webp\\|svg\\|avif)\\$/i</code></p> <p>Test to match files against.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="include"><code>include</code><a href="#include" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>String|RegExp|Array&#x3C;String|RegExp></code> Default: <code>undefined</code></p> <p>Files to include.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      include<span class="token operator">:</span> <span class="token regex">/\\/includes/</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="exclude"><code>exclude</code><a href="#exclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>String|RegExp|Array&#x3C;String|RegExp></code> Default: <code>undefined</code></p> <p>Files to exclude.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      exclude<span class="token operator">:</span> <span class="token regex">/\\/excludes/</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="filter"><code>filter</code><a href="#filter" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>Function</code> Default: <code>() => true</code></p> <p>Allows filtering of images for optimization.</p> <p>Return <code>true</code> to optimize the image, <code>false</code> otherwise.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">source<span class="token punctuation">,</span> sourcePath</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token comment">// The `source` argument is a `Buffer` of source file</span>\n        <span class="token comment">// The `sourcePath` argument is an absolute path to source</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span>byteLength <span class="token operator">&#x3C;</span> <span class="token number">8192</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="severityerror"><code>severityError</code><a href="#severityerror" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>String</code> Default: <code>\'error\'</code></p> <p>Allows to choose how errors are displayed.</p> <p>Сan have the following values:</p> <ul> <li><code>\'off\'</code> - suppresses errors and warnings</li> <li><code>\'warning\'</code> - emit warnings instead errors</li> <li><code>\'error\'</code> - emit errors</li> </ul> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      severityError<span class="token operator">:</span> <span class="token string">"warning"</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="minify"><code>minify</code><a href="#minify" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>Function|Array&#x3C;Function></code> Default: <code>ImageMinimizerPlugin.imageminMinify</code></p> <p>Allows to override default minify function. By default plugin uses <a href="https://github.com/imagemin/imagemin">imagemin</a> package. Useful for using and testing unpublished versions or forks.</p> <p>Аvailable minifiers:</p> <ul> <li>ImageMinimizerPlugin.imageminMinify</li> <li>ImageMinimizerPlugin.squooshMinify</li> </ul> <h5 id="function"><code>Function</code><a href="#function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token function-variable function">minify</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">let</span> result<span class="token punctuation">;</span>\n\n        <span class="token keyword">try</span> <span class="token punctuation">{</span>\n          result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">minifyAndReturnBuffer</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token comment">// Return original input if there was an error</span>\n          <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> input<span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> result<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h5 id="array"><code>Array</code><a href="#array" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p>If an array of functions is passed to the <code>minify</code> option, the <code>minimizerOptions</code> can be an array or an object. If <code>minimizerOptions</code> is array, the function index in the <code>minify</code> array corresponds to the options object with the same index in the <code>minimizerOptions</code> array. If you use <code>minimizerOptions</code> like object, all <code>minify</code> function accept it.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      minify<span class="token operator">:</span> <span class="token punctuation">[</span>\n        ImageMinimizerPlugin<span class="token punctuation">.</span>imageminMinify<span class="token punctuation">,</span>\n        <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n          <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n          <span class="token keyword">let</span> result<span class="token punctuation">;</span>\n\n          <span class="token keyword">try</span> <span class="token punctuation">{</span>\n            result <span class="token operator">=</span> <span class="token function">minifyAndReturnBuffer</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token comment">// Return original input if there was an error</span>\n            <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> input<span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span>\n\n          <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> result<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">[</span>\n        <span class="token comment">// Options for the first function (ImageMinimizerPlugin.imageminMinify)</span>\n        <span class="token punctuation">{</span>\n          plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"gifsicle"</span><span class="token punctuation">,</span> <span class="token string">"mozjpeg"</span><span class="token punctuation">,</span> <span class="token string">"pngquant"</span><span class="token punctuation">,</span> <span class="token string">"svgo"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token comment">// Options for the second function</span>\n        <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="minimizeroptions"><code>minimizerOptions</code><a href="#minimizeroptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>Object|Array&#x3C;Object></code> Default: <code>{ plugins: [] }</code></p> <p>Options for <code>minify</code> functions. <a href="https://github.com/imagemin/imagemin"><code>imagemin</code></a> is default minify function.</p> <p>More information and examples <a href="https://github.com/imagemin/imagemin">here</a>.</p> <h5 id="object"><code>Object</code><a href="#object" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token comment">// Name</span>\n          <span class="token string">"gifsicle"</span><span class="token punctuation">,</span>\n          <span class="token comment">// Name with options</span>\n          <span class="token punctuation">[</span><span class="token string">"mozjpeg"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> quality<span class="token operator">:</span> <span class="token number">80</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n          <span class="token comment">// Full package name</span>\n          <span class="token punctuation">[</span>\n            <span class="token string">"imagemin-svgo"</span><span class="token punctuation">,</span>\n            <span class="token punctuation">{</span>\n              plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n                <span class="token punctuation">{</span>\n                  removeViewBox<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n              <span class="token punctuation">]</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">]</span><span class="token punctuation">,</span>\n          <span class="token punctuation">[</span>\n            <span class="token comment">// Custom package name</span>\n            <span class="token string">"nonstandard-imagemin-package-name"</span><span class="token punctuation">,</span>\n            <span class="token punctuation">{</span> myOptions<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h5 id="array-1"><code>Array</code><a href="#array-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p>The function index in the <code>minify</code> array corresponds to the options object with the same index in the <code>minimizerOptions</code> array. If you use <code>minimizerOptions</code> like object, all <code>minify</code> function accept it.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      minify<span class="token operator">:</span> <span class="token punctuation">[</span>\n        ImageMinimizerPlugin<span class="token punctuation">.</span>imageminMinify<span class="token punctuation">,</span>\n        <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n          <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n          <span class="token keyword">let</span> result<span class="token punctuation">;</span>\n\n          <span class="token keyword">try</span> <span class="token punctuation">{</span>\n            result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">minifyAndReturnBuffer</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token comment">// Return original input if there was an error</span>\n            <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> input<span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span>\n\n          <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> result<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">[</span>\n        <span class="token comment">// Options for the first function (ImageMinimizerPlugin.imageminMinify)</span>\n        <span class="token punctuation">{</span>\n          plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"gifsicle"</span><span class="token punctuation">,</span> <span class="token string">"mozjpeg"</span><span class="token punctuation">,</span> <span class="token string">"pngquant"</span><span class="token punctuation">,</span> <span class="token string">"svgo"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token comment">// Options for the second function</span>\n        <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="loader"><code>loader</code><a href="#loader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>Boolean</code> Default: <code>true</code></p> <p>Automatically adding <code>imagemin-loader</code>.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      loader<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="maxconcurrency"><code>maxConcurrency</code><a href="#maxconcurrency" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>Number</code> Default: <code>Math.max(1, os.cpus().length - 1)</code></p> <p>Maximum number of concurrency optimization processes in one time.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      maxConcurrency<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="filename"><code>filename</code><a href="#filename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>String|Function</code> Default: <code>\'[path][name][ext]\'</code></p> <p>Allows to set the filename for the generated asset. Useful for converting to a <code>webp</code>. Supported values see in <a href="/configuration/output/#template-strings"><code>webpack template strings</code></a>, <code>File-level</code> section.</p> <h5 id="string"><code>String</code><a href="#string" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token comment">// Images are converted to `webp` and the original assets have been kept</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      test<span class="token operator">:</span> <span class="token regex">/\\.(png)$/i</span><span class="token punctuation">,</span>\n      filename<span class="token operator">:</span> <span class="token string">"[path][name].webp"</span><span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"imagemin-webp"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h5 id="function-1"><code>Function</code><a href="#function-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token comment">// Images are converted to `webp` and the original assets have been kept</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      test<span class="token operator">:</span> <span class="token regex">/\\.(png)$/i</span><span class="token punctuation">,</span>\n      <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">pathData<span class="token punctuation">,</span> assetInfo</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/imageLg/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>pathData<span class="token punctuation">.</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token string">"./bigImages/[path][name].webp"</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">return</span> <span class="token string">"[path][name].webp"</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"imagemin-webp"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h5 id="converting-to-webp-using-imageminimizerpluginsquooshminify">Converting to <code>webp</code> using <code>ImageMinimizerPlugin.squooshMinify</code><a href="#converting-to-webp-using-imageminimizerpluginsquooshminify" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">/*\nconst defaultTargets = {\n  ".png": "oxipng",\n  ".jpg": "mozjpeg",\n  ".jpeg": "mozjpeg",\n  ".jxl": "jxl",\n  ".webp": "webp",\n  ".avif": "avif",\n};\n*/</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token comment">// Images are converted to `webp` and the original assets have been kept</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      test<span class="token operator">:</span> <span class="token regex">/\\.(png)$/i</span><span class="token punctuation">,</span>\n      filename<span class="token operator">:</span> <span class="token string">"[path][name].webp"</span><span class="token punctuation">,</span>\n      minify<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>squooshMinify<span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        targets<span class="token operator">:</span> <span class="token punctuation">{</span>\n          <span class="token string">".png"</span><span class="token operator">:</span> <span class="token string">"webp"</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="deleteoriginalassets"><code>deleteOriginalAssets</code><a href="#deleteoriginalassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>Boolean</code> Default: <code>false</code></p> <p>Allows to remove original assets. Useful for converting to a <code>webp</code> and remove original assets</p> <blockquote> <p>i Doesn\'t make sense if you haven\'t changed the original value of the <code>filename</code> option</p> </blockquote> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token comment">// Images are converted to `webp` and the original assets have been removed</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      test<span class="token operator">:</span> <span class="token regex">/\\.(png)$/i</span><span class="token punctuation">,</span>\n      deleteOriginalAssets<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      filename<span class="token operator">:</span> <span class="token string">"[path][name].webp"</span><span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"imagemin-webp"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>To generate and compress the original assets:</p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token comment">// And the original assets will be compressed</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      test<span class="token operator">:</span> <span class="token regex">/\\.(png)$/i</span><span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"pngquant"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token comment">// Images are converted to `webp` and the original assets have been removed</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      test<span class="token operator">:</span> <span class="token regex">/\\.(png)$/i</span><span class="token punctuation">,</span>\n      deleteOriginalAssets<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      filename<span class="token operator">:</span> <span class="token string">"[path][name].webp"</span><span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"imagemin-webp"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="loader-options">Loader Options<a href="#loader-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <table> <thead> <tr> <th align="center">Name</th> <th align="center">Type</th> <th align="center">Default</th> <th align="left">Description</th> </tr> </thead> <tbody> <tr> <td align="center" data-th="Name"><span><strong><code>filter</code></strong></span></td> <td align="center" data-th="Type"><span><code>{Function}</code></span></td> <td align="center" data-th="Default"><span><code>undefined</code></span></td> <td align="left" data-th="Description"><span>Allows filtering of images for optimization</span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>severityError</code></strong></span></td> <td align="center" data-th="Type"><span><code>{String}</code></span></td> <td align="center" data-th="Default"><span><code>\'error\'</code></span></td> <td align="left" data-th="Description"><span>Allows to choose how errors are displayed</span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>minify</code></strong></span></td> <td align="center" data-th="Type"><span><code>{Function | Array&#x3C;Function>}</code></span></td> <td align="center" data-th="Default"><span><code>ImageMinimizerPlugin.imageminMinify</code></span></td> <td align="left" data-th="Description"><span>Allows to override default minify function</span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>minimizerOptions</code></strong></span></td> <td align="center" data-th="Type"><span><code>{Object|Array&#x3C;Object>}</code></span></td> <td align="center" data-th="Default"><span><code>{ plugins: [] }</code></span></td> <td align="left" data-th="Description"><span>Options for <code>imagemin</code></span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>filename</code></strong></span></td> <td align="center" data-th="Type"><span><code>{string|Function}</code></span></td> <td align="center" data-th="Default"><span><code>\'[path][name][ext]\'</code></span></td> <td align="left" data-th="Description"><span>Allows to set the filename for the generated asset. Useful for converting to a <code>webp</code></span></td> </tr> <tr> <td align="center" data-th="Name"><span><strong><code>deleteOriginalAssets</code></strong></span></td> <td align="center" data-th="Type"><span><code>{Boolean}</code></span></td> <td align="center" data-th="Default"><span><code>false</code></span></td> <td align="left" data-th="Description"><span>Allows to delete the original asset. Useful for converting to a <code>webp</code> and remove original assets</span></td> </tr> </tbody> </table> <h4 id="filter-1"><code>filter</code><a href="#filter-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>Function</code> Default: <code>() => true</code></p> <p>Allows filtering of images for optimization.</p> <p>Return <code>true</code> to optimize the image, <code>false</code> otherwise.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              cache<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n              <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">source<span class="token punctuation">,</span> sourcePath</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n                <span class="token comment">// The `source` argument is a `Buffer` of source file</span>\n                <span class="token comment">// The `sourcePath` argument is an absolute path to source</span>\n                <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span>byteLength <span class="token operator">&#x3C;</span> <span class="token number">8192</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n                <span class="token punctuation">}</span>\n\n                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n              <span class="token punctuation">}</span><span class="token punctuation">,</span>\n              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n                plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"gifsicle"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n              <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="severityerror-1"><code>severityError</code><a href="#severityerror-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>String</code> Default: <code>\'error\'</code></p> <p>Allows to choose how errors are displayed.</p> <p>Сan have the following values:</p> <ul> <li><code>\'off\'</code> - suppresses errors and warnings</li> <li><code>\'warning\'</code> - emit warnings instead errors</li> <li><code>\'error\'</code> - emit errors</li> </ul> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              severityError<span class="token operator">:</span> <span class="token string">"warning"</span><span class="token punctuation">,</span>\n              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n                plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"gifsicle"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n              <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="minify-1"><code>minify</code><a href="#minify-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>Function|Array&#x3C;Function></code> Default: <code>ImageMinimizerPlugin.imageminMinify</code></p> <p>Allows to override default minify function. By default plugin uses <a href="https://github.com/imagemin/imagemin">imagemin</a> package. Useful for using and testing unpublished versions or forks.</p> <p>Аvailable minifiers:</p> <ul> <li>ImageMinimizerPlugin.imageminMinify</li> <li>ImageMinimizerPlugin.squooshMinify</li> </ul> <h5 id="function-2"><code>Function</code><a href="#function-2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              <span class="token function-variable function">minify</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n                <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n                <span class="token keyword">let</span> result<span class="token punctuation">;</span>\n\n                <span class="token keyword">try</span> <span class="token punctuation">{</span>\n                  result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">minifyAndReturnBuffer</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>\n                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                  <span class="token comment">// Return original input if there was an error</span>\n                  <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> input<span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n                <span class="token punctuation">}</span>\n\n                <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> result<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n              <span class="token punctuation">}</span><span class="token punctuation">,</span>\n              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h5 id="array-2"><code>Array</code><a href="#array-2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p>If an array of functions is passed to the <code>minify</code> option, the <code>minimizerOptions</code> can be an array or an object. If <code>minimizerOptions</code> is array, the function index in the <code>minify</code> array corresponds to the options object with the same index in the <code>minimizerOptions</code> array. If you use <code>minimizerOptions</code> like object, all <code>minify</code> function accept it.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              minify<span class="token operator">:</span> <span class="token punctuation">[</span>\n                ImageMinimizerPlugin<span class="token punctuation">.</span>imageminMinify<span class="token punctuation">,</span>\n                <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n                  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n                  <span class="token keyword">let</span> result<span class="token punctuation">;</span>\n\n                  <span class="token keyword">try</span> <span class="token punctuation">{</span>\n                    result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">minifyAndReturnBuffer</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>\n                  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                    <span class="token comment">// Return original input if there was an error</span>\n                    <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> input<span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n                  <span class="token punctuation">}</span>\n\n                  <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> result<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n              <span class="token punctuation">]</span><span class="token punctuation">,</span>\n              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">[</span>\n                <span class="token comment">// Options for the first function (ImageMinimizerPlugin.imageminMinify)</span>\n                <span class="token punctuation">{</span>\n                  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"gifsicle"</span><span class="token punctuation">,</span> <span class="token string">"mozjpeg"</span><span class="token punctuation">,</span> <span class="token string">"pngquant"</span><span class="token punctuation">,</span> <span class="token string">"svgo"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                <span class="token comment">// Options for the second function</span>\n                <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n              <span class="token punctuation">]</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="minimizeroptions-1"><code>minimizerOptions</code><a href="#minimizeroptions-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>Object|Array&#x3C;Object></code> Default: <code>{ plugins: [] }</code></p> <p>Options for <code>minify</code> functions. <a href="https://github.com/imagemin/imagemin"><code>imagemin</code></a> is default minify function.</p> <p>More information and examples <a href="https://github.com/imagemin/imagemin">here</a>.</p> <h5 id="object-1"><code>Object</code><a href="#object-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n                plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n                  <span class="token punctuation">[</span><span class="token string">"gifsicle"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> interlaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> optimizationLevel<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n                <span class="token punctuation">]</span><span class="token punctuation">,</span>\n              <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h5 id="array-3"><code>Array</code><a href="#array-3" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p>The function index in the <code>minify</code> array corresponds to the options object with the same index in the <code>minimizerOptions</code> array. If you use <code>minimizerOptions</code> like object, all <code>minify</code> function accept it.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              minify<span class="token operator">:</span> <span class="token punctuation">[</span>\n                ImageMinimizerPlugin<span class="token punctuation">.</span>imageminMinify<span class="token punctuation">,</span>\n                <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n                  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n                  <span class="token keyword">let</span> result<span class="token punctuation">;</span>\n\n                  <span class="token keyword">try</span> <span class="token punctuation">{</span>\n                    result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">minifyAndReturnBuffer</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>\n                  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                    <span class="token comment">// Return original input if there was an error</span>\n                    <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> input<span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n                  <span class="token punctuation">}</span>\n\n                  <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> result<span class="token punctuation">,</span> warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> errors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n              <span class="token punctuation">]</span><span class="token punctuation">,</span>\n              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">[</span>\n                <span class="token comment">// Options for the first function (ImageMinimizerPlugin.imageminMinify)</span>\n                <span class="token punctuation">{</span>\n                  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n                    <span class="token punctuation">[</span><span class="token string">"gifsicle"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> interlaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> optimizationLevel<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n                  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                <span class="token comment">// Options for the second function</span>\n                <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n              <span class="token punctuation">]</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="filename-1"><code>filename</code><a href="#filename-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>String|Function</code> Default: <code>\'[path][name][ext]\'</code></p> <p>Allows to set the filename for the generated asset. Useful for converting to a <code>webp</code>. Supported values see in <a href="/configuration/output/#template-strings"><code>webpack template strings</code></a>, <code>File-level</code> section.</p> <h5 id="string-1"><code>String</code><a href="#string-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif)$/i</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n            type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              filename<span class="token operator">:</span> <span class="token string">"[path][name].webp"</span><span class="token punctuation">,</span>\n              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n                plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"imagemin-webp"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n              <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h5 id="function-3"><code>Function</code><a href="#function-3" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif)$/i</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n            type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">pathData<span class="token punctuation">,</span> assetInfo</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/imageLg/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>pathData<span class="token punctuation">.</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                  <span class="token keyword">return</span> <span class="token string">"./bigImages/[path][name].webp"</span><span class="token punctuation">;</span>\n                <span class="token punctuation">}</span>\n\n                <span class="token keyword">return</span> <span class="token string">"[path][name].webp"</span><span class="token punctuation">;</span>\n              <span class="token punctuation">}</span><span class="token punctuation">,</span>\n              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n                plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"imagemin-webp"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n              <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="deleteoriginalassets-1"><code>deleteOriginalAssets</code><a href="#deleteoriginalassets-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>Boolean</code> Default: <code>false</code></p> <p>Allows to keep the original asset. Useful for converting to a <code>webp</code> and remove original assets.</p> <blockquote> <p>i Doesn\'t make sense if you haven\'t changed the original value of the <code>filename</code> option</p> </blockquote> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.(png)$/i</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span>\n            test<span class="token operator">:</span> <span class="token regex">/\\.(jpe?g|png|gif|svg)$/i</span><span class="token punctuation">,</span>\n            type<span class="token operator">:</span> <span class="token string">"asset"</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">{</span>\n            loader<span class="token operator">:</span> ImageMinimizerPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n            options<span class="token operator">:</span> <span class="token punctuation">{</span>\n              <span class="token comment">// PNG images are converted to WEBP, and the originals will keep</span>\n              deleteOriginalAssets<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n              filename<span class="token operator">:</span> <span class="token string">"[path][name].webp"</span><span class="token punctuation">,</span>\n              minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n                plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"imagemin-webp"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n              <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="additional-api">Additional API<a href="#additional-api" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="normalizeimageminconfigconfig"><code>normalizeImageminConfig(config)</code><a href="#normalizeimageminconfigconfig" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The function normalizes configuration (converts plugins names and options to <code>Function</code>s) for using in <code>imagemin</code> package directly.</p> <pre><code class="hljs language-js"><span class="token keyword">const</span> imagemin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"imagemin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token punctuation">{</span> normalizeImageminConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> imageminConfig <span class="token operator">=</span> <span class="token function">normalizeImageminConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">"jpegtran"</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span>\n      <span class="token string">"pngquant"</span><span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        quality<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">/*\n  console.log(imageminConfig);\n  =>\n  {\n    plugins: [Function, Function],\n    pluginsMeta: [\n      { name: "imagemin-jpegtran", version: "x.x.x", options: {} },\n      { name: "imagemin-pngquant", version: "x.x.x", options: { quality: [0.6, 0.8] }\n    ]\n  }\n*/</span>\n\n<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">imagemin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"images/*.{jpg,png}"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n    destination<span class="token operator">:</span> <span class="token string">"build/images"</span><span class="token punctuation">,</span>\n    plugins<span class="token operator">:</span> imageminConfig<span class="token punctuation">.</span>plugins<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// => [{data: &#x3C;Buffer 89 50 4e …>, path: \'build/images/foo.jpg\'}, …]</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h2 id="examples">Examples<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="optimize-images-based-on-size">Optimize images based on size<a href="#optimize-images-based-on-size" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>You can use difference options (like <code>progressive</code>/<code>interlaced</code> and etc) based on image size (example - don\'t do progressive transformation for small images).</p> <p>What is <code>progressive</code> image? <a href="https://jmperezperez.com/medium-image-progressive-loading-placeholder/"><code>Answer here</code></a>.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token comment">// Only apply this one to files equal to or over 8192 bytes</span>\n      <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span>byteLength <span class="token operator">>=</span> <span class="token number">8192</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"jpegtran"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> progressive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token comment">// Only apply this one to files under 8192</span>\n      <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span>byteLength <span class="token operator">&#x3C;</span> <span class="token number">8192</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"jpegtran"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> progressive<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="optimize-and-transform-images-to-webp">Optimize and transform images to <code>webp</code><a href="#optimize-and-transform-images-to-webp" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-js"><span class="token keyword">const</span> ImageMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"image-minimizer-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"pngquant"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">ImageMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      deleteOriginalAssets<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      filename<span class="token operator">:</span> <span class="token string">"[path][name].webp"</span><span class="token punctuation">,</span>\n      minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"imagemin-webp"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="contributing">Contributing<a href="#contributing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>Please take a moment to read our contributing guidelines if you haven\'t yet done so.</p> <p><a href="https://github.com/webpack-contrib/image-minimizer-webpack-plugin/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p> <h2 id="license">License<a href="#license" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><a href="https://github.com/webpack-contrib/image-minimizer-webpack-plugin/blob/master/LICENSE">MIT</a></p> '}}]);