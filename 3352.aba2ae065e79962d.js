"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3352],{3352:function(n,s,e){e.r(s),e.d(s,{default:function(){return o}});var a=e(2540),c=e(9710);function t(n){const s={a:"a",aside:"aside",code:"code",h2:"h2",h6:"h6",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",ul:"ul",...(0,c.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.p,{children:["Plugins are a key piece of the webpack ecosystem and provide the community with\na powerful way to tap into webpack's compilation process. A plugin is able to\n",(0,a.jsx)(s.a,{href:"/api/compiler-hooks/#hooks",children:"hook"})," into key events that are fired throughout each compilation. Every step\nof the way, the plugin will have full access to the ",(0,a.jsx)(s.code,{children:"compiler"})," and, when\napplicable, the current ",(0,a.jsx)(s.code,{children:"compilation"}),"."]}),"\n",(0,a.jsxs)(s.aside,{className:"tip",children:[(0,a.jsx)(s.h6,{className:"tip__prefix",children:"tip"}),(0,a.jsxs)(s.p,{children:["For a high-level introduction to writing plugins, start with\n",(0,a.jsx)(s.a,{href:"/contribute/writing-a-plugin",children:"writing a plugin"}),"."]})]}),"\n",(0,a.jsxs)(s.p,{children:["Let's start by going over ",(0,a.jsx)(s.code,{children:"tapable"})," utility, which provides the backbone of\nwebpack's plugin interface."]}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"tapable"}),"Tapable",(0,a.jsx)(s.a,{href:"#tapable","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(s.p,{children:["This small library is a core utility in webpack but can also be used elsewhere\nto provide a similar plugin interface. Many objects in webpack extend the\n",(0,a.jsx)(s.code,{children:"Tapable"})," class. The class exposes ",(0,a.jsx)(s.code,{children:"tap"}),", ",(0,a.jsx)(s.code,{children:"tapAsync"}),", and ",(0,a.jsx)(s.code,{children:"tapPromise"})," methods\nwhich plugins can use to inject custom build steps that will be fired\nthroughout a compilation."]}),"\n",(0,a.jsxs)(s.p,{children:["Please see the ",(0,a.jsx)(s.a,{href:"https://github.com/webpack/tapable",children:"documentation"})," to learn\nmore. An understanding of the three ",(0,a.jsx)(s.code,{children:"tap"})," methods, as well as the hooks that\nprovide them, is crucial. The objects that extend ",(0,a.jsx)(s.code,{children:"Tapable"})," (e.g. the compiler),\nthe hooks they provide, and each hook's type (e.g. the ",(0,a.jsx)(s.code,{children:"SyncHook"}),") will be\nnoted."]}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"plugin-types"}),"Plugin Types",(0,a.jsx)(s.a,{href:"#plugin-types","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(s.p,{children:["Depending on the hooks used and ",(0,a.jsx)(s.code,{children:"tap"})," methods applied, plugins can function in\na different number of ways. The way this works is closely related to the\n",(0,a.jsx)(s.a,{href:"https://github.com/webpack/tapable#tapable",children:"hooks"})," provided by ",(0,a.jsx)(s.code,{children:"Tapable"}),". The\n",(0,a.jsx)(s.a,{href:"/api/compiler-hooks/#hooks",children:"compiler hooks"})," each note the underlying ",(0,a.jsx)(s.code,{children:"Tapable"})," hook indicating which\n",(0,a.jsx)(s.code,{children:"tap"})," methods are available."]}),"\n",(0,a.jsxs)(s.p,{children:["So depending on which event you ",(0,a.jsx)(s.code,{children:"tap"})," into, the plugin may run differently. For\nexample, when hooking into the ",(0,a.jsx)(s.code,{children:"compile"})," stage, only the synchronous ",(0,a.jsx)(s.code,{children:"tap"})," method\ncan be used:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:["compiler",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"hooks",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"compile",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"tap"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"MyPlugin"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token parameter",children:"params"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  console",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"log"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"Synchronously tapping the compile hook."'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(s.p,{children:["However, for ",(0,a.jsx)(s.code,{children:"run"})," which utilizes the ",(0,a.jsx)(s.code,{children:"AsyncHook"}),", we can utilize ",(0,a.jsx)(s.code,{children:"tapAsync"}),"\nor ",(0,a.jsx)(s.code,{children:"tapPromise"})," (as well as ",(0,a.jsx)(s.code,{children:"tap"}),"):"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:["compiler",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"hooks",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"run",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"tapAsync"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"\n  ",(0,a.jsx)(s.span,{className:"token string",children:'"MyPlugin"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token parameter",children:["source",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," target",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," routesList",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," callback"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    console",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"log"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"Asynchronously tapping the run hook."'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n    ",(0,a.jsx)(s.span,{className:"token function",children:"callback"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\ncompiler",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"hooks",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"run",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"tapPromise"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"MyPlugin"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token parameter",children:["source",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," target",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," routesList"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"}),"\n  ",(0,a.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Promise"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token parameter",children:"resolve"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token function",children:"setTimeout"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"resolve",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token number",children:"1000"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"then"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    console",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"log"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"Asynchronously tapping the run hook with a delay."'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\ncompiler",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"hooks",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"run",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"tapPromise"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"\n  ",(0,a.jsx)(s.span,{className:"token string",children:'"MyPlugin"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token keyword",children:"async"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token parameter",children:["source",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," target",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," routesList"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token keyword",children:"await"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Promise"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token parameter",children:"resolve"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n      ",(0,a.jsx)(s.span,{className:"token function",children:"setTimeout"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"resolve",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token number",children:"1000"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n    console",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"log"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"Asynchronously tapping the run hook with a delay."'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(s.p,{children:["The moral of the story is that there are a variety of ways to ",(0,a.jsx)(s.code,{children:"hook"})," into the\n",(0,a.jsx)(s.code,{children:"compiler"}),", each one allowing your plugin to run as it sees fit."]}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"custom-hooks"}),"Custom Hooks",(0,a.jsx)(s.a,{href:"#custom-hooks","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(s.p,{children:["In order to offer a custom hook to the compilation for other plugins to ",(0,a.jsx)(s.code,{children:"tap"})," into,\nyou need to do the following:"]}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:["Create a module-scope ",(0,a.jsx)(s.code,{children:"WeakMap"})," for compilation hooks:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-ts",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"const"})," compilationHooks ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,a.jsxs)(s.span,{className:"token class-name",children:["WeakMap",(0,a.jsx)(s.span,{className:"token operator",children:"<"}),"Compilation",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," MyHooks",(0,a.jsx)(s.span,{className:"token operator",children:">"})]}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\n",(0,a.jsx)(s.span,{className:"token keyword",children:"interface"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"MyHooks"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  custom",(0,a.jsx)(s.span,{className:"token operator",children:":"})," SyncHook",(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"["}),(0,a.jsx)(s.span,{className:"token builtin",children:"number"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token builtin",children:"string"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})]})}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:"Create a static method on your plugin:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-ts",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"static"})," ",(0,a.jsx)(s.span,{className:"token function",children:"getCompilationHooks"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"compilation",(0,a.jsx)(s.span,{className:"token operator",children:":"})," Compilation",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:":"})," MyHooks ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," hooks ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," compilationHooks",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token keyword",children:"get"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"compilation",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n  ",(0,a.jsx)(s.span,{className:"token keyword",children:"if"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"hooks ",(0,a.jsx)(s.span,{className:"token operator",children:"==="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"undefined"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    compilationHooks",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token keyword",children:"set"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"compilation",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," hooks ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n      custom",(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"SyncHook"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n  ",(0,a.jsx)(s.span,{className:"token keyword",children:"return"})," hooks",(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})]})}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:"Call hooks like below in your plugin:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-ts",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"const"})," hooks ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," MyPlugin",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"getCompilationHooks"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"compilation",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\nhooks",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"custom"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"call"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token number",children:"1"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token string",children:'"hello"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:"Other plugins can access your custom hooks too:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-ts",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"import"})," MyPlugin ",(0,a.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"my-plugin"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\n",(0,a.jsx)(s.span,{className:"token keyword",children:"const"})," hooks ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," MyPlugin",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"getCompilationHooks"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"compilation",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\nhooks",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"custom",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"tap"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"OtherPlugin"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"n",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," s",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"// magic"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["Again, see the ",(0,a.jsx)(s.a,{href:"https://github.com/webpack/tapable",children:"documentation"})," for ",(0,a.jsx)(s.code,{children:"tapable"})," to learn more about the\ndifferent hook classes and how they work."]}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"reporting-progress"}),"Reporting Progress",(0,a.jsx)(s.a,{href:"#reporting-progress","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(s.p,{children:["Plugins can report progress via ",(0,a.jsx)(s.a,{href:"/plugins/progress-plugin/",children:(0,a.jsx)(s.code,{children:"ProgressPlugin"})}),", which prints progress messages to stderr by default. In order to enable progress reporting, pass a ",(0,a.jsx)(s.code,{children:"--progress"})," argument when running the ",(0,a.jsx)(s.a,{href:"/api/cli/",children:"webpack CLI"}),"."]}),"\n",(0,a.jsxs)(s.p,{children:["It is possible to customize the printed output by passing different arguments to the ",(0,a.jsx)(s.code,{children:"reportProgress"})," function of ",(0,a.jsx)(s.a,{href:"/plugins/progress-plugin/",children:(0,a.jsx)(s.code,{children:"ProgressPlugin"})}),"."]}),"\n",(0,a.jsxs)(s.p,{children:["To report progress, a plugin must ",(0,a.jsx)(s.code,{children:"tap"})," into a hook using the ",(0,a.jsx)(s.code,{children:"context: true"})," option:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:["compiler",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"hooks",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"emit",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"tapAsync"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    name",(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"MyPlugin"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    context",(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"true"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token parameter",children:["context",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," compiler",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," callback"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token keyword",children:"const"})," reportProgress ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," context ",(0,a.jsx)(s.span,{className:"token operator",children:"&&"})," context",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"reportProgress",(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n    ",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"reportProgress",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token function",children:"reportProgress"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token number",children:"0.95"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token string",children:'"Starting work"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n    ",(0,a.jsx)(s.span,{className:"token function",children:"setTimeout"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n      ",(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"reportProgress",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token function",children:"reportProgress"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token number",children:"0.95"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token string",children:'"Done work"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n      ",(0,a.jsx)(s.span,{className:"token function",children:"callback"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token number",children:"1000"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"reportProgress"})," function may be called with these arguments:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:[(0,a.jsx)(s.span,{className:"token function",children:"reportProgress"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"percentage",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token operator",children:"..."}),"args",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"percentage"}),": This argument is unused; instead, ",(0,a.jsx)(s.a,{href:"/plugins/progress-plugin/",children:(0,a.jsx)(s.code,{children:"ProgressPlugin"})})," will calculate a percentage based on the current hook."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"...args"}),": Any number of strings, which will be passed to the ",(0,a.jsx)(s.code,{children:"ProgressPlugin"})," handler to be reported to the user."]}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["Note that only a subset of compiler and compilation hooks support the ",(0,a.jsx)(s.code,{children:"reportProgress"})," function. See ",(0,a.jsx)(s.a,{href:"/plugins/progress-plugin/#supported-hooks",children:(0,a.jsx)(s.code,{children:"ProgressPlugin"})})," for a full list."]}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"logging"}),"Logging",(0,a.jsx)(s.a,{href:"#logging","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(s.p,{children:["Logging API is available since the release of webpack 4.37. When ",(0,a.jsx)(s.code,{children:"logging"})," is enabled in ",(0,a.jsx)(s.a,{href:"/configuration/stats/#statslogging",children:(0,a.jsx)(s.code,{children:"stats configuration"})})," and/or when ",(0,a.jsx)(s.a,{href:"/configuration/infrastructureLogging",children:(0,a.jsx)(s.code,{children:"infrastructure logging"})})," is enabled, plugins may log messages which will be printed out in the respective logger format (stats, infrastructure)."]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Plugins should prefer to use ",(0,a.jsx)(s.code,{children:"compilation.getLogger('PluginName')"})," for logging. This kind of logging is stored in the Stats and formatted accordingly. It can be filtered and exported by the user."]}),"\n",(0,a.jsxs)(s.li,{children:["Plugins may use the ",(0,a.jsx)(s.code,{children:"compiler.getInfrastructureLogger('PluginName')"})," for logging. Using ",(0,a.jsx)(s.code,{children:"infrastructure"})," logging is not stored in the Stats and therefore not formatted. It's usually logged to the console/dashboard/GUI directly. It can be filtered by the user."]}),"\n",(0,a.jsxs)(s.li,{children:["Plugins may use specific fallback logic for detecting logging support ",(0,a.jsx)(s.code,{children:"compilation.getLogger ? compilation.getLogger('PluginName') : console"})," to provide a fallback for cases when an older webpack version is used which does not support ",(0,a.jsx)(s.code,{children:"getLogger"})," method on ",(0,a.jsx)(s.code,{children:"compilation"})," object."]}),"\n"]}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"next-steps"}),"Next Steps",(0,a.jsx)(s.a,{href:"#next-steps","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(s.p,{children:["See the ",(0,a.jsx)(s.a,{href:"/api/compiler-hooks/",children:"compiler hooks"})," section for a detailed listing of all the available\n",(0,a.jsx)(s.code,{children:"compiler"})," hooks and the parameters they make available."]})]})}function o(n={}){const{wrapper:s}={...(0,c.R)(),...n.components};return s?(0,a.jsx)(s,{...n,children:(0,a.jsx)(t,{...n})}):t(n)}}}]);