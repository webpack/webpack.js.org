"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[458],{458:function(e,n,s){s.r(n),s.d(n,{default:function(){return l}});var r=s(2540),a=s(9710);function c(e){const n={a:"a",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",ul:"ul",...(0,a.R)(),...e.components},{Badge:s}=n;return s||function(){throw new Error("Expected component `Badge` to be defined: you likely forgot to import, pass, or provide it.")}(),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"NormalModuleFactory"})," module is used by the ",(0,r.jsx)(n.code,{children:"Compiler"})," to generate modules. Starting with entry points, it resolves each request, parses the content to find further requests, and keeps crawling through files by resolving all and parsing any new files. At last stage, each dependency becomes a Module instance."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"NormalModuleFactory"})," class extends ",(0,r.jsx)(n.code,{children:"Tapable"})," and provides the following\nlifecycle hooks. They can be tapped the same way as compiler hooks:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsxs)(n.code,{className:"hljs language-js",children:[(0,r.jsx)(n.span,{className:"token keyword",children:"const"})," nmf ",(0,r.jsx)(n.span,{className:"token operator",children:"="})," NormalModuleFactory",(0,r.jsx)(n.span,{className:"token punctuation",children:"."}),"hooks",(0,r.jsx)(n.span,{className:"token punctuation",children:";"}),"\nnmf",(0,r.jsx)(n.span,{className:"token punctuation",children:"."}),"someHook",(0,r.jsx)(n.span,{className:"token punctuation",children:"."}),(0,r.jsx)(n.span,{className:"token function",children:"tap"}),(0,r.jsx)(n.span,{className:"token punctuation",children:"("}),(0,r.jsx)(n.span,{className:"token string",children:'"MyPlugin"'}),(0,r.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,r.jsx)(n.span,{className:"token punctuation",children:"("}),(0,r.jsx)(n.span,{className:"token parameter",children:"resolveData"}),(0,r.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,r.jsx)(n.span,{className:"token operator",children:"=>"})," ",(0,r.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n  ",(0,r.jsx)(n.span,{className:"token comment",children:"// ..."}),"\n",(0,r.jsx)(n.span,{className:"token punctuation",children:"}"}),(0,r.jsx)(n.span,{className:"token punctuation",children:")"}),(0,r.jsx)(n.span,{className:"token punctuation",children:";"})]})}),"\n",(0,r.jsxs)(n.p,{children:["NormalModuleFactory creates ",(0,r.jsx)(n.code,{children:"Parser"})," and ",(0,r.jsx)(n.code,{children:"Generator"})," instances which can be accessed by HookMaps. Identifier must be passed to tap into these:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsxs)(n.code,{className:"hljs language-js",children:["NormalModuleFactory",(0,r.jsx)(n.span,{className:"token punctuation",children:"."}),"hooks",(0,r.jsx)(n.span,{className:"token punctuation",children:"."}),"parser\n  ",(0,r.jsx)(n.span,{className:"token punctuation",children:"."}),(0,r.jsx)(n.span,{className:"token function",children:"for"}),(0,r.jsx)(n.span,{className:"token punctuation",children:"("}),(0,r.jsx)(n.span,{className:"token string",children:'"javascript/esm"'}),(0,r.jsx)(n.span,{className:"token punctuation",children:")"}),"\n  ",(0,r.jsx)(n.span,{className:"token punctuation",children:"."}),(0,r.jsx)(n.span,{className:"token function",children:"tap"}),(0,r.jsx)(n.span,{className:"token punctuation",children:"("}),(0,r.jsx)(n.span,{className:"token string",children:'"MyPlugin"'}),(0,r.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,r.jsx)(n.span,{className:"token punctuation",children:"("}),(0,r.jsxs)(n.span,{className:"token parameter",children:["parser",(0,r.jsx)(n.span,{className:"token punctuation",children:","})," parserOptions"]}),(0,r.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,r.jsx)(n.span,{className:"token operator",children:"=>"})," ",(0,r.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n    ",(0,r.jsx)(n.span,{className:"token comment",children:"// ..."}),"\n  ",(0,r.jsx)(n.span,{className:"token punctuation",children:"}"}),(0,r.jsx)(n.span,{className:"token punctuation",children:")"}),(0,r.jsx)(n.span,{className:"token punctuation",children:";"})]})}),"\n",(0,r.jsxs)(n.p,{children:["As with the ",(0,r.jsx)(n.code,{children:"compiler"}),", ",(0,r.jsx)(n.code,{children:"tapAsync"})," and ",(0,r.jsx)(n.code,{children:"tapPromise"})," may also be available\ndepending on the type of hook."]}),"\n",(0,r.jsxs)(n.h3,{children:[(0,r.jsx)(n.span,{id:"beforeresolve"}),"beforeResolve",(0,r.jsx)(n.a,{href:"#beforeresolve","aria-hidden":"true",tabIndex:"-1",children:(0,r.jsx)(n.span,{className:"header-link"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"AsyncSeriesBailHook"})}),"\n",(0,r.jsxs)(n.p,{children:["Called when a new dependency request is encountered. A dependency can be ignored by returning ",(0,r.jsx)(n.code,{children:"false"}),". Otherwise, it should return ",(0,r.jsx)(n.code,{children:"undefined"})," to proceed."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Callback Parameters: ",(0,r.jsx)(n.code,{children:"resolveData"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{children:[(0,r.jsx)(n.span,{id:"factorize"}),"factorize",(0,r.jsx)(n.a,{href:"#factorize","aria-hidden":"true",tabIndex:"-1",children:(0,r.jsx)(n.span,{className:"header-link"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"AsyncSeriesBailHook"})}),"\n",(0,r.jsxs)(n.p,{children:["Called before initiating resolve. It should return ",(0,r.jsx)(n.code,{children:"undefined"})," to proceed."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Callback Parameters: ",(0,r.jsx)(n.code,{children:"resolveData"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{children:[(0,r.jsx)(n.span,{id:"resolve"}),"resolve",(0,r.jsx)(n.a,{href:"#resolve","aria-hidden":"true",tabIndex:"-1",children:(0,r.jsx)(n.span,{className:"header-link"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"AsyncSeriesBailHook"})}),"\n",(0,r.jsxs)(n.p,{children:["Called before the request is resolved. A dependency can be ignored by returning ",(0,r.jsx)(n.code,{children:"false"}),". Returning a Module instance would finalize the process. Otherwise, it should return ",(0,r.jsx)(n.code,{children:"undefined"})," to proceed."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Callback Parameters: ",(0,r.jsx)(n.code,{children:"resolveData"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{children:[(0,r.jsx)(n.span,{id:"resolveforscheme"}),"resolveForScheme",(0,r.jsx)(n.a,{href:"#resolveforscheme","aria-hidden":"true",tabIndex:"-1",children:(0,r.jsx)(n.span,{className:"header-link"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"AsyncSeriesBailHook"})}),"\n",(0,r.jsx)(n.p,{children:"Called before a request with scheme (URI) is resolved."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Callback Parameters: ",(0,r.jsx)(n.code,{children:"resolveData"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{children:[(0,r.jsx)(n.span,{id:"afterresolve"}),"afterResolve",(0,r.jsx)(n.a,{href:"#afterresolve","aria-hidden":"true",tabIndex:"-1",children:(0,r.jsx)(n.span,{className:"header-link"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"AsyncSeriesBailHook"})}),"\n",(0,r.jsx)(n.p,{children:"Called after the request is resolved."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Callback Parameters: ",(0,r.jsx)(n.code,{children:"resolveData"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{children:[(0,r.jsx)(n.span,{id:"createmodule"}),"createModule",(0,r.jsx)(n.a,{href:"#createmodule","aria-hidden":"true",tabIndex:"-1",children:(0,r.jsx)(n.span,{className:"header-link"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"AsyncSeriesBailHook"})}),"\n",(0,r.jsxs)(n.p,{children:["Called before a ",(0,r.jsx)(n.code,{children:"NormalModule"})," instance is created."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Callback Parameters: ",(0,r.jsx)(n.code,{children:"createData"})," ",(0,r.jsx)(n.code,{children:"resolveData"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{children:[(0,r.jsx)(n.span,{id:"createmoduleclass"}),"createModuleClass",(0,r.jsx)(n.a,{href:"#createmoduleclass","aria-hidden":"true",tabIndex:"-1",children:(0,r.jsx)(n.span,{className:"header-link"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"HookMap<SyncBailHook>"})}),"\n",(0,r.jsx)(s,{text:"5.81.0+"}),"\n",(0,r.jsxs)(n.p,{children:["A hook that allows you to override the ",(0,r.jsx)(n.code,{children:"NormalModule"})," class when creating modules. This hook is called after the ",(0,r.jsx)(n.a,{href:"#createmodule",children:(0,r.jsx)(n.code,{children:"createModule"})})," hook and before the ",(0,r.jsx)(n.a,{href:"#module",children:(0,r.jsx)(n.code,{children:"module"})})," hook."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Hook Parameters: ",(0,r.jsx)(n.code,{children:"identifier"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Callback Parameters: ",(0,r.jsx)(n.code,{children:"createData"})," ",(0,r.jsx)(n.code,{children:"resolveData"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{children:[(0,r.jsx)(n.span,{id:"module"}),"module",(0,r.jsx)(n.a,{href:"#module","aria-hidden":"true",tabIndex:"-1",children:(0,r.jsx)(n.span,{className:"header-link"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"SyncWaterfallHook"})}),"\n",(0,r.jsxs)(n.p,{children:["Called after a ",(0,r.jsx)(n.code,{children:"NormalModule"})," instance is created."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Callback Parameters: ",(0,r.jsx)(n.code,{children:"module"})," ",(0,r.jsx)(n.code,{children:"createData"})," ",(0,r.jsx)(n.code,{children:"resolveData"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{children:[(0,r.jsx)(n.span,{id:"createparser"}),"createParser",(0,r.jsx)(n.a,{href:"#createparser","aria-hidden":"true",tabIndex:"-1",children:(0,r.jsx)(n.span,{className:"header-link"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"HookMap<SyncBailHook>"})}),"\n",(0,r.jsxs)(n.p,{children:["Called before a ",(0,r.jsx)(n.code,{children:"Parser"})," instance is created. ",(0,r.jsx)(n.code,{children:"parserOptions"})," is options in ",(0,r.jsx)(n.a,{href:"/configuration/module/#moduleparser",children:"module.parser"})," for the corresponding identifier or an empty object."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Hook Parameters: ",(0,r.jsx)(n.code,{children:"identifier"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Callback Parameters: ",(0,r.jsx)(n.code,{children:"parserOptions"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{children:[(0,r.jsx)(n.span,{id:"parser"}),"parser",(0,r.jsx)(n.a,{href:"#parser","aria-hidden":"true",tabIndex:"-1",children:(0,r.jsx)(n.span,{className:"header-link"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"HookMap<SyncHook>"})}),"\n",(0,r.jsxs)(n.p,{children:["Fired after a ",(0,r.jsx)(n.code,{children:"Parser"})," instance is created."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Hook Parameters: ",(0,r.jsx)(n.code,{children:"identifier"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Callback Parameters: ",(0,r.jsx)(n.code,{children:"parser"})," ",(0,r.jsx)(n.code,{children:"parserOptions"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Possible default identifiers:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"javascript/auto"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"javascript/dynamic"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"javascript/esm"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"json"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"webassembly/sync"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"webassembly/async"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"asset"})}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{children:[(0,r.jsx)(n.span,{id:"creategenerator"}),"createGenerator",(0,r.jsx)(n.a,{href:"#creategenerator","aria-hidden":"true",tabIndex:"-1",children:(0,r.jsx)(n.span,{className:"header-link"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"HookMap<SyncBailHook>"})}),"\n",(0,r.jsxs)(n.p,{children:["Called before a ",(0,r.jsx)(n.code,{children:"Generator"})," instance is created. ",(0,r.jsx)(n.code,{children:"generatorOptions"})," is options in ",(0,r.jsx)(n.a,{href:"/configuration/module/#modulegenerator",children:"module.parser"})," for the corresponding identifier or an empty object."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Hook Parameters: ",(0,r.jsx)(n.code,{children:"identifier"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Callback Parameters: ",(0,r.jsx)(n.code,{children:"generatorOptions"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{children:[(0,r.jsx)(n.span,{id:"generator"}),"generator",(0,r.jsx)(n.a,{href:"#generator","aria-hidden":"true",tabIndex:"-1",children:(0,r.jsx)(n.span,{className:"header-link"})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"HookMap<SyncHook>"})}),"\n",(0,r.jsxs)(n.p,{children:["Called after a ",(0,r.jsx)(n.code,{children:"Generator"})," instance is created."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Hook Parameters: ",(0,r.jsx)(n.code,{children:"identifier"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Callback Parameters: ",(0,r.jsx)(n.code,{children:"generator"})," ",(0,r.jsx)(n.code,{children:"generatorOptions"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Possible default identifiers:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"json"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"webassembly/sync"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"webassembly/async"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"asset"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"asset/source"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"asset/resource"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"asset/inline"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"asset/bytes"})}),"\n"]})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);