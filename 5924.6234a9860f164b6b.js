"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5924],{5924:function(n,s,e){e.r(s),e.d(s,{default:function(){return l}});var a=e(2540),c=e(9710);function t(n){const s={a:"a",aside:"aside",code:"code",em:"em",h2:"h2",h3:"h3",h6:"h6",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,c.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.p,{children:"Aside from applications, webpack can also be used to bundle JavaScript libraries. The following guide is meant for library authors looking to streamline their bundling strategy."}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"authoring-a-library"}),"Authoring a Library",(0,a.jsx)(s.a,{href:"#authoring-a-library","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(s.p,{children:["Let's assume that we are writing a small library, ",(0,a.jsx)(s.code,{children:"webpack-numbers"}),", that allows users to convert the numbers 1 through 5 from their numeric representation to a textual one and vice-versa, e.g. 2 to 'two'."]}),"\n",(0,a.jsx)(s.p,{children:"The basic project structure would look like this:"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"project"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"hljs language-diff",children:(0,a.jsxs)(s.span,{className:"token inserted-sign inserted",children:[(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"  |- webpack.config.js\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"  |- package.json\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"  |- /src\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"    |- index.js\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"    |- ref.json"})]})})}),"\n",(0,a.jsxs)(s.p,{children:["Initialize the project with npm, then install ",(0,a.jsx)(s.code,{children:"webpack"}),", ",(0,a.jsx)(s.code,{children:"webpack-cli"})," and ",(0,a.jsx)(s.code,{children:"lodash"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-bash",children:[(0,a.jsx)(s.span,{className:"token function",children:"npm"})," init -y\n",(0,a.jsx)(s.span,{className:"token function",children:"npm"})," ",(0,a.jsx)(s.span,{className:"token function",children:"install"})," --save-dev webpack webpack-cli lodash"]})}),"\n",(0,a.jsxs)(s.p,{children:["We install ",(0,a.jsx)(s.code,{children:"lodash"})," as ",(0,a.jsx)(s.code,{children:"devDependencies"})," instead of ",(0,a.jsx)(s.code,{children:"dependencies"})," because we don't want to bundle it into our library, or our library could be easily bloated."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"src/ref.json"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-json",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"["}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token property",children:'"num"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token number",children:"1"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token property",children:'"word"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"One"'}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token property",children:'"num"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token number",children:"2"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token property",children:'"word"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"Two"'}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token property",children:'"num"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token number",children:"3"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token property",children:'"word"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"Three"'}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token property",children:'"num"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token number",children:"4"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token property",children:'"word"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"Four"'}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token property",children:'"num"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token number",children:"5"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token property",children:'"word"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"Five"'}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token property",children:'"num"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token number",children:"0"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token property",children:'"word"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"Zero"'}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"]"})]})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"src/index.js"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"import"})," _ ",(0,a.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"lodash"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(s.span,{className:"token keyword",children:"import"})," numRef ",(0,a.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"./ref.json"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\n",(0,a.jsx)(s.span,{className:"token keyword",children:"export"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"function"})," ",(0,a.jsx)(s.span,{className:"token function",children:"numToWord"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token parameter",children:"num"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token keyword",children:"return"})," _",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"reduce"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"\n    numRef",(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token parameter",children:["accum",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ref"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"ref",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"num ",(0,a.jsx)(s.span,{className:"token operator",children:"==="})," num ",(0,a.jsx)(s.span,{className:"token operator",children:"?"})," ref",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"word ",(0,a.jsx)(s.span,{className:"token operator",children:":"})," accum",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token string",children:'""'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n\n",(0,a.jsx)(s.span,{className:"token keyword",children:"export"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"function"})," ",(0,a.jsx)(s.span,{className:"token function",children:"wordToNum"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token parameter",children:"word"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token keyword",children:"return"})," _",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"reduce"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"\n    numRef",(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token parameter",children:["accum",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ref"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"ref",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"word ",(0,a.jsx)(s.span,{className:"token operator",children:"==="})," word ",(0,a.jsx)(s.span,{className:"token operator",children:"&&"})," word",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"toLowerCase"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"?"})," ref",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"num ",(0,a.jsx)(s.span,{className:"token operator",children:":"})," accum",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token operator",children:"-"}),(0,a.jsx)(s.span,{className:"token number",children:"1"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})]})}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"webpack-configuration"}),"Webpack Configuration",(0,a.jsx)(s.a,{href:"#webpack-configuration","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsx)(s.p,{children:"Let's start with this basic webpack configuration:"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"webpack.config.js"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"const"})," path ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token function",children:"require"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"node:path"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\nmodule",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"exports ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  entry",(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"./src/index.js"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  output",(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    path",(0,a.jsx)(s.span,{className:"token operator",children:":"})," path",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"resolve"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"__dirname",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token string",children:'"dist"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    filename",(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"webpack-numbers.js"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(s.p,{children:["In the above example, we're telling webpack to bundle ",(0,a.jsx)(s.code,{children:"src/index.js"})," into ",(0,a.jsx)(s.code,{children:"dist/webpack-numbers.js"}),"."]}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"expose-the-library"}),"Expose the Library",(0,a.jsx)(s.a,{href:"#expose-the-library","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(s.p,{children:["So far everything should be the same as bundling an application, and here comes the different part â€“ we need to expose exports from the entry point through ",(0,a.jsx)(s.a,{href:"/configuration/output/#outputlibrary",children:(0,a.jsx)(s.code,{children:"output.library"})})," option."]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"webpack.config.js"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-diff",children:[(0,a.jsxs)(s.span,{className:"token unchanged",children:[(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:" const path = require('path');\n"})]}),"\n",(0,a.jsxs)(s.span,{className:"token unchanged",children:[(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:" module.exports = {\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"   entry: './src/index.js',\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"   output: {\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"     path: path.resolve(__dirname, 'dist'),\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"     filename: 'webpack-numbers.js',\n"})]}),(0,a.jsxs)(s.span,{className:"token inserted-sign inserted",children:[(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:'     library: "webpackNumbers",\n'})]}),(0,a.jsxs)(s.span,{className:"token unchanged",children:[(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"   },\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:" };"})]})]})}),"\n",(0,a.jsxs)(s.p,{children:["We exposed the entry point as ",(0,a.jsx)(s.code,{children:"webpackNumbers"})," so users can use it through script tag:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-html",children:[(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"<"}),"script"]})," ",(0,a.jsx)(s.span,{className:"token attr-name",children:"src"}),(0,a.jsxs)(s.span,{className:"token attr-value",children:[(0,a.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(s.span,{className:"token punctuation",children:'"'}),"https://example.org/webpack-numbers.js",(0,a.jsx)(s.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(s.span,{className:"token script"}),(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"</"}),"script"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n",(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"<"}),"script"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(s.span,{className:"token script",children:(0,a.jsxs)(s.span,{className:"token language-javascript",children:["\n  window",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"webpackNumbers",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"wordToNum"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"Five"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})}),(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"</"}),"script"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:">"})]})]})}),"\n",(0,a.jsx)(s.p,{children:"However it only works when it's referenced through script tag, it can't be used in other environments like CommonJS, AMD, Node.js, etc."}),"\n",(0,a.jsx)(s.p,{children:"As a library author, we want it to be compatible in different environments, i.e., users should be able to consume the bundled library in multiple ways listed below:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"CommonJS module require"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"const"})," webpackNumbers ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token function",children:"require"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"webpack-numbers"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\n",(0,a.jsx)(s.span,{className:"token comment",children:"// ..."}),"\nwebpackNumbers",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"wordToNum"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"Two"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"AMD module require"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:[(0,a.jsx)(s.span,{className:"token function",children:"require"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"["}),(0,a.jsx)(s.span,{className:"token string",children:'"webpackNumbers"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token parameter",children:"webpackNumbers"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"// ..."}),"\n  webpackNumbers",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"wordToNum"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"Two"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"script tag"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-html",children:[(0,a.jsxs)(s.span,{className:"token doctype",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"<!"}),(0,a.jsx)(s.span,{className:"token doctype-tag",children:"DOCTYPE"})," ",(0,a.jsx)(s.span,{className:"token name",children:"html"}),(0,a.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n",(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"<"}),"html"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n  ...\n  ",(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"<"}),"script"]})," ",(0,a.jsx)(s.span,{className:"token attr-name",children:"src"}),(0,a.jsxs)(s.span,{className:"token attr-value",children:[(0,a.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(s.span,{className:"token punctuation",children:'"'}),"https://example.org/webpack-numbers.js",(0,a.jsx)(s.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(s.span,{className:"token script"}),(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"</"}),"script"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n  ",(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"<"}),"script"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(s.span,{className:"token script",children:(0,a.jsxs)(s.span,{className:"token language-javascript",children:["\n    ",(0,a.jsx)(s.span,{className:"token comment",children:"// ..."}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:"// Global variable"}),"\n    webpackNumbers",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"wordToNum"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"Five"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:"// Property in the window object"}),"\n    window",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"webpackNumbers",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"wordToNum"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"Five"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:"// ..."}),"\n  "]})}),(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"</"}),"script"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n",(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsxs)(s.span,{className:"token tag",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"</"}),"html"]}),(0,a.jsx)(s.span,{className:"token punctuation",children:">"})]})]})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["Let's update the ",(0,a.jsx)(s.code,{children:"output.library"})," option with its ",(0,a.jsx)(s.code,{children:"type"})," set to ",(0,a.jsx)(s.a,{href:"/configuration/output/#type-umd",children:(0,a.jsx)(s.code,{children:"'umd'"})}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-diff",children:[(0,a.jsxs)(s.span,{className:"token unchanged",children:[(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"const path = require('path');\n"})]}),"\n",(0,a.jsxs)(s.span,{className:"token unchanged",children:[(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"module.exports = {\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"  entry: './src/index.js',\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"  output: {\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"    path: path.resolve(__dirname, 'dist'),\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"    filename: 'webpack-numbers.js',\n"})]}),(0,a.jsxs)(s.span,{className:"token deleted-sign deleted",children:[(0,a.jsx)(s.span,{className:"token prefix deleted",children:"-"}),(0,a.jsx)(s.span,{className:"token line",children:"    library: 'webpackNumbers',\n"})]}),(0,a.jsxs)(s.span,{className:"token inserted-sign inserted",children:[(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"    globalObject: 'this',\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"    library: {\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"      name: 'webpackNumbers',\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"      type: 'umd',\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"    },\n"})]}),(0,a.jsxs)(s.span,{className:"token unchanged",children:[(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"  },\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"};"})]})]})}),"\n",(0,a.jsx)(s.p,{children:"Now webpack will bundle a library that can work with CommonJS, AMD, and script tag."}),"\n",(0,a.jsxs)(s.aside,{className:"tip",children:[(0,a.jsx)(s.h6,{className:"tip__prefix",children:"tip"}),(0,a.jsxs)(s.p,{children:["Note that the ",(0,a.jsx)(s.code,{children:"library"})," setup is tied to the ",(0,a.jsx)(s.code,{children:"entry"})," configuration. For most libraries, specifying a single entry point is sufficient. While ",(0,a.jsx)(s.a,{href:"https://github.com/webpack/webpack/tree/master/examples/multi-part-library",children:"multi-part libraries"})," are possible, it is more straightforward to expose partial exports through an ",(0,a.jsx)(s.a,{href:"https://stackoverflow.com/questions/34072598/es6-exporting-importing-in-index-file",children:"index script"})," that serves as a single entry point. Using an ",(0,a.jsx)(s.code,{children:"array"})," as an ",(0,a.jsx)(s.code,{children:"entry"})," point for a library is ",(0,a.jsx)(s.strong,{children:"not recommended"}),"."]})]}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"externalize-lodash"}),"Externalize Lodash",(0,a.jsx)(s.a,{href:"#externalize-lodash","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(s.p,{children:["Now, if you run ",(0,a.jsx)(s.code,{children:"npx webpack"}),", you will find that a largish bundle is created. If you inspect the file, you'll see that lodash has been bundled along with your code. In this case, we'd prefer to treat ",(0,a.jsx)(s.code,{children:"lodash"})," as a ",(0,a.jsx)(s.em,{children:"peer dependency"}),". Meaning that the consumer should already have ",(0,a.jsx)(s.code,{children:"lodash"})," installed. Hence you would want to give up control of this external library to the consumer of your library."]}),"\n",(0,a.jsxs)(s.p,{children:["This can be done using the ",(0,a.jsx)(s.a,{href:"/configuration/externals/",children:(0,a.jsx)(s.code,{children:"externals"})})," configuration:"]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"webpack.config.js"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-diff",children:[(0,a.jsxs)(s.span,{className:"token unchanged",children:[(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:" const path = require('path');\n"})]}),"\n",(0,a.jsxs)(s.span,{className:"token unchanged",children:[(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:" module.exports = {\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"   entry: './src/index.js',\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"   output: {\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"     path: path.resolve(__dirname, 'dist'),\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"     filename: 'webpack-numbers.js',\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"     library: {\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:'       name: "webpackNumbers",\n'}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:'       type: "umd"\n'}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"     },\n"}),(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:"   },\n"})]}),(0,a.jsxs)(s.span,{className:"token inserted-sign inserted",children:[(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"   externals: {\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"     lodash: {\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"       commonjs: 'lodash',\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"       commonjs2: 'lodash',\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"       amd: 'lodash',\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"       root: '_',\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"     },\n"}),(0,a.jsx)(s.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(s.span,{className:"token line",children:"   },\n"})]}),(0,a.jsxs)(s.span,{className:"token unchanged",children:[(0,a.jsx)(s.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(s.span,{className:"token line",children:" };"})]})]})}),"\n",(0,a.jsxs)(s.p,{children:["This means that your library expects a dependency named ",(0,a.jsx)(s.code,{children:"lodash"})," to be available in the consumer's environment."]}),"\n",(0,a.jsxs)(s.h3,{children:[(0,a.jsx)(s.span,{id:"external-limitations"}),"External Limitations",(0,a.jsx)(s.a,{href:"#external-limitations","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsx)(s.p,{children:"For libraries that use several files from a dependency:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,a.jsx)(s.span,{className:"token constant",children:"A"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"library/one"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,a.jsx)(s.span,{className:"token constant",children:"B"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"library/two"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\n",(0,a.jsx)(s.span,{className:"token comment",children:"// ..."})]})}),"\n",(0,a.jsxs)(s.p,{children:["You won't be able to exclude them from the bundle by specifying ",(0,a.jsx)(s.code,{children:"library"})," in the externals. You'll either need to exclude them one by one or by using a regular expression."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-js",children:["module",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"exports ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"// ..."}),"\n  externals",(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"["}),"\n    ",(0,a.jsx)(s.span,{className:"token string",children:'"library/one"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token string",children:'"library/two"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:'// Everything that starts with "library/"'}),"\n    ",(0,a.jsx)(s.span,{className:"token operator",children:"/"}),(0,a.jsx)(s.span,{className:"token operator",children:"^"}),"library\\",(0,a.jsx)(s.span,{className:"token regex",children:"/.+$/"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(s.h2,{children:[(0,a.jsx)(s.span,{id:"final-steps"}),"Final Steps",(0,a.jsx)(s.a,{href:"#final-steps","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(s.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(s.p,{children:["Optimize your output for production by following the steps mentioned in the ",(0,a.jsx)(s.a,{href:"/guides/production",children:"production guide"}),". Let's also add the path to your generated bundle as the package's ",(0,a.jsx)(s.code,{children:"main"})," field in with the ",(0,a.jsx)(s.code,{children:"package.json"})]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"package.json"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-json",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ...\n  ",(0,a.jsx)(s.span,{className:"token property",children:'"main"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"dist/webpack-numbers.js"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ...\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})]})}),"\n",(0,a.jsxs)(s.p,{children:["Or, to add it as a standard module as per ",(0,a.jsx)(s.a,{href:"https://github.com/dherman/defense-of-dot-js/blob/master/proposal.md#typical-usage",children:"this guide"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:"hljs language-json",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ...\n  ",(0,a.jsx)(s.span,{className:"token property",children:'"module"'}),(0,a.jsx)(s.span,{className:"token operator",children:":"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"src/index.js"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n  ...\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"})]})}),"\n",(0,a.jsxs)(s.p,{children:["The key ",(0,a.jsx)(s.code,{children:"main"})," refers to the ",(0,a.jsxs)(s.a,{href:"https://docs.npmjs.com/files/package.json#main",children:["standard from ",(0,a.jsx)(s.code,{children:"package.json"})]}),", and ",(0,a.jsx)(s.code,{children:"module"})," to ",(0,a.jsx)(s.a,{href:"https://github.com/dherman/defense-of-dot-js/blob/master/proposal.md",children:"a"})," ",(0,a.jsx)(s.a,{href:"https://github.com/rollup/rollup/wiki/pkg.module",children:"proposal"})," to allow the JavaScript ecosystem upgrade to use ES2015 modules without breaking backwards compatibility."]}),"\n",(0,a.jsxs)(s.aside,{className:"warning",children:[(0,a.jsx)(s.h6,{className:"warning__prefix",children:"warning"}),(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"module"})," property should point to a script that utilizes ES2015 module syntax but no other syntax features that aren't yet supported by browsers or node. This enables webpack to parse the module syntax itself, allowing for lighter bundles via ",(0,a.jsx)(s.a,{href:"https://webpack.js.org/guides/tree-shaking/",children:"tree shaking"})," if users are only consuming certain parts of the library."]})]}),"\n",(0,a.jsxs)(s.p,{children:["Now you can ",(0,a.jsx)(s.a,{href:"https://docs.npmjs.com/getting-started/publishing-npm-packages",children:"publish it as an npm package"})," and find it at ",(0,a.jsx)(s.a,{href:"https://unpkg.com/#/",children:"unpkg.com"})," to distribute it to your users."]}),"\n",(0,a.jsxs)(s.aside,{className:"tip",children:[(0,a.jsx)(s.h6,{className:"tip__prefix",children:"tip"}),(0,a.jsxs)(s.p,{children:["To expose stylesheets associated with your library, the ",(0,a.jsx)(s.a,{href:"/plugins/mini-css-extract-plugin",children:(0,a.jsx)(s.code,{children:"MiniCssExtractPlugin"})})," should be used. Users can then consume and load these as they would any other stylesheet."]})]})]})}function l(n={}){const{wrapper:s}={...(0,c.R)(),...n.components};return s?(0,a.jsx)(s,{...n,children:(0,a.jsx)(t,{...n})}):t(n)}}}]);