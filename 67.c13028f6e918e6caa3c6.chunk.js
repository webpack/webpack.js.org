(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{361:function(n,s,e){"use strict";e.r(s),s.default='<p>Asset Modules is a type of module that allows to use asset files (fonts, icons, etc) without configuring additional loaders.</p>\n<p>Prior to webpack 5 it was common to use:</p>\n<ul>\n<li><a href="/loaders/raw-loader/"><code>raw-loader</code></a> to import a file as a string</li>\n<li><a href="/loaders/url-loader/"><code>url-loader</code></a> to inline a file into the bundle as a data URI</li>\n<li><a href="/loaders/file-loader/"><code>file-loader</code></a> to emit a file into the output directory</li>\n</ul>\n<p>Asset Modules type replaces all of these loaders by adding 4 new module types:</p>\n<ul>\n<li><code>asset/resource</code> emits a separate file and exports the URL. Previously achievable by using <code>file-loader</code>.</li>\n<li><code>asset/inline</code> exports a data URI of the asset. Previously achievable by using <code>url-loader</code>.</li>\n<li><code>asset/source</code> exports the source code of the asset. Previously achievable by using <code>raw-loader</code>.</li>\n<li><code>asset</code> automatically chooses between exporting a data URI and emitting a separate file. Previously achievable by using <code>url-loader</code> with asset size limit.</li>\n</ul>\n<h2 id="resource-assets">Resource assets<a href="#resource-assets" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-diff">const path = require(\'path\');\n\nmodule.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: \'./src/index.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line"> output: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   filename: \'main.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, \'dist\')\n</span><span class="token prefix unchanged"> </span><span class="token line"> },\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> module: {\n</span><span class="token prefix inserted">+</span><span class="token line">   rules: [\n</span><span class="token prefix inserted">+</span><span class="token line">     {\n</span><span class="token prefix inserted">+</span><span class="token line">       test: /\\.png/,\n</span><span class="token prefix inserted">+</span><span class="token line">       type: \'asset/resource\'\n</span><span class="token prefix inserted">+</span><span class="token line">     }\n</span><span class="token prefix inserted">+</span><span class="token line">   ]\n</span><span class="token prefix inserted">+</span><span class="token line"> },\n</span></span>};</code></pre>\n<p><strong>src/index.js</strong></p>\n<pre><code class="hljs language-js"><span class="token keyword">import</span> mainImage <span class="token keyword">from</span> <span class="token string">\'./images/main.png\'</span><span class="token punctuation">;</span>\n\nimg<span class="token punctuation">.</span>src <span class="token operator">=</span> mainImage<span class="token punctuation">;</span> <span class="token comment">// \'/dist/151cfcfa1bd74779aadb.png\'</span></code></pre>\n<p>All <code>.png</code> files will be emitted to the output directory and their paths will be injected into the bundles.</p>\n<h3 id="custom-output-filename">Custom output filename<a href="#custom-output-filename" aria-hidden="true"><span class="icon icon-link"></span></a></h3>\n<p>By default, <code>asset/resource</code> modules are emitting with <code>[hash][ext][query]</code> filename into output directory. You can also use <code>[contenthash]</code> and <code>[modulehash]</code>, otherwise it defaults to <code>[hash]</code>.</p>\n<p>You can modify this template by setting <a href="/configuration/output/#outputassetmodulefilename"><code>output.assetModuleFilename</code></a> in your webpack configuration:</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-diff">const path = require(\'path\');\n\nmodule.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: \'./src/index.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line"> output: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   filename: \'main.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, \'dist\'),\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   assetModuleFilename: \'images/[hash][ext][query]\'\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },\n</span><span class="token prefix unchanged"> </span><span class="token line"> module: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [\n</span><span class="token prefix unchanged"> </span><span class="token line">     {\n</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\\.png/,\n</span><span class="token prefix unchanged"> </span><span class="token line">       type: \'asset/resource\'\n</span><span class="token prefix unchanged"> </span><span class="token line">     }\n</span><span class="token prefix unchanged"> </span><span class="token line">   ]\n</span><span class="token prefix unchanged"> </span><span class="token line"> },\n</span></span>};</code></pre>\n<p>Another case to customize output filename is to emit some kind of assets to a specified directory:</p>\n<pre><code class="hljs language-diff">const path = require(\'path\');\n\nmodule.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: \'./src/index.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line"> output: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   filename: \'main.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, \'dist\'),\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   assetModuleFilename: \'images/[hash][ext][query]\'\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },\n</span><span class="token prefix unchanged"> </span><span class="token line"> module: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [\n</span><span class="token prefix unchanged"> </span><span class="token line">     {\n</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\\.png/,\n</span><span class="token prefix unchanged"> </span><span class="token line">       type: \'asset/resource\'\n</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     }\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     },\n</span><span class="token prefix inserted">+</span><span class="token line">     {\n</span><span class="token prefix inserted">+</span><span class="token line">       test: /\\.html/,\n</span><span class="token prefix inserted">+</span><span class="token line">       type: \'asset/resource\',\n</span><span class="token prefix inserted">+</span><span class="token line">       generator: {\n</span><span class="token prefix inserted">+</span><span class="token line">         filename: \'static/[hash][ext][query]\'\n</span><span class="token prefix inserted">+</span><span class="token line">       }\n</span><span class="token prefix inserted">+</span><span class="token line">     }\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ]\n</span><span class="token prefix unchanged"> </span><span class="token line"> },\n</span></span>};</code></pre>\n<p>With this configuration all the <code>html</code> files will be emitted into a <code>static</code> directory within the output directory.</p>\n<p><code>Rule.generator.filename</code> is the same as <a href="/configuration/output/#outputassetmodulefilename"><code>output.assetModuleFilename</code></a> and works only with <code>asset</code> and <code>asset/resource</code> module types.</p>\n<h2 id="inlining-assets">Inlining assets<a href="#inlining-assets" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-diff">const path = require(\'path\');\n\nmodule.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: \'./src/index.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line"> output: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   filename: \'main.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, \'dist\'),\n</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   assetModuleFilename: \'images/[hash][ext][query]\'\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },\n</span><span class="token prefix unchanged"> </span><span class="token line"> module: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [\n</span><span class="token prefix unchanged"> </span><span class="token line">     {\n</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       test: /\\.png/,\n</span><span class="token prefix deleted">-</span><span class="token line">       type: \'asset/resource\'\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       test: /\\.svg/,\n</span><span class="token prefix inserted">+</span><span class="token line">       type: \'asset/inline\'\n</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     },\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     }\n</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     {\n</span><span class="token prefix deleted">-</span><span class="token line">       test: /\\.html/,\n</span><span class="token prefix deleted">-</span><span class="token line">       type: \'asset/resource\',\n</span><span class="token prefix deleted">-</span><span class="token line">       generator: {\n</span><span class="token prefix deleted">-</span><span class="token line">         filename: \'static/[hash][ext][query]\'\n</span><span class="token prefix deleted">-</span><span class="token line">       }\n</span><span class="token prefix deleted">-</span><span class="token line">     }\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ]\n</span><span class="token prefix unchanged"> </span><span class="token line"> }\n</span></span>};</code></pre>\n<p><strong>src/index.js</strong></p>\n<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import mainImage from \'./images/main.png\';\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import metroMap from \'./images/matro.svg\';\n</span></span>\n<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> img.src = mainImage; // \'/dist/151cfcfa1bd74779aadb.png\'\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> block.style.background = `url(${metroMap})`; // url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDo...vc3ZnPgo=)</span></span></code></pre>\n<p>All <code>.svg</code> files will be injected into the bundles as data URI.</p>\n<h3 id="custom-data-uri-generator">Custom data URI generator<a href="#custom-data-uri-generator" aria-hidden="true"><span class="icon icon-link"></span></a></h3>\n<p>By default, data URI emitted by webpack represents file contents encoded by using Base64 algorithm.</p>\n<p>If you want to use a custom encoding algorithm, you may specify a custom function to encode a file content:</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-diff">const path = require(\'path\');\n<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const svgToMiniDataURI = require(\'mini-svg-data-uri\');\n</span></span>\nmodule.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: \'./src/index.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line"> output: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   filename: \'main.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, \'dist\')\n</span><span class="token prefix unchanged"> </span><span class="token line"> },\n</span><span class="token prefix unchanged"> </span><span class="token line"> module: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [\n</span><span class="token prefix unchanged"> </span><span class="token line">     {\n</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\\.svg/,\n</span><span class="token prefix unchanged"> </span><span class="token line">       type: \'asset/inline\',\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       generator: {\n</span><span class="token prefix inserted">+</span><span class="token line">         dataUrl: content => {\n</span><span class="token prefix inserted">+</span><span class="token line">           content = content.toString();\n</span><span class="token prefix inserted">+</span><span class="token line">           return svgToMiniDataURI(content);\n</span><span class="token prefix inserted">+</span><span class="token line">         }\n</span><span class="token prefix inserted">+</span><span class="token line">       }\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }\n</span><span class="token prefix unchanged"> </span><span class="token line">   ]\n</span><span class="token prefix unchanged"> </span><span class="token line"> },\n</span></span>};</code></pre>\n<p>Now all <code>.svg</code> files will be encoded by <code>mini-svg-data-uri</code> package.</p>\n<h2 id="source-assets">Source assets<a href="#source-assets" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-diff">const path = require(\'path\');\n<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> const svgToMiniDataURI = require(\'mini-svg-data-uri\');\n</span></span>\nmodule.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: \'./src/index.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line"> output: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   filename: \'main.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, \'dist\')\n</span><span class="token prefix unchanged"> </span><span class="token line"> },\n</span><span class="token prefix unchanged"> </span><span class="token line"> module: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [\n</span><span class="token prefix unchanged"> </span><span class="token line">     {\n</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       test: /\\.svg/,\n</span><span class="token prefix deleted">-</span><span class="token line">       type: \'asset/inline\',\n</span><span class="token prefix deleted">-</span><span class="token line">       generator: {\n</span><span class="token prefix deleted">-</span><span class="token line">         dataUrl: content => {\n</span><span class="token prefix deleted">-</span><span class="token line">           content = content.toString();\n</span><span class="token prefix deleted">-</span><span class="token line">           return svgToMiniDataURI(content);\n</span><span class="token prefix deleted">-</span><span class="token line">         }\n</span><span class="token prefix deleted">-</span><span class="token line">       }\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       test: /\\.txt/,\n</span><span class="token prefix inserted">+</span><span class="token line">       type: \'asset/source\',\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }\n</span><span class="token prefix unchanged"> </span><span class="token line">   ]\n</span><span class="token prefix unchanged"> </span><span class="token line"> },\n</span></span>};</code></pre>\n<p><strong>src/example.txt</strong></p>\n<pre><code class="hljs language-text">Hello world\n</code></pre>\n<p><strong>src/index.js</strong></p>\n<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import metroMap from \'./images/matro.svg\';\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import exampleText from \'./example.txt\';\n</span></span>\n<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> block.style.background = `url(${metroMap}); // url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDo...vc3ZnPgo=)\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> block.textContent = exampleText; // \'Hello world\'</span></span></code></pre>\n<p>All <code>.txt</code> files will be injected into the bundles as is.</p>\n<h2 id="url-assets">URL assets<a href="#url-assets" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p>When using <code>new URL(\'./path/to/asset\', import.meta.url)</code>, webpack creates an asset module too.</p>\n<p><strong>src/index.js</strong></p>\n<pre><code class="hljs language-js"><span class="token keyword">const</span> logo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">\'./logo.svg\'</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<p>Depending on the <a href="/configuration/target/"><code>target</code></a> in your configuration, webpack would compile the above code into a different result:</p>\n<pre><code class="hljs language-js"><span class="token comment">// target: web</span>\n<span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>__webpack_public_path__ <span class="token operator">+</span> <span class="token string">\'logo.svg\'</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>baseURI <span class="token operator">||</span> self<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// target: webworker</span>\n<span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>__webpack_public_path__ <span class="token operator">+</span> <span class="token string">\'logo.svg\'</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// target: node, node-webkit, nwjs, electron-main, electron-renderer, electron-preload, async-node</span>\n<span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>__webpack_public_path__ <span class="token operator">+</span> <span class="token string">\'logo.svg\'</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'url\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pathToFileUrl</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n<h2 id="general-asset-type">General asset type<a href="#general-asset-type" aria-hidden="true"><span class="icon icon-link"></span></a></h2>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-diff">const path = require(\'path\');\n\nmodule.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: \'./src/index.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line"> output: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   filename: \'main.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, \'dist\')\n</span><span class="token prefix unchanged"> </span><span class="token line"> },\n</span><span class="token prefix unchanged"> </span><span class="token line"> module: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [\n</span><span class="token prefix unchanged"> </span><span class="token line">     {\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       test: /\\.txt/,\n</span><span class="token prefix inserted">+</span><span class="token line">       type: \'asset\',\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }\n</span><span class="token prefix unchanged"> </span><span class="token line">   ]\n</span><span class="token prefix unchanged"> </span><span class="token line"> },\n</span></span>};</code></pre>\n<p>Now webpack will automatically choose between <code>resource</code> and <code>inline</code> by following a default condition: a file with size less than 8kb will be treated as a <code>inline</code> module type and <code>resource</code> module type otherwise.</p>\n<p>You can change this condition by setting a <a href="/configuration/module/#ruleparserdataurlcondition"><code>Rule.parser.dataUrlCondition.maxSize</code></a> option on the module rule level of your webpack configuration:</p>\n<p><strong>webpack.config.js</strong></p>\n<pre><code class="hljs language-diff">const path = require(\'path\');\n\nmodule.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: \'./src/index.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line"> output: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   filename: \'main.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, \'dist\')\n</span><span class="token prefix unchanged"> </span><span class="token line"> },\n</span><span class="token prefix unchanged"> </span><span class="token line"> module: {\n</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [\n</span><span class="token prefix unchanged"> </span><span class="token line">     {\n</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\\.txt/,\n</span><span class="token prefix unchanged"> </span><span class="token line">       type: \'asset\',\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       parser: {\n</span><span class="token prefix inserted">+</span><span class="token line">         dataUrlCondition: {\n</span><span class="token prefix inserted">+</span><span class="token line">           maxSize: 4 * 1024 // 4kb\n</span><span class="token prefix inserted">+</span><span class="token line">         }\n</span><span class="token prefix inserted">+</span><span class="token line">       }\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }\n</span><span class="token prefix unchanged"> </span><span class="token line">   ]\n</span><span class="token prefix unchanged"> </span><span class="token line"> },\n</span></span>};</code></pre>\n<p>Also you can <a href="/configuration/module/#ruleparserdataurlcondition">specify a function</a> to decide to inlining a module or not.</p>\n'}}]);