"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8321],{8321:function(e,a,t){t.r(a),t(7378);var n=t(2682);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},o.apply(this,arguments)}function s(e){let{components:a,...t}=e;return(0,n.kt)("wrapper",o({components:a},t),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"This README is for babel-loader v8/v9 with Babel v7\nIf you are using legacy Babel v6, see the ",(0,n.kt)("a",{href:"https://github.com/babel/babel-loader/tree/7.x",parentName:"p"},"7.x branch")," docs")),(0,n.kt)("p",null,(0,n.kt)("a",{href:"https://www.npmjs.com/package/babel-loader",parentName:"p"},(0,n.kt)("img",{src:"https://img.shields.io/npm/v/babel-loader.svg?style=flat",alt:"NPM Status",parentName:"a"})),"\n",(0,n.kt)("a",{href:"https://codecov.io/gh/babel/babel-loader",parentName:"p"},(0,n.kt)("img",{src:"https://codecov.io/gh/babel/babel-loader/branch/main/graph/badge.svg",alt:"codecov",parentName:"a"}))),(0,n.kt)("div",{align:"center"}),(0,n.kt)("p",null,"This package allows transpiling JavaScript files using ",(0,n.kt)("a",{href:"https://github.com/babel/babel",parentName:"p"},"Babel")," and ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack",parentName:"p"},"webpack"),"."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Note"),": Issues with the output should be reported on the Babel ",(0,n.kt)("a",{href:"https://github.com/babel/babel/issues",parentName:"p"},"Issues")," tracker."),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"install",parentName:"h2"}),"Install",(0,n.kt)("a",{href:"#install","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("blockquote",null,(0,n.kt)("table",{parentName:"blockquote"},(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{align:"center",parentName:"tr"},"babel-loader"),(0,n.kt)("th",{align:"center",parentName:"tr"},"supported webpack versions"),(0,n.kt)("th",{align:"center",parentName:"tr"},"supported Babel versions"),(0,n.kt)("th",{align:"center",parentName:"tr"},"supported Node.js versions"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{align:"center","data-th":"babel-loader",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"8.x")),(0,n.kt)("td",{align:"center","data-th":"supported webpack versions",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"4.x or 5.x")),(0,n.kt)("td",{align:"center","data-th":"supported Babel versions",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"7.x")),(0,n.kt)("td",{align:"center","data-th":"supported Node.js versions",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},">= 8.9"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{align:"center","data-th":"babel-loader",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"9.x")),(0,n.kt)("td",{align:"center","data-th":"supported webpack versions",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"5.x")),(0,n.kt)("td",{align:"center","data-th":"supported Babel versions",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"^7.12.0")),(0,n.kt)("td",{align:"center","data-th":"supported Node.js versions",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},">= 14.15.0")))))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,n.kt)("span",{className:"token function",parentName:"code"},"npm")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"install")," -D babel-loader @babel/core @babel/preset-env webpack")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"usage",parentName:"h2"}),"Usage",(0,n.kt)("a",{href:"#usage","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"webpack documentation: ",(0,n.kt)("a",{href:"/loaders/",parentName:"p"},"Loaders")),(0,n.kt)("p",null,"Within your webpack configuration object, you'll need to add the babel-loader to the list of modules, like so:"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  rules",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      test",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/\\.(?:js|mjs|cjs)$/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      exclude",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/node_modules/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      use",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        loader",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'babel-loader'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        options",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n          presets",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n            ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'@babel/preset-env'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," targets",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"defaults"')," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n          ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n        ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"options",parentName:"h3"}),"Options",(0,n.kt)("a",{href:"#options","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"See the ",(0,n.kt)("inlineCode",{parentName:"p"},"babel")," ",(0,n.kt)("a",{href:"https://babeljs.io/docs/en/options",parentName:"p"},"options"),"."),(0,n.kt)("p",null,"You can pass options to the loader by using the ",(0,n.kt)("a",{href:"/configuration/module/#ruleoptions--rulequery",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"options"))," property:"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  rules",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      test",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/\\.(?:js|mjs|cjs)$/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      exclude",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/node_modules/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      use",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        loader",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'babel-loader'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        options",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n          presets",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n            ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'@babel/preset-env'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," targets",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"defaults"')," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n          ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n          plugins",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'@babel/plugin-proposal-class-properties'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n        ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("p",null,"This loader also supports the following loader-specific option:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"cacheDirectory"),": Default ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),". When set, the given directory will be used to cache the results of the loader. Future webpack builds will attempt to read from the cache to avoid needing to run the potentially expensive Babel recompilation process on each run. If the value is set to ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," in options (",(0,n.kt)("inlineCode",{parentName:"p"},"{cacheDirectory: true}"),"), the loader will use the default cache directory in ",(0,n.kt)("inlineCode",{parentName:"p"},"node_modules/.cache/babel-loader")," or fallback to the default OS temporary file directory if no ",(0,n.kt)("inlineCode",{parentName:"p"},"node_modules")," folder could be found in any root directory.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"cacheIdentifier"),": Default is a string composed by the ",(0,n.kt)("inlineCode",{parentName:"p"},"@babel/core"),"'s version, the ",(0,n.kt)("inlineCode",{parentName:"p"},"babel-loader"),"'s version, the contents of ",(0,n.kt)("inlineCode",{parentName:"p"},".babelrc")," file if it exists, and the value of the environment variable ",(0,n.kt)("inlineCode",{parentName:"p"},"BABEL_ENV")," with a fallback to the ",(0,n.kt)("inlineCode",{parentName:"p"},"NODE_ENV")," environment variable. This can be set to a custom value to force cache busting if the identifier changes.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"cacheCompression"),": Default ",(0,n.kt)("inlineCode",{parentName:"p"},"true"),". When set, each Babel transform output will be compressed with Gzip. If you want to opt-out of cache compression, set it to ",(0,n.kt)("inlineCode",{parentName:"p"},"false")," -- your project may benefit from this if it transpiles thousands of files.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"customize"),": Default ",(0,n.kt)("inlineCode",{parentName:"p"},"null"),". The path of a module that exports a ",(0,n.kt)("inlineCode",{parentName:"p"},"custom")," callback ",(0,n.kt)("a",{href:"#customized-loader",parentName:"p"},"like the one that you'd pass to ",(0,n.kt)("inlineCode",{parentName:"a"},".custom()")),". Since you already have to make a new file to use this, it is recommended that you instead use ",(0,n.kt)("inlineCode",{parentName:"p"},".custom")," to create a wrapper loader. Only use this if you ",(0,n.kt)("em",{parentName:"p"},"must")," continue using ",(0,n.kt)("inlineCode",{parentName:"p"},"babel-loader")," directly, but still want to customize.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"metadataSubscribers"),": Default ",(0,n.kt)("inlineCode",{parentName:"p"},"[]"),". Takes an array of context function names. E.g. if you passed ['myMetadataPlugin'], you'd assign a subscriber function to ",(0,n.kt)("inlineCode",{parentName:"p"},"context.myMetadataPlugin")," within your webpack plugin's hooks & that function will be called with ",(0,n.kt)("inlineCode",{parentName:"p"},"metadata"),"."))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"troubleshooting",parentName:"h2"}),"Troubleshooting",(0,n.kt)("a",{href:"#troubleshooting","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"babel-loader-is-slow",parentName:"h3"}),"babel-loader is slow!",(0,n.kt)("a",{href:"#babel-loader-is-slow","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Make sure you are transforming as few files as possible. Because you are probably matching ",(0,n.kt)("inlineCode",{parentName:"p"},"/\\.m?js$/"),", you might be transforming the ",(0,n.kt)("inlineCode",{parentName:"p"},"node_modules")," folder or other unwanted source."),(0,n.kt)("p",null,"To exclude ",(0,n.kt)("inlineCode",{parentName:"p"},"node_modules"),", see the ",(0,n.kt)("inlineCode",{parentName:"p"},"exclude")," option in the ",(0,n.kt)("inlineCode",{parentName:"p"},"loaders")," config as documented above."),(0,n.kt)("p",null,"You can also speed up babel-loader by as much as 2x by using the ",(0,n.kt)("inlineCode",{parentName:"p"},"cacheDirectory")," option. This will cache transformations to the filesystem."),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"some-files-in-my-node_modules-are-not-transpiled-for-ie-11",parentName:"h3"}),"Some files in my node_modules are not transpiled for IE 11",(0,n.kt)("a",{href:"#some-files-in-my-node_modules-are-not-transpiled-for-ie-11","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Although we typically recommend not compiling ",(0,n.kt)("inlineCode",{parentName:"p"},"node_modules"),", you may need to when using libraries that do not support IE 11 or any legacy targets."),(0,n.kt)("p",null,"For this, you can either use a combination of ",(0,n.kt)("inlineCode",{parentName:"p"},"test")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"not"),", or ",(0,n.kt)("a",{href:"/configuration/module/#condition",parentName:"p"},"pass a function")," to your ",(0,n.kt)("inlineCode",{parentName:"p"},"exclude")," option. You can also use negative lookahead regex as suggested ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/issues/2031#issuecomment-294706065",parentName:"p"},"here"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    test",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/\\.(?:js|mjs|cjs)$/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    exclude",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      and",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token regex",parentName:"code"},"/node_modules/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Exclude libraries in node_modules ..."),"\n      not",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n        ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Except for a few of them that needs to be transpiled because they use modern syntax"),"\n        ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"/"),"unfetch",(0,n.kt)("span",{className:"token operator",parentName:"code"},"/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/d3-array|d3-scale/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/@hapi[\\\\/]joi-date/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    use",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      loader",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'babel-loader'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      options",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        presets",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n          ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'@babel/preset-env'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," targets",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"ie 11"')," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n        ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"babel-is-injecting-helpers-into-each-file-and-bloating-my-code",parentName:"h3"}),"Babel is injecting helpers into each file and bloating my code!",(0,n.kt)("a",{href:"#babel-is-injecting-helpers-into-each-file-and-bloating-my-code","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Babel uses very small helpers for common functions such as ",(0,n.kt)("inlineCode",{parentName:"p"},"_extend"),". By default, this will be added to every file that requires it."),(0,n.kt)("p",null,"You can instead require the Babel runtime as a separate module to avoid the duplication."),(0,n.kt)("p",null,"The following configuration disables automatic per-file runtime injection in Babel, requiring ",(0,n.kt)("inlineCode",{parentName:"p"},"@babel/plugin-transform-runtime")," instead and making all helper references use it."),(0,n.kt)("p",null,"See the ",(0,n.kt)("a",{href:"https://babeljs.io/docs/plugins/transform-runtime/",parentName:"p"},"docs")," for more information."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"NOTE"),": You must run ",(0,n.kt)("inlineCode",{parentName:"p"},"npm install -D @babel/plugin-transform-runtime")," to include this in your project and ",(0,n.kt)("inlineCode",{parentName:"p"},"@babel/runtime")," itself as a dependency with ",(0,n.kt)("inlineCode",{parentName:"p"},"npm install @babel/runtime"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"rules",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// the 'transform-runtime' plugin tells Babel to"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// require the runtime instead of inlining it."),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    test",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/\\.(?:js|mjs|cjs)$/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    exclude",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/node_modules/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    use",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      loader",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'babel-loader'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      options",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        presets",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n          ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'@babel/preset-env'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," targets",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"defaults"')," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n        ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        plugins",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'@babel/plugin-transform-runtime'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"))),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"note-transform-runtime--custom-polyfills-eg-promise-library",parentName:"h4"}),(0,n.kt)("strong",{parentName:"h4"},"NOTE"),": transform-runtime & custom polyfills (e.g. Promise library)",(0,n.kt)("a",{href:"#note-transform-runtime--custom-polyfills-eg-promise-library","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Since ",(0,n.kt)("a",{href:"https://github.com/babel/babel/tree/main/packages/babel-plugin-transform-runtime",parentName:"p"},"@babel/plugin-transform-runtime")," includes a polyfill that includes a custom ",(0,n.kt)("a",{href:"https://github.com/facebook/regenerator/blob/master/packages/regenerator-runtime/runtime.js",parentName:"p"},"regenerator-runtime")," and ",(0,n.kt)("a",{href:"https://github.com/zloirock/core-js",parentName:"p"},"core-js"),", the following usual shimming method using ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack.ProvidePlugin")," will not work:"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n        ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"webpack",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"ProvidePlugin"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n            ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'Promise'"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'bluebird'"),"\n        ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."))),(0,n.kt)("p",null,"The following approach will not work either:"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'@babel/runtime/core-js/promise'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"default ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'bluebird'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," promise ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"Promise"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"which outputs to (using ",(0,n.kt)("inlineCode",{parentName:"p"},"runtime"),"):"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token string",parentName:"code"},"'use strict'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," _Promise ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'@babel/runtime/core-js/promise'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'default'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'@babel/runtime/core-js/promise'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'default'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'bluebird'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," promise ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"_Promise"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"The previous ",(0,n.kt)("inlineCode",{parentName:"p"},"Promise")," library is referenced and used before it is overridden."),(0,n.kt)("p",null,'One approach is to have a "bootstrap" step in your application that would first override the default globals before your application:'),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},"// bootstrap.js"),"\n\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'@babel/runtime/core-js/promise'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"default ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'bluebird'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'./app'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"the-nodejs-api-for-babel-has-been-moved-to-babel-core",parentName:"h3"}),"The Node.js API for ",(0,n.kt)("inlineCode",{parentName:"h3"},"babel")," has been moved to ",(0,n.kt)("inlineCode",{parentName:"h3"},"babel-core"),".",(0,n.kt)("a",{href:"#the-nodejs-api-for-babel-has-been-moved-to-babel-core","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"If you receive this message, it means that you have the npm package ",(0,n.kt)("inlineCode",{parentName:"p"},"babel")," installed and are using the short notation of the loader in the webpack config (which is not valid anymore as of webpack 2.x):"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    test",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/\\.(?:js|mjs|cjs)$/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    loader",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'babel'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("p",null,"webpack then tries to load the ",(0,n.kt)("inlineCode",{parentName:"p"},"babel")," package instead of the ",(0,n.kt)("inlineCode",{parentName:"p"},"babel-loader"),"."),(0,n.kt)("p",null,"To fix this, you should uninstall the npm package ",(0,n.kt)("inlineCode",{parentName:"p"},"babel"),", as it is deprecated in Babel v6. (Instead, install ",(0,n.kt)("inlineCode",{parentName:"p"},"@babel/cli")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"@babel/core"),".)\nIn the case one of your dependencies is installing ",(0,n.kt)("inlineCode",{parentName:"p"},"babel")," and you cannot uninstall it yourself, use the complete name of the loader in the webpack config:"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    test",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/\\.(?:js|mjs|cjs)$/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    loader",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'babel-loader'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"exclude-libraries-that-should-not-be-transpiled",parentName:"h3"}),"Exclude libraries that should not be transpiled",(0,n.kt)("a",{href:"#exclude-libraries-that-should-not-be-transpiled","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"core-js")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack/buildin")," will cause errors if they are transpiled by Babel."),(0,n.kt)("p",null,"You will need to exclude them form ",(0,n.kt)("inlineCode",{parentName:"p"},"babel-loader"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"loader"'),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"babel-loader"'),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"options"'),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"exclude"'),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// \\\\ for Windows, / for macOS and Linux"),"\n      ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"/"),"node_modules",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\\\\",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/]core-js/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/node_modules[\\\\/]webpack[\\\\/]buildin/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"presets"'),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n      ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"@babel/preset-env"'),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"top-level-function-iife-is-still-arrow-on-webpack-5",parentName:"h3"}),"Top level function (IIFE) is still arrow (on Webpack 5)",(0,n.kt)("a",{href:"#top-level-function-iife-is-still-arrow-on-webpack-5","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"That function is injected by Webpack itself ",(0,n.kt)("em",{parentName:"p"},"after")," running ",(0,n.kt)("inlineCode",{parentName:"p"},"babel-loader"),". By default Webpack asumes that your target environment supports some ES2015 features, but you can overwrite this behavior using the ",(0,n.kt)("inlineCode",{parentName:"p"},"output.environment")," Webpack option (",(0,n.kt)("a",{href:"/configuration/output/#outputenvironment",parentName:"p"},"documentation"),")."),(0,n.kt)("p",null,"To avoid the top-level arrow function, you can use ",(0,n.kt)("inlineCode",{parentName:"p"},"output.environment.arrowFunction"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},"// webpack.config.js"),"\nmodule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n    environment",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n      arrowFunction",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// <-- this line does the trick"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"customize-config-based-on-webpack-target",parentName:"h2"}),"Customize config based on webpack target",(0,n.kt)("a",{href:"#customize-config-based-on-webpack-target","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Webpack supports bundling multiple ",(0,n.kt)("a",{href:"/concepts/targets/",parentName:"p"},"targets"),". For cases where you may want different Babel configurations for each target (like ",(0,n.kt)("inlineCode",{parentName:"p"},"web")," ",(0,n.kt)("em",{parentName:"p"},"and")," ",(0,n.kt)("inlineCode",{parentName:"p"},"node"),"), this loader provides a ",(0,n.kt)("inlineCode",{parentName:"p"},"target")," property via Babel's ",(0,n.kt)("a",{href:"https://babeljs.io/docs/en/config-files#apicallercb",parentName:"p"},"caller")," API."),(0,n.kt)("p",null,"For example, to change the environment targets passed to ",(0,n.kt)("inlineCode",{parentName:"p"},"@babel/preset-env")," based on the webpack target:"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},"// babel.config.js"),"\n\nmodule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"exports")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token parameter",parentName:"code"},"api")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    plugins",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n      ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"@babel/plugin-proposal-nullish-coalescing-operator"'),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"@babel/plugin-proposal-optional-chaining"'),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    presets",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n        ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"@babel/preset-env"'),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n          useBuiltIns",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"entry"'),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n          ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// caller.target will be the same as the target option from webpack"),"\n          targets",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," api",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"caller"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"caller")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," caller ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," caller",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"target ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"node"'),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n            ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," node",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"current"')," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n            ",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," chrome",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"58"'),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ie",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"11"')," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n        ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"customized-loader",parentName:"h2"}),"Customized Loader",(0,n.kt)("a",{href:"#customized-loader","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"babel-loader")," exposes a loader-builder utility that allows users to add custom handling\nof Babel's configuration for each file that it processes."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},".custom")," accepts a callback that will be called with the loader's instance of\n",(0,n.kt)("inlineCode",{parentName:"p"},"babel")," so that tooling can ensure that it using exactly the same ",(0,n.kt)("inlineCode",{parentName:"p"},"@babel/core"),"\ninstance as the loader itself."),(0,n.kt)("p",null,"In cases where you want to customize without actually having a file to call ",(0,n.kt)("inlineCode",{parentName:"p"},".custom"),", you\nmay also pass the ",(0,n.kt)("inlineCode",{parentName:"p"},"customize")," option with a string pointing at a file that exports\nyour ",(0,n.kt)("inlineCode",{parentName:"p"},"custom")," callback function."),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"example",parentName:"h3"}),"Example",(0,n.kt)("a",{href:"#example","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},'// Export from "./my-custom-loader.js" or whatever you want.'),"\nmodule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},'"babel-loader"'),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"custom"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"babel")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Extract the custom options in the custom plugin"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"myPlugin"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"api",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"{")," opt1",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," opt2 ",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"}")),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      visitor",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Passed the loader options."),"\n    ",(0,n.kt)("span",{className:"token function",parentName:"code"},"customOptions"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"{")," opt1",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," opt2",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," ",(0,n.kt)("span",{className:"token operator",parentName:"span"},"..."),"loader ",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"}")),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Pull out any custom options that the loader might have."),"\n        custom",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," opt1",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," opt2 ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n\n        ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Pass the options back with the two custom options removed."),"\n        loader",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Passed Babel's 'PartialConfig' object."),"\n    ",(0,n.kt)("span",{className:"token function",parentName:"code"},"config"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"cfg",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"{")," customOptions ",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"}")),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"cfg",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"hasFilesystemConfig"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Use the normal config"),"\n        ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," cfg",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"options",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"..."),"cfg",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"options",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        plugins",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n          ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"..."),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"cfg",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"options",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"plugins ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"||")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n\n          ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Include a custom plugin in the options and passing it the customOptions object."),"\n          ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"myPlugin",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," customOptions",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n\n    ",(0,n.kt)("span",{className:"token function",parentName:"code"},"result"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"result"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"..."),"result",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        code",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," result",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"code ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"+")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"\\n// Generated by some custom loader"'),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},"// And in your Webpack config"),"\nmodule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// .."),"\n  module",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    rules",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n      loader",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," path",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"join"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"__dirname",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'my-custom-loader.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"customoptionsoptions-object--custom-object-loader-object-",parentName:"h3"}),(0,n.kt)("inlineCode",{parentName:"h3"},"customOptions(options: Object): { custom: Object, loader: Object }"),(0,n.kt)("a",{href:"#customoptionsoptions-object--custom-object-loader-object-","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Given the loader's options, split custom options out of ",(0,n.kt)("inlineCode",{parentName:"p"},"babel-loader"),"'s\noptions."),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"configcfg-partialconfig-options--source-customoptions--object",parentName:"h3"}),(0,n.kt)("inlineCode",{parentName:"h3"},"config(cfg: PartialConfig, options: { source, customOptions }): Object"),(0,n.kt)("a",{href:"#configcfg-partialconfig-options--source-customoptions--object","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Given Babel's ",(0,n.kt)("inlineCode",{parentName:"p"},"PartialConfig")," object, return the ",(0,n.kt)("inlineCode",{parentName:"p"},"options")," object that should\nbe passed to ",(0,n.kt)("inlineCode",{parentName:"p"},"babel.transform"),"."),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"resultresult-result-result",parentName:"h3"}),(0,n.kt)("inlineCode",{parentName:"h3"},"result(result: Result): Result"),(0,n.kt)("a",{href:"#resultresult-result-result","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Given Babel's result object, allow loaders to make additional tweaks to it."),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"license",parentName:"h2"}),"License",(0,n.kt)("a",{href:"#license","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("a",{href:"https://couto.mit-license.org/",parentName:"p"},"MIT")))}s.isMDXComponent=!0,a.default=s}}]);