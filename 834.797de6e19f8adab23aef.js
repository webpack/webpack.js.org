"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[834],{834:function(n,s,a){a.r(s),s.default='<aside class="tip"><h6 class="tip__prefix">tip</h6><p>This guide stems from the <a href="/guides/getting-started/"><em>Getting Started</em></a> guide.</p></aside> <p><a href="https://www.typescriptlang.org">TypeScript</a> is a typed superset of JavaScript that compiles to plain JavaScript. In this guide we will learn how to integrate TypeScript with webpack.</p> <h2 id="basic-setup">Basic Setup<a href="#basic-setup" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>First install the TypeScript compiler and loader by running:</p> <pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev typescript ts-loader</code></pre> <p>Now we\'ll modify the directory structure &#x26; the configuration files:</p> <p><strong>project</strong></p> <pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo\n</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- tsconfig.json\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- webpack.config.js\n</span><span class="token prefix unchanged"> </span><span class="token line"> |- /dist\n</span><span class="token prefix unchanged"> </span><span class="token line">   |- bundle.js\n</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.html\n</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src\n</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   |- index.ts\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules</span></span></code></pre> <p><strong>tsconfig.json</strong></p> <p>Let\'s set up a configuration to support JSX and compile TypeScript down to ES5...</p> <pre><code class="hljs language-json"><span class="token punctuation">{</span>\n  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"outDir"</span><span class="token operator">:</span> <span class="token string">"./dist/"</span><span class="token punctuation">,</span>\n    <span class="token property">"noImplicitAny"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"es6"</span><span class="token punctuation">,</span>\n    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>\n    <span class="token property">"jsx"</span><span class="token operator">:</span> <span class="token string">"react"</span><span class="token punctuation">,</span>\n    <span class="token property">"allowJs"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token property">"moduleResolution"</span><span class="token operator">:</span> <span class="token string">"node"</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre> <p>See <a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html">TypeScript\'s documentation</a> to learn more about <code>tsconfig.json</code> configuration options.</p> <p>To learn more about webpack configuration, see the <a href="/concepts/configuration/">configuration concepts</a>.</p> <p>Now let\'s configure webpack to handle TypeScript:</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'path\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  entry<span class="token operator">:</span> <span class="token string">\'./src/index.ts\'</span><span class="token punctuation">,</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.tsx?$/</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token string">\'ts-loader\'</span><span class="token punctuation">,</span>\n        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>\n    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">\'.tsx\'</span><span class="token punctuation">,</span> <span class="token string">\'.ts\'</span><span class="token punctuation">,</span> <span class="token string">\'.js\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  output<span class="token operator">:</span> <span class="token punctuation">{</span>\n    filename<span class="token operator">:</span> <span class="token string">\'bundle.js\'</span><span class="token punctuation">,</span>\n    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'dist\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>This will direct webpack to <em>enter</em> through <code>./index.ts</code>, <em>load</em> all <code>.ts</code> and <code>.tsx</code> files through the <code>ts-loader</code>, and <em>output</em> a <code>bundle.js</code> file in our current directory.</p> <p>Now lets change the import of <code>lodash</code> in our <code>./index.ts</code> due to the fact that there is no default export present in <code>lodash</code> definitions.</p> <p><strong>./index.ts</strong></p> <pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import _ from \'lodash\';\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import * as _ from \'lodash\';\n</span></span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function component() {\n</span><span class="token prefix unchanged"> </span><span class="token line">   const element = document.createElement(\'div\');\n</span></span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   element.innerHTML = _.join([\'Hello\', \'webpack\'], \' \');\n</span></span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return element;\n</span><span class="token prefix unchanged"> </span><span class="token line"> }\n</span></span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> document.body.appendChild(component());</span></span></code></pre> <aside class="tip"><h6 class="tip__prefix">tip</h6><p>To make imports do this by default and keep <code>import _ from \'lodash\';</code> syntax in TypeScript, set <code>"allowSyntheticDefaultImports" : true</code> and <code>"esModuleInterop" : true</code> in your <strong>tsconfig.json</strong> file. This is related to TypeScript configuration and mentioned in our guide only for your information.</p></aside> <h2 id="loader">Loader<a href="#loader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><a href="https://github.com/TypeStrong/ts-loader"><code>ts-loader</code></a></p> <p>We use <code>ts-loader</code> in this guide as it makes enabling additional webpack features, such as importing other web assets, a bit easier.</p> <aside class="warning"><h6 class="warning__prefix">warning</h6><p><code>ts-loader</code> uses <code>tsc</code>, the TypeScript compiler, and relies on your <code>tsconfig.json</code> configuration. Make sure to avoid setting <a href="https://www.typescriptlang.org/tsconfig#module"><code>module</code></a> to "CommonJS", or webpack won\'t be able to <a href="/guides/tree-shaking">tree-shake your code</a>.</p></aside> <p>Note that if you\'re already using <a href="https://github.com/babel/babel-loader"><code>babel-loader</code></a> to transpile your code, you can use <a href="https://babeljs.io/docs/en/babel-preset-typescript"><code>@babel/preset-typescript</code></a> and let Babel handle both your JavaScript and TypeScript files instead of using an additional loader. Keep in mind that, contrary to <code>ts-loader</code>, the underlying <a href="https://babeljs.io/docs/en/babel-plugin-transform-typescript"><code>@babel/plugin-transform-typescript</code></a> plugin does not perform any type checking.</p> <h2 id="source-maps">Source Maps<a href="#source-maps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>To learn more about source maps, see the <a href="/guides/development">development guide</a>.</p> <p>To enable source maps, we must configure TypeScript to output inline source maps to our compiled JavaScript files. The following line must be added to our TypeScript configuration:</p> <p><strong>tsconfig.json</strong></p> <pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> {\n</span><span class="token prefix unchanged"> </span><span class="token line">   "compilerOptions": {\n</span><span class="token prefix unchanged"> </span><span class="token line">     "outDir": "./dist/",\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     "sourceMap": true,\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     "noImplicitAny": true,\n</span><span class="token prefix unchanged"> </span><span class="token line">     "module": "commonjs",\n</span><span class="token prefix unchanged"> </span><span class="token line">     "target": "es5",\n</span><span class="token prefix unchanged"> </span><span class="token line">     "jsx": "react",\n</span><span class="token prefix unchanged"> </span><span class="token line">     "allowJs": true,\n</span><span class="token prefix unchanged"> </span><span class="token line">     "moduleResolution": "node",\n</span><span class="token prefix unchanged"> </span><span class="token line">   }\n</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre> <p>Now we need to tell webpack to extract these source maps and include in our final bundle:</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(\'path\');\n</span></span>\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {\n</span><span class="token prefix unchanged"> </span><span class="token line">   entry: \'./src/index.ts\',\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   devtool: \'inline-source-map\',\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   module: {\n</span><span class="token prefix unchanged"> </span><span class="token line">     rules: [\n</span><span class="token prefix unchanged"> </span><span class="token line">       {\n</span><span class="token prefix unchanged"> </span><span class="token line">         test: /\\.tsx?$/,\n</span><span class="token prefix unchanged"> </span><span class="token line">         use: \'ts-loader\',\n</span><span class="token prefix unchanged"> </span><span class="token line">         exclude: /node_modules/,\n</span><span class="token prefix unchanged"> </span><span class="token line">       },\n</span><span class="token prefix unchanged"> </span><span class="token line">     ],\n</span><span class="token prefix unchanged"> </span><span class="token line">   },\n</span><span class="token prefix unchanged"> </span><span class="token line">   resolve: {\n</span><span class="token prefix unchanged"> </span><span class="token line">     extensions: [ \'.tsx\', \'.ts\', \'.js\' ],\n</span><span class="token prefix unchanged"> </span><span class="token line">   },\n</span><span class="token prefix unchanged"> </span><span class="token line">   output: {\n</span><span class="token prefix unchanged"> </span><span class="token line">     filename: \'bundle.js\',\n</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, \'dist\'),\n</span><span class="token prefix unchanged"> </span><span class="token line">   },\n</span><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre> <p>See the <a href="/configuration/devtool/">devtool documentation</a> for more information.</p> <h2 id="using-third-party-libraries">Using Third Party Libraries<a href="#using-third-party-libraries" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>When installing third party libraries from npm, it is important to remember to install the typing definition for that library. These definitions can be found at <a href="https://microsoft.github.io/TypeSearch/">TypeSearch</a>.</p> <p>For example if we want to install lodash we can run the following command to get the typings for it:</p> <pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev @types/lodash</code></pre> <p>For more information see <a href="https://blogs.msdn.microsoft.com/typescript/2016/06/15/the-future-of-declaration-files/">this blog post</a>.</p> <h2 id="importing-other-assets">Importing Other Assets<a href="#importing-other-assets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>To use non-code assets with TypeScript, we need to defer the type for these imports. This requires a <code>custom.d.ts</code> file which signifies custom definitions for TypeScript in our project. Let\'s set up a declaration for <code>.svg</code> files:</p> <p><strong>custom.d.ts</strong></p> <pre><code class="hljs language-typescript"><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">\'*.svg\'</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> content<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>\n  <span class="token keyword">export</span> <span class="token keyword">default</span> content<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre> <p>Here we declare a new module for SVGs by specifying any import that ends in <code>.svg</code> and defining the module\'s <code>content</code> as <code>any</code>. We could be more explicit about it being a url by defining the type as string. The same concept applies to other assets including CSS, SCSS, JSON and more.</p> <h2 id="build-performance">Build Performance<a href="#build-performance" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <aside class="warning"><h6 class="warning__prefix">warning</h6><p>This may degrade build performance.</p></aside> <p>See the <a href="/guides/build-performance/">Build Performance</a> guide on build tooling.</p> '}}]);