"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[996],{996:function(n,e,s){s.r(e),s.d(e,{default:function(){return t}});var a=s(2540),c=s(3317);function i(n){const e={a:"a",aside:"aside",code:"code",h2:"h2",h3:"h3",h6:"h6",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,c.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.p,{children:"Besides exporting a single configuration object, there are a few more ways that cover other needs as well."}),"\n",(0,a.jsxs)(e.h2,{children:[(0,a.jsx)(e.span,{id:"exporting-a-function"}),"Exporting a Function",(0,a.jsx)(e.a,{href:"#exporting-a-function","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(e.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(e.p,{children:["Eventually you will find the need to disambiguate in your ",(0,a.jsx)(e.code,{children:"webpack.config.js"})," between ",(0,a.jsx)(e.a,{href:"/guides/development",children:"development"})," and ",(0,a.jsx)(e.a,{href:"/guides/production",children:"production builds"}),". There are multiple ways to do that. One option is to export a function from your webpack configuration instead of exporting an object. The function will be invoked with two arguments:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["An environment as the first parameter. See the ",(0,a.jsx)(e.a,{href:"/api/cli/#environment-options",children:"environment options CLI documentation"})," for syntax examples."]}),"\n",(0,a.jsxs)(e.li,{children:["An options map (",(0,a.jsx)(e.code,{children:"argv"}),") as the second parameter. This describes the options passed to webpack, with keys such as ",(0,a.jsx)(e.a,{href:"/api/cli/#flags",children:(0,a.jsx)(e.code,{children:"output-path"})})," and ",(0,a.jsx)(e.a,{href:"/api/cli/#flags",children:(0,a.jsx)(e.code,{children:"mode"})}),"."]}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-diff",children:[(0,a.jsxs)(e.span,{className:"token deleted-sign deleted",children:[(0,a.jsx)(e.span,{className:"token prefix deleted",children:"-"}),(0,a.jsx)(e.span,{className:"token line",children:"module.exports = {\n"})]}),(0,a.jsxs)(e.span,{className:"token inserted-sign inserted",children:[(0,a.jsx)(e.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(e.span,{className:"token line",children:"module.exports = function(env, argv) {\n"}),(0,a.jsx)(e.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(e.span,{className:"token line",children:"  return {\n"}),(0,a.jsx)(e.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(e.span,{className:"token line",children:"    mode: env.production ? 'production' : 'development',\n"}),(0,a.jsx)(e.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(e.span,{className:"token line",children:"    devtool: env.production ? 'source-map' : 'eval',\n"})]}),(0,a.jsxs)(e.span,{className:"token unchanged",children:[(0,a.jsx)(e.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(e.span,{className:"token line",children:"    plugins: [\n"}),(0,a.jsx)(e.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(e.span,{className:"token line",children:"      new TerserPlugin({\n"}),(0,a.jsx)(e.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(e.span,{className:"token line",children:"        terserOptions: {\n"})]}),(0,a.jsxs)(e.span,{className:"token inserted-sign inserted",children:[(0,a.jsx)(e.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(e.span,{className:"token line",children:"          compress: argv.mode === 'production' // only if `--mode production` was passed\n"})]}),(0,a.jsxs)(e.span,{className:"token unchanged",children:[(0,a.jsx)(e.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(e.span,{className:"token line",children:"        }\n"}),(0,a.jsx)(e.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(e.span,{className:"token line",children:"      })\n"}),(0,a.jsx)(e.span,{className:"token prefix unchanged",children:" "}),(0,a.jsx)(e.span,{className:"token line",children:"    ]\n"})]}),(0,a.jsxs)(e.span,{className:"token inserted-sign inserted",children:[(0,a.jsx)(e.span,{className:"token prefix inserted",children:"+"}),(0,a.jsx)(e.span,{className:"token line",children:"  };\n"})]}),"};"]})}),"\n",(0,a.jsxs)(e.h2,{children:[(0,a.jsx)(e.span,{id:"exporting-a-promise"}),"Exporting a Promise",(0,a.jsx)(e.a,{href:"#exporting-a-promise","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(e.span,{className:"header-link"})})]}),"\n",(0,a.jsx)(e.p,{children:"Webpack will run the function exported by the configuration file and wait for a Promise to be returned. Handy when you need to asynchronously load configuration variables."}),"\n",(0,a.jsxs)(e.aside,{className:"tip",children:[(0,a.jsx)(e.h6,{className:"tip__prefix",children:"tip"}),(0,a.jsxs)(e.p,{children:["It is possible to export multiple promises by wrapping them into ",(0,a.jsx)(e.code,{children:"Promise.all([/* Your promises */])."})]})]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-js",children:["module",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function-variable function",children:"exports"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(e.span,{className:"token keyword",children:"return"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"token class-name",children:"Promise"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(e.span,{className:"token parameter",children:["resolve",(0,a.jsx)(e.span,{className:"token punctuation",children:","})," reject"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(e.span,{className:"token function",children:"setTimeout"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n      ",(0,a.jsx)(e.span,{className:"token function",children:"resolve"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n        entry",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'./app.js'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n        ",(0,a.jsx)(e.span,{className:"token comment",children:"/* ... */"}),"\n      ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n    ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token number",children:"5000"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(e.aside,{className:"warning",children:[(0,a.jsx)(e.h6,{className:"warning__prefix",children:"warning"}),(0,a.jsxs)(e.p,{children:["Returning a ",(0,a.jsx)(e.code,{children:"Promise"})," only works when using webpack via CLI. ",(0,a.jsx)(e.a,{href:"/api/node/#webpack",children:(0,a.jsx)(e.code,{children:"webpack()"})})," expects an object."]})]}),"\n",(0,a.jsxs)(e.h2,{children:[(0,a.jsx)(e.span,{id:"exporting-multiple-configurations"}),"Exporting multiple configurations",(0,a.jsx)(e.a,{href:"#exporting-multiple-configurations","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(e.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(e.p,{children:["Instead of exporting a single configuration object/function, you may export multiple configurations (multiple functions are supported since webpack 3.1.0). When running webpack, all configurations are built. For instance, this is useful for ",(0,a.jsx)(e.a,{href:"/guides/author-libraries",children:"bundling a library"})," for multiple ",(0,a.jsx)(e.a,{href:"/configuration/output/#outputlibrarytarget",children:"targets"})," such as AMD and CommonJS:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-js",children:["module",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"exports ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n    output",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n      filename",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'./dist-amd.js'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n      libraryTarget",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'amd'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    name",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'amd'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    entry",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'./app.js'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    mode",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'production'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n    output",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n      filename",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'./dist-commonjs.js'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n      libraryTarget",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'commonjs'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    name",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'commonjs'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    entry",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'./app.js'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    mode",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'production'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(e.aside,{className:"tip",children:[(0,a.jsx)(e.h6,{className:"tip__prefix",children:"tip"}),(0,a.jsxs)(e.p,{children:["If you pass a name to ",(0,a.jsx)(e.a,{href:"/api/cli/#config-name",children:(0,a.jsx)(e.code,{children:"--config-name"})})," flag, webpack will only build that specific configuration."]})]}),"\n",(0,a.jsxs)(e.h3,{children:[(0,a.jsx)(e.span,{id:"dependencies"}),"dependencies",(0,a.jsx)(e.a,{href:"#dependencies","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(e.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(e.p,{children:["In case you have a configuration that depends on the output of another configuration, you can specify a list of dependencies using the ",(0,a.jsx)(e.a,{href:"/configuration/other-options/#dependencies",children:(0,a.jsx)(e.code,{children:"dependencies"})})," array."]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"webpack.config.js"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-js",children:["module",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"exports ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n    name",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'client'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    target",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'web'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(e.span,{className:"token comment",children:"// …"}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n    name",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'server'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    target",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:"'node'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n    dependencies",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),(0,a.jsx)(e.span,{className:"token string",children:"'client'"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"})]})}),"\n",(0,a.jsxs)(e.h3,{children:[(0,a.jsx)(e.span,{id:"parallelism"}),"parallelism",(0,a.jsx)(e.a,{href:"#parallelism","aria-hidden":"true",tabIndex:"-1",children:(0,a.jsx)(e.span,{className:"header-link"})})]}),"\n",(0,a.jsxs)(e.p,{children:["In case you export multiple configurations, you can use the ",(0,a.jsx)(e.code,{children:"parallelism"})," option on the configuration array to specify the maximum number of compilers that will compile in parallel."]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["Type: ",(0,a.jsx)(e.code,{children:"number"})]}),"\n",(0,a.jsx)(e.li,{children:"Available: 5.22.0+"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"webpack.config.js"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:["module",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"exports ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(e.span,{className:"token comment",children:"//config-1"}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(e.span,{className:"token comment",children:"//config-2"}),"\n  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\nmodule",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"exports",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"parallelism ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token number",children:"1"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"})]})})]})}function t(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(i,{...n})}):i(n)}}}]);