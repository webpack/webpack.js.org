<!DOCTYPE html><html lang="en"><head><title data-rh="true">Combined printable page | webpack</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="theme-color" content="#2B3A42"/><meta data-rh="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-rh="true" name="robots" content="noindex,nofollow"/><meta data-rh="true" name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta data-rh="true" property="og:site_name" content="webpack"/><meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" property="og:title" content="Combined printable page | webpack"/><meta data-rh="true" property="og:description" name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta data-rh="true" property="og:image" content="https://webpack.js.org/icon-pwa-512x512.934507c816afbcdb.png"/><meta data-rh="true" property="twitter:card" content="summary"/><meta data-rh="true" property="twitter:site" content="@webpack"/><meta data-rh="true" property="twitter:creator" content="@webpack"/><meta data-rh="true" property="twitter:domain" content="https://webpack.js.org/"/><meta data-rh="true" name="mobile-web-app-capable" content="yes"/><meta data-rh="true" name="apple-mobile-web-app-capable" content="yes"/><meta data-rh="true" name="apple-mobile-web-app-status-bar-style" content="black"/><meta data-rh="true" name="apple-mobile-web-app-title" content="webpack"/><meta data-rh="true" name="msapplication-TileImage" content="/icon_150x150.png"/><meta data-rh="true" name="msapplication-TileColor" content="#465e69"/><link data-rh="true" rel="icon" type="image/x-icon" href="/favicon.a3dd58d3142f7566.ico"/><link data-rh="true" rel="manifest" href="/manifest.json"/><link data-rh="true" rel="canonical" href="https://webpack.js.org/guides/printable/"/><link data-rh="true" rel="icon" sizes="192x192" href="/icon_192x192.png"/><link data-rh="true" rel="icon" sizes="512x512" href="/icon_512x512.png"/><link data-rh="true" rel="apple-touch-icon" href="/icon_180x180.png"/><link data-rh="true" rel="mask-icon" href="/logo-on-white-bg.4a16a9aed80e42ee.svg" color="#465e69"/><link rel="stylesheet" href=/index.93d749b6c038c22c.css /><link rel="stylesheet" href=/4513.869f0846a132527b.css /></head><body><div id="root"><div class="site"><div class="site__header"><header class="bg-blue-800 dark:bg-gray-900"><div class="flex items-center py-10 px-[16px] justify-between md:px-[24px] md:max-w-[1024px] md:mx-auto md:justify-start"><button class="bg-transparent border-none md:hidden"><svg viewBox="-62 138 25 25" width="20" height="20" class="fill-current text-white"><path fill="currentColor" d="M-60.2 140.2h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8M-60.2 148.7h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8M-60.2 157.2h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8"></path></svg></button><a class="md:mr-auto" href="/"><img class="logo" src="/site-logo.c0e60df418e04f58.svg" alt="webpack logo" width="122" height="35"/></a><nav class="hidden md:inline-grid md:grid-flow-col md:gap-x-[18px]"><a aria-label="webpack documentation" class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/concepts/">Documentation</a><a aria-label="contribute to webpack" class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/contribute/">Contribute</a><a aria-label="webpack blog" class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/blog/">Blog</a><div class="relative flex items-center justify-center "><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" aria-label="webpack on GitHub"><svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="16"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 6.8 9.5c.5 0 .7-.2.7-.5v-1.7C6.7 20 6.1 18 6.1 18c-.4-1.2-1-1.5-1-1.5-1-.6 0-.6 0-.6 1 0 1.5 1 1.5 1 .9 1.6 2.4 1.1 3 .9 0-.7.3-1.1.6-1.4-2.2-.2-4.6-1-4.6-4.9 0-1.1.4-2 1-2.7 0-.3-.4-1.3.2-2.7 0 0 .8-.2 2.7 1a9.4 9.4 0 0 1 5 0c2-1.2 2.8-1 2.8-1 .5 1.4.1 2.4 0 2.7.7.7 1 1.6 1 2.7 0 3.8-2.3 4.7-4.5 5 .4.2.7.8.7 1.8V21c0 .3.2.6.7.5 4-1.3 6.8-5 6.8-9.5A10 10 0 0 0 12 2"></path></svg></a></div><div class="relative flex items-center justify-center "><a href="https://x.com/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" aria-label="webpack on X"><svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="16"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a></div><div class="relative flex items-center justify-center "><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" aria-label="webpack on StackOverflow"><svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="16"><path d="M17.4 20.2v-5.4h1.8V22H3v-7.2h1.8v5.4zM6.8 14.3l.3-1.7 8.8 1.8-.3 1.8zm1.1-4.2.8-1.6 8.1 3.8-.7 1.6zm2.3-4 1.1-1.4 7 5.8-1.2 1.4L10 6m4.7-4L20 9l-1.4 1-5.4-7 1.4-1m-8 16.5v-1.8h9v1.8z"></path></svg></a></div><nav class="dropdown "><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><svg viewBox="0 0 610 560" xmlns="http://www.w3.org/2000/svg" class="dropdown__language text-gray-100 hover:text-blue-200 transition-colors duration-200"><path d="m304.8 99.2-162.5-57.3v353.6l162.5-52.6z"></path><path d="m300.9 99 168.7-57.3v353.6l-168.7-52.5zm-200.7 358.4 200.7-66.9v-291.5l-200.7 66.9z" fill="currentColor"></path><path d="m392.4 461.8 28.4 46.8 15-43.5zm-223.9-262.3c-1.1-1 1.4 8.6 4.8 12 6.1 6.1 10.8 6.9 13.3 7 5.6.2 12.5-1.4 16.5-3.1s10.9-5.2 13.5-10.4c.6-1.1 2.1-3 1.1-7.5-.7-3.5-3-4.8-5.7-4.6s-11 2.4-15 3.6-12.2 3.7-15.8 4.5-11.5-.3-12.7-1.5zm101.2 114.8c-1.6-.6-34.3-14.1-38.9-16.4a368 368 0 0 0 -17.5-7.5c12.3-19 20.1-33.4 21.2-35.6 1.9-4 15-29.5 15.3-31.1s.7-7.5.4-8.9-5.1 1.3-11.6 3.5-18.9 10.2-23.7 11.2-20.1 6.8-28 9.4c-7.8 2.6-22.7 7.1-28.8 8.8-6.1 1.6-11.4 1.8-14.9 2.8 0 0 .5 4.8 1.4 6.2s4.1 5 7.9 5.9c3.8 1 10 .6 12.8-.1s7.7-3.1 8.4-4.1c.7-1.1-.3-4.3.8-5.3s16.1-4.5 21.7-6.2 27.2-9.2 30.1-8.8a916 916 0 0 1 -23.9 47.7 821 821 0 0 1 -45 63.3c-5.3 6-18 21.5-22.4 25 1.1.3 9-.4 10.4-1.3 8.9-5.5 23.8-24.1 28.6-29.7a489.1 489.1 0 0 0 36.7-49.4c1.9.8 17.6 13.6 21.7 16.4a293 293 0 0 0 23.7 13.3c3.5 1.5 16.9 7.7 17.5 5.6.7-1.8-2.3-14.1-3.9-14.7z"></path><path clip-rule="evenodd" d="m194.1 484.7a204.9 204.9 0 0 0 30.7 14.5 233.6 233.6 0 0 0 46.4 12c.5 0 16 1.9 19.2 1.9h15.7c6.1-.5 11.8-.9 17.9-1.7 4.9-.7 10.3-1.6 15.5-2.8 3.8-.9 7.8-1.7 11.7-3 3.7-1 7.8-2.4 11.8-3.8l8.2-3.1c2.3-1 5.1-2.3 7.7-3.3a243 243 0 0 0 19.2-10c2.3-1.2 7.5-5.2 10.3-5.2 3.1 0 5.2 2.8 5.2 5.2 0 5.1-6.8 6.6-9.9 8.9-3.3 2.3-7.3 4-10.8 5.9-7 3.7-14.1 6.8-20.9 9.4a251 251 0 0 1 -27.3 8.5c-3.3.7-6.6 1.6-9.9 2.1-1.7.3-19.9 3.1-24.9 3.1h-23a293.9 293.9 0 0 1 -35.1-5.2 196 196 0 0 1 -33.1-10.3c-12-4.5-24.6-10.5-36.4-18.3-2.1-1.4-2.3-2.8-2.3-4.4a5 5 0 0 1 5.1-5.1c2.4.1 8 4.2 9 4.7zm101.4-98.1-189.9 63.2v-280.1l189.9-63.2zm10.6-288.3v292.7a6 6 0 0 1 -1.2 2.6c-.3.5-1 1.2-1.6 1.4a14621 14621 0 0 1 -203.1 67.6c-2.1 0-4-1.4-5.1-3.7 0-.2-.2-.3-.2-.7v-292.8c.3-.9.5-2.1 1.2-2.8 1.4-1.9 3.8-2.3 5.4-2.8 3-1 196.1-65.8 198.9-65.8 1.9 0 5.7 1.2 5.7 4.3z" fill-rule="evenodd"></path><path clip-rule="evenodd" d="m464.3 388-158-49.1v-236l158-53.7zm10.6-345.8v352.4c-.2 4-3 5.7-5.6 5.7-2.3 0-18.6-5.6-21.4-6.4l-65.8-20.4-14.6-4.7-12.9-4c-18.6-5.7-37.6-11.5-56.3-17.8-.7-.2-2.4-2.6-2.4-3.1v-246.1c.3-.9.7-1.9 1.6-2.6 1.4-1.6 61.1-21.4 84.7-29.3 6.3-2.3 84.8-29.3 87.3-29.3 3 .1 5.4 2.3 5.4 5.6z" fill-rule="evenodd"></path><path d="m515 461.8-211.1-67.3.9-292.8 210.2 66.9z"></path><path clip-rule="evenodd" d="m408.6 232.5-20.7 50.1 38.1 11.5zm-12.4-47.2 27.2 8.2 49.5 178.6-27.9-8.5-10-36.7-57.7-17.5-12.4 29.9-27.9-8.5z" fill="currentColor" fill-rule="evenodd"></path></svg><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="https://webpack.js.org/guides/printable/" class="px-5 block"><span>English</span></a></li><li><a href="https://webpack.docschina.org/guides/printable/" class="px-5 block"><span lang="zh">中文</span></a></li><li><a href="https://webpack.kr/guides/printable/" class="px-5 block"><span lang="ko">한국어</span></a></li></ul></div></nav></nav><div class="inline-flex items-center ml-[18px]"><div class="relative flex items-center justify-center "><button aria-label="Switch to dark theme" class="bg-transparent border-none cursor-pointer text-[16px] p-0 inline-flex items-center text-gray-100 hover:text-blue-200 transition-colors duration-200" data-testid="hello-darkness"><svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18.14a.722.722 0 0 0-.722.722v2.166a.722.722 0 0 0 1.444 0v-2.166a.722.722 0 0 0-.722-.721ZM12 2.25a.722.722 0 0 0-.722.722v2.166a.722.722 0 0 0 1.444 0V2.972A.722.722 0 0 0 12 2.25ZM5.86 12a.722.722 0 0 0-.723-.722H2.972a.722.722 0 0 0 0 1.444h2.165A.722.722 0 0 0 5.86 12ZM21.028 11.278h-2.165a.722.722 0 0 0 0 1.444h2.165a.722.722 0 0 0 0-1.444ZM7.148 16.13a.72.72 0 0 0-.51.21l-1.533 1.534a.72.72 0 1 0 1.022 1.022l1.532-1.533a.724.724 0 0 0-.51-1.233ZM16.852 7.87a.72.72 0 0 0 .51-.21l1.533-1.533a.72.72 0 0 0 .211-.511.72.72 0 0 0-.722-.722.72.72 0 0 0-.51.21L16.34 6.639a.72.72 0 0 0-.211.51.72.72 0 0 0 .722.722ZM6.127 5.105a.72.72 0 0 0-.511-.211.72.72 0 0 0-.722.722.72.72 0 0 0 .21.51L6.638 7.66a.72.72 0 0 0 .511.211.72.72 0 0 0 .722-.722.72.72 0 0 0-.21-.51L6.126 5.105ZM17.363 16.34a.72.72 0 1 0-1.022 1.022l1.532 1.533a.72.72 0 0 0 1.022 0 .72.72 0 0 0 0-1.021l-1.532-1.533ZM12 7.5c-2.48 0-4.5 2.02-4.5 4.5s2.02 4.5 4.5 4.5 4.5-2.02 4.5-4.5-2.02-4.5-4.5-4.5Z" fill="currentColor"></path></svg></button></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="bg-gray-100 dark:bg-gray-800 hidden md:block"><div class="md:max-w-[1024px] md:mx-auto md:grid md:grid-flow-col md:justify-end md:gap-x-[20px] md:px-[24px]" data-testid="sub-navigation"><a title="api" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/api/">API</a><a title="concepts" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/concepts/">concepts</a><a title="configuration" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/configuration/">configuration</a><a title="guides" aria-current="page" class="!text-black dark:!text-white text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/guides/">guides</a><a title="loaders" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/loaders/">loaders</a><a title="migrate" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/migrate/">migrate</a><a title="plugins" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/plugins/">plugins</a></div></div></header></div><div class="container site__content"><div class="sponsors"><div class="sponsors__content"><div class="sponsors__link-wrapper"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener noreferrer"><img class="agGridLogo" src="/ag-grid-logo.6a68915181a34a15.png" alt="ag grid" width="220" loading="lazy"/></a></div><div class="sponsors__link-wrapper"><a href="https://charts.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener noreferrer"><img class="agChartsLogo" src="/ag-charts-logo.f1735fb8902861d2.png" alt="ag charts" width="220" loading="lazy"/></a></div><div class="sponsors__link-wrapper-2"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener noreferrer"><div class="sponsors__tagline">Datagrid and Charting for Enterprise Applications</div><div class="sponsors__img__wrapper"><img src="/icon-square-small.9e8aff7a67a5dd20.svg" alt="webpack" width="150" height="150" loading="lazy"/></div><div class="sponsors__footer">Proud to partner with webpack</div></a></div></div></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="relative z-0 bg-white dark:bg-gray-100 "><select class="text-gray-600 text-14 px-5 py-5 appearance-none box-border border border-gray-200 border-solid flex-col flex w-full rounded-none bg-transparent bg-none"><option selected="" value="5">webpack 5</option><option value="4">webpack 4</option></select><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="absolute right-5 top-5 fill-current text-gray-300 z-[-1]" width="20" height="20"><path d="M4.5 7.5c.5-.4 1-.4 1.6 0l3.9 3.8 4-3.8c.4-.4 1-.4 1.5 0 .4.5.4 1.2 0 1.7l-4.7 4.5a1 1 0 0 1-1.6 0L4.5 9.2c-.4-.5-.4-1.2 0-1.7"></path></svg></div><div class="sidebar-item sidebar-item--disabled`"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4"></path></svg><a class="sidebar-item__title sidebar-link__print" href="/guides/printable/" rel="nofollow noopener noreferrer" alt="Print" title="Print" target="_blank">Print Section<img src="/icon-print.3c147a8b5a684f88.svg" width="27" height="20" alt="Printer Icon"/></a></div><div><div class="sidebar-item  sidebar-item--disabled"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4"></path></svg><a class="sidebar-item__title" href="/guides/">Guides</a></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/getting-started/">Getting Started</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Basic Setup"><a class="" href="/guides/getting-started/#basic-setup">Basic Setup</a></li><li class="sidebar-item__anchor" title="Creating a Bundle"><a class="" href="/guides/getting-started/#creating-a-bundle">Creating a Bundle</a></li><li class="sidebar-item__anchor" title="Modules"><a class="" href="/guides/getting-started/#modules">Modules</a></li><li class="sidebar-item__anchor" title="Using a Configuration"><a class="" href="/guides/getting-started/#using-a-configuration">Using a Configuration</a></li><li class="sidebar-item__anchor" title="NPM Scripts"><a class="" href="/guides/getting-started/#npm-scripts">NPM Scripts</a></li><li class="sidebar-item__anchor" title="Conclusion"><a class="" href="/guides/getting-started/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/asset-management/">Asset Management</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Setup"><a class="" href="/guides/asset-management/#setup">Setup</a></li><li class="sidebar-item__anchor" title="Loading CSS"><a class="" href="/guides/asset-management/#loading-css">Loading CSS</a></li><li class="sidebar-item__anchor" title="Loading Images"><a class="" href="/guides/asset-management/#loading-images">Loading Images</a></li><li class="sidebar-item__anchor" title="Loading Fonts"><a class="" href="/guides/asset-management/#loading-fonts">Loading Fonts</a></li><li class="sidebar-item__anchor" title="Loading Data"><a class="" href="/guides/asset-management/#loading-data">Loading Data</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Customize parser of JSON modules"><a class="" href="/guides/asset-management/#customize-parser-of-json-modules">Customize parser of JSON modules</a></li></ul></li><li class="sidebar-item__anchor" title="Global Assets"><a class="" href="/guides/asset-management/#global-assets">Global Assets</a></li><li class="sidebar-item__anchor" title="Wrapping up"><a class="" href="/guides/asset-management/#wrapping-up">Wrapping up</a></li><li class="sidebar-item__anchor" title="Next guide"><a class="" href="/guides/asset-management/#next-guide">Next guide</a></li><li class="sidebar-item__anchor" title="Further Reading"><a class="" href="/guides/asset-management/#further-reading">Further Reading</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/output-management/">Output Management</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Preparation"><a class="" href="/guides/output-management/#preparation">Preparation</a></li><li class="sidebar-item__anchor" title="Setting up HtmlWebpackPlugin"><a class="" href="/guides/output-management/#setting-up-htmlwebpackplugin">Setting up HtmlWebpackPlugin</a></li><li class="sidebar-item__anchor" title="Cleaning up the /dist folder"><a class="" href="/guides/output-management/#cleaning-up-the-dist-folder">Cleaning up the /dist folder</a></li><li class="sidebar-item__anchor" title="The Manifest"><a class="" href="/guides/output-management/#the-manifest">The Manifest</a></li><li class="sidebar-item__anchor" title="Conclusion"><a class="" href="/guides/output-management/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/development/">Development</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Using source maps"><a class="" href="/guides/development/#using-source-maps">Using source maps</a></li><li class="sidebar-item__anchor" title="Choosing a Development Tool"><a class="" href="/guides/development/#choosing-a-development-tool">Choosing a Development Tool</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Using Watch Mode"><a class="" href="/guides/development/#using-watch-mode">Using Watch Mode</a></li><li class="sidebar-item__anchor" title="Using webpack-dev-server"><a class="" href="/guides/development/#using-webpack-dev-server">Using webpack-dev-server</a></li><li class="sidebar-item__anchor" title="Using webpack-dev-middleware"><a class="" href="/guides/development/#using-webpack-dev-middleware">Using webpack-dev-middleware</a></li></ul></li><li class="sidebar-item__anchor" title="Adjusting Your Text Editor"><a class="" href="/guides/development/#adjusting-your-text-editor">Adjusting Your Text Editor</a></li><li class="sidebar-item__anchor" title="Conclusion"><a class="" href="/guides/development/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/code-splitting/">Code Splitting</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Entry Points"><a class="" href="/guides/code-splitting/#entry-points">Entry Points</a></li><li class="sidebar-item__anchor" title="Prevent Duplication"><a class="" href="/guides/code-splitting/#prevent-duplication">Prevent Duplication</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Entry dependencies"><a class="" href="/guides/code-splitting/#entry-dependencies">Entry dependencies</a></li><li class="sidebar-item__anchor" title="SplitChunksPlugin"><a class="" href="/guides/code-splitting/#splitchunksplugin">SplitChunksPlugin</a></li></ul></li><li class="sidebar-item__anchor" title="Dynamic Imports"><a class="" href="/guides/code-splitting/#dynamic-imports">Dynamic Imports</a></li><li class="sidebar-item__anchor" title="Prefetching/Preloading modules"><a class="" href="/guides/code-splitting/#prefetchingpreloading-modules">Prefetching/Preloading modules</a></li><li class="sidebar-item__anchor" title="Bundle Analysis"><a class="" href="/guides/code-splitting/#bundle-analysis">Bundle Analysis</a></li><li class="sidebar-item__anchor" title="Next Steps"><a class="" href="/guides/code-splitting/#next-steps">Next Steps</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/caching/">Caching</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Output Filenames"><a class="" href="/guides/caching/#output-filenames">Output Filenames</a></li><li class="sidebar-item__anchor" title="Extracting Boilerplate"><a class="" href="/guides/caching/#extracting-boilerplate">Extracting Boilerplate</a></li><li class="sidebar-item__anchor" title="Module Identifiers"><a class="" href="/guides/caching/#module-identifiers">Module Identifiers</a></li><li class="sidebar-item__anchor" title="Conclusion"><a class="" href="/guides/caching/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/author-libraries/">Authoring Libraries</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Authoring a Library"><a class="" href="/guides/author-libraries/#authoring-a-library">Authoring a Library</a></li><li class="sidebar-item__anchor" title="Webpack Configuration"><a class="" href="/guides/author-libraries/#webpack-configuration">Webpack Configuration</a></li><li class="sidebar-item__anchor" title="Expose the Library"><a class="" href="/guides/author-libraries/#expose-the-library">Expose the Library</a></li><li class="sidebar-item__anchor" title="Externalize Lodash"><a class="" href="/guides/author-libraries/#externalize-lodash">Externalize Lodash</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="External Limitations"><a class="" href="/guides/author-libraries/#external-limitations">External Limitations</a></li></ul></li><li class="sidebar-item__anchor" title="Final Steps"><a class="" href="/guides/author-libraries/#final-steps">Final Steps</a></li></ul></div></div><div><div class="sidebar-item  sidebar-item--disabled"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4"></path></svg><a class="sidebar-item__title" href="/guides/environment-variables/">Environment Variables</a></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/build-performance/">Build Performance</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="General"><a class="" href="/guides/build-performance/#general">General</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Stay Up to Date"><a class="" href="/guides/build-performance/#stay-up-to-date">Stay Up to Date</a></li><li class="sidebar-item__anchor" title="Loaders"><a class="" href="/guides/build-performance/#loaders">Loaders</a></li><li class="sidebar-item__anchor" title="Bootstrap"><a class="" href="/guides/build-performance/#bootstrap">Bootstrap</a></li><li class="sidebar-item__anchor" title="Resolving"><a class="" href="/guides/build-performance/#resolving">Resolving</a></li><li class="sidebar-item__anchor" title="Dlls"><a class="" href="/guides/build-performance/#dlls">Dlls</a></li><li class="sidebar-item__anchor" title="Smaller = Faster"><a class="" href="/guides/build-performance/#smaller--faster">Smaller = Faster</a></li><li class="sidebar-item__anchor" title="Worker Pool"><a class="" href="/guides/build-performance/#worker-pool">Worker Pool</a></li><li class="sidebar-item__anchor" title="Persistent cache"><a class="" href="/guides/build-performance/#persistent-cache">Persistent cache</a></li><li class="sidebar-item__anchor" title="Custom plugins/loaders"><a class="" href="/guides/build-performance/#custom-pluginsloaders">Custom plugins/loaders</a></li><li class="sidebar-item__anchor" title="Progress plugin"><a class="" href="/guides/build-performance/#progress-plugin">Progress plugin</a></li></ul></li><li class="sidebar-item__anchor" title="Development"><a class="" href="/guides/build-performance/#development">Development</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Incremental Builds"><a class="" href="/guides/build-performance/#incremental-builds">Incremental Builds</a></li><li class="sidebar-item__anchor" title="Compile in Memory"><a class="" href="/guides/build-performance/#compile-in-memory">Compile in Memory</a></li><li class="sidebar-item__anchor" title="stats.toJson speed"><a class="" href="/guides/build-performance/#statstojson-speed">stats.toJson speed</a></li><li class="sidebar-item__anchor" title="Devtool"><a class="" href="/guides/build-performance/#devtool">Devtool</a></li><li class="sidebar-item__anchor" title="Avoid Production Specific Tooling"><a class="" href="/guides/build-performance/#avoid-production-specific-tooling">Avoid Production Specific Tooling</a></li><li class="sidebar-item__anchor" title="Minimal Entry Chunk"><a class="" href="/guides/build-performance/#minimal-entry-chunk">Minimal Entry Chunk</a></li><li class="sidebar-item__anchor" title="Avoid Extra Optimization Steps"><a class="" href="/guides/build-performance/#avoid-extra-optimization-steps">Avoid Extra Optimization Steps</a></li><li class="sidebar-item__anchor" title="Output Without Path Info"><a class="" href="/guides/build-performance/#output-without-path-info">Output Without Path Info</a></li><li class="sidebar-item__anchor" title="Node.js Versions 8.9.10-9.11.1"><a class="" href="/guides/build-performance/#nodejs-versions-8910-9111">Node.js Versions 8.9.10-9.11.1</a></li><li class="sidebar-item__anchor" title="TypeScript Loader"><a class="" href="/guides/build-performance/#typescript-loader">TypeScript Loader</a></li></ul></li><li class="sidebar-item__anchor" title="Production"><a class="" href="/guides/build-performance/#production">Production</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Source Maps"><a class="" href="/guides/build-performance/#source-maps">Source Maps</a></li></ul></li><li class="sidebar-item__anchor" title="Specific Tooling Issues"><a class="" href="/guides/build-performance/#specific-tooling-issues">Specific Tooling Issues</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Babel"><a class="" href="/guides/build-performance/#babel">Babel</a></li><li class="sidebar-item__anchor" title="TypeScript"><a class="" href="/guides/build-performance/#typescript">TypeScript</a></li><li class="sidebar-item__anchor" title="Sass"><a class="" href="/guides/build-performance/#sass">Sass</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/csp/">Content Security Policies</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Examples"><a class="" href="/guides/csp/#examples">Examples</a></li><li class="sidebar-item__anchor" title="Enabling CSP"><a class="" href="/guides/csp/#enabling-csp">Enabling CSP</a></li><li class="sidebar-item__anchor" title="Trusted Types"><a class="" href="/guides/csp/#trusted-types">Trusted Types</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/development-vagrant/">Development - Vagrant</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Configuring the Project"><a class="" href="/guides/development-vagrant/#configuring-the-project">Configuring the Project</a></li><li class="sidebar-item__anchor" title="Running the Server"><a class="" href="/guides/development-vagrant/#running-the-server">Running the Server</a></li><li class="sidebar-item__anchor" title="Advanced Usage with nginx"><a class="" href="/guides/development-vagrant/#advanced-usage-with-nginx">Advanced Usage with nginx</a></li><li class="sidebar-item__anchor" title="Conclusion"><a class="" href="/guides/development-vagrant/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/dependency-management/">Dependency Management</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="require with expression"><a class="" href="/guides/dependency-management/#require-with-expression">require with expression</a></li><li class="sidebar-item__anchor" title="require.context"><a class="" href="/guides/dependency-management/#requirecontext">require.context</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="context module API"><a class="" href="/guides/dependency-management/#context-module-api">context module API</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/installation/">Installation</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Prerequisites"><a class="" href="/guides/installation/#prerequisites">Prerequisites</a></li><li class="sidebar-item__anchor" title="Local Installation"><a class="" href="/guides/installation/#local-installation">Local Installation</a></li><li class="sidebar-item__anchor" title="Global Installation"><a class="" href="/guides/installation/#global-installation">Global Installation</a></li><li class="sidebar-item__anchor" title="Bleeding Edge"><a class="" href="/guides/installation/#bleeding-edge">Bleeding Edge</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/hot-module-replacement/">Hot Module Replacement</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Enabling HMR"><a class="" href="/guides/hot-module-replacement/#enabling-hmr">Enabling HMR</a></li><li class="sidebar-item__anchor" title="Via the Node.js API"><a class="" href="/guides/hot-module-replacement/#via-the-nodejs-api">Via the Node.js API</a></li><li class="sidebar-item__anchor" title="Gotchas"><a class="" href="/guides/hot-module-replacement/#gotchas">Gotchas</a></li><li class="sidebar-item__anchor" title="HMR with Stylesheets"><a class="" href="/guides/hot-module-replacement/#hmr-with-stylesheets">HMR with Stylesheets</a></li><li class="sidebar-item__anchor" title="Other Code and Frameworks"><a class="" href="/guides/hot-module-replacement/#other-code-and-frameworks">Other Code and Frameworks</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/tree-shaking/">Tree Shaking</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Add a Utility"><a class="" href="/guides/tree-shaking/#add-a-utility">Add a Utility</a></li><li class="sidebar-item__anchor" title="Mark the file as side-effect-free"><a class="" href="/guides/tree-shaking/#mark-the-file-as-side-effect-free">Mark the file as side-effect-free</a></li><li class="sidebar-item__anchor" title="Clarifying tree shaking and sideEffects"><a class="" href="/guides/tree-shaking/#clarifying-tree-shaking-and-sideeffects">Clarifying tree shaking and sideEffects</a></li><li class="sidebar-item__anchor" title="Full Example: Understanding Side Effects with CSS Files"><a class="" href="/guides/tree-shaking/#full-example-understanding-side-effects-with-css-files">Full Example: Understanding Side Effects with CSS Files</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Package Structure"><a class="" href="/guides/tree-shaking/#package-structure">Package Structure</a></li><li class="sidebar-item__anchor" title="Package Files Content"><a class="" href="/guides/tree-shaking/#package-files-content">Package Files Content</a></li><li class="sidebar-item__anchor" title="What Happens When Consuming This Package?"><a class="" href="/guides/tree-shaking/#what-happens-when-consuming-this-package">What Happens When Consuming This Package?</a></li><li class="sidebar-item__anchor" title="The Decision Tree for Side Effects"><a class="" href="/guides/tree-shaking/#the-decision-tree-for-side-effects">The Decision Tree for Side Effects</a></li><li class="sidebar-item__anchor" title="Real-World Impact"><a class="" href="/guides/tree-shaking/#real-world-impact">Real-World Impact</a></li><li class="sidebar-item__anchor" title="Testing Side Effects Configuration"><a class="" href="/guides/tree-shaking/#testing-side-effects-configuration">Testing Side Effects Configuration</a></li></ul></li><li class="sidebar-item__anchor" title="Mark a function call as side-effect-free"><a class="" href="/guides/tree-shaking/#mark-a-function-call-as-side-effect-free">Mark a function call as side-effect-free</a></li><li class="sidebar-item__anchor" title="Minify the Output"><a class="" href="/guides/tree-shaking/#minify-the-output">Minify the Output</a></li><li class="sidebar-item__anchor" title="Common Pitfalls with Side Effects"><a class="" href="/guides/tree-shaking/#common-pitfalls-with-side-effects">Common Pitfalls with Side Effects</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="1. Over-optimistic sideEffects: false"><a class="" href="/guides/tree-shaking/#1-over-optimistic-sideeffects-false">1. Over-optimistic sideEffects: false</a></li><li class="sidebar-item__anchor" title="2. Re-exports with Side Effects"><a class="" href="/guides/tree-shaking/#2-re-exports-with-side-effects">2. Re-exports with Side Effects</a></li><li class="sidebar-item__anchor" title="3. Forgetting about Nested Dependencies"><a class="" href="/guides/tree-shaking/#3-forgetting-about-nested-dependencies">3. Forgetting about Nested Dependencies</a></li><li class="sidebar-item__anchor" title="4. Testing Only in Development Mode"><a class="" href="/guides/tree-shaking/#4-testing-only-in-development-mode">4. Testing Only in Development Mode</a></li></ul></li><li class="sidebar-item__anchor" title="Conclusion"><a class="" href="/guides/tree-shaking/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/production/">Production</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Setup"><a class="" href="/guides/production/#setup">Setup</a></li><li class="sidebar-item__anchor" title="NPM Scripts"><a class="" href="/guides/production/#npm-scripts">NPM Scripts</a></li><li class="sidebar-item__anchor" title="Specify the Mode"><a class="" href="/guides/production/#specify-the-mode">Specify the Mode</a></li><li class="sidebar-item__anchor" title="Minification"><a class="" href="/guides/production/#minification">Minification</a></li><li class="sidebar-item__anchor" title="Source Mapping"><a class="" href="/guides/production/#source-mapping">Source Mapping</a></li><li class="sidebar-item__anchor" title="Minimize CSS"><a class="" href="/guides/production/#minimize-css">Minimize CSS</a></li><li class="sidebar-item__anchor" title="CLI Alternatives"><a class="" href="/guides/production/#cli-alternatives">CLI Alternatives</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/lazy-loading/">Lazy Loading</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Dynamic Import Example"><a class="" href="/guides/lazy-loading/#dynamic-import-example">Dynamic Import Example</a></li><li class="sidebar-item__anchor" title="Defer Import Example"><a class="" href="/guides/lazy-loading/#defer-import-example">Defer Import Example</a></li><li class="sidebar-item__anchor" title="Frameworks"><a class="" href="/guides/lazy-loading/#frameworks">Frameworks</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/ecma-script-modules/">ECMAScript Modules</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Exporting"><a class="" href="/guides/ecma-script-modules/#exporting">Exporting</a></li><li class="sidebar-item__anchor" title="Importing"><a class="" href="/guides/ecma-script-modules/#importing">Importing</a></li><li class="sidebar-item__anchor" title="Flagging modules as ESM"><a class="" href="/guides/ecma-script-modules/#flagging-modules-as-esm">Flagging modules as ESM</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/shimming/">Shimming</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Shimming Globals"><a class="" href="/guides/shimming/#shimming-globals">Shimming Globals</a></li><li class="sidebar-item__anchor" title="Granular Shimming"><a class="" href="/guides/shimming/#granular-shimming">Granular Shimming</a></li><li class="sidebar-item__anchor" title="Global Exports"><a class="" href="/guides/shimming/#global-exports">Global Exports</a></li><li class="sidebar-item__anchor" title="Loading Polyfills"><a class="" href="/guides/shimming/#loading-polyfills">Loading Polyfills</a></li><li class="sidebar-item__anchor" title="Further Optimizations"><a class="" href="/guides/shimming/#further-optimizations">Further Optimizations</a></li><li class="sidebar-item__anchor" title="Node Built-Ins"><a class="" href="/guides/shimming/#node-built-ins">Node Built-Ins</a></li><li class="sidebar-item__anchor" title="Other Utilities"><a class="" href="/guides/shimming/#other-utilities">Other Utilities</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/typescript/">TypeScript</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Basic Setup"><a class="" href="/guides/typescript/#basic-setup">Basic Setup</a></li><li class="sidebar-item__anchor" title="Ways to Use TypeScript in webpack.config.ts"><a class="" href="/guides/typescript/#ways-to-use-typescript-in-webpackconfigts">Ways to Use TypeScript in webpack.config.ts</a></li><li class="sidebar-item__anchor" title="Loader"><a class="" href="/guides/typescript/#loader">Loader</a></li><li class="sidebar-item__anchor" title="Source Maps"><a class="" href="/guides/typescript/#source-maps">Source Maps</a></li><li class="sidebar-item__anchor" title="Client types"><a class="" href="/guides/typescript/#client-types">Client types</a></li><li class="sidebar-item__anchor" title="Using Third Party Libraries"><a class="" href="/guides/typescript/#using-third-party-libraries">Using Third Party Libraries</a></li><li class="sidebar-item__anchor" title="Importing Other Assets"><a class="" href="/guides/typescript/#importing-other-assets">Importing Other Assets</a></li><li class="sidebar-item__anchor" title="Build Performance"><a class="" href="/guides/typescript/#build-performance">Build Performance</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/web-workers/">Web Workers</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Syntax"><a class="" href="/guides/web-workers/#syntax">Syntax</a></li><li class="sidebar-item__anchor" title="Example"><a class="" href="/guides/web-workers/#example">Example</a></li><li class="sidebar-item__anchor" title="Node.js"><a class="" href="/guides/web-workers/#nodejs">Node.js</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/progressive-web-application/">Progressive Web Application</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="We Don&#x27;t Work Offline Now"><a class="" href="/guides/progressive-web-application/#we-dont-work-offline-now">We Don&#x27;t Work Offline Now</a></li><li class="sidebar-item__anchor" title="Adding Workbox"><a class="" href="/guides/progressive-web-application/#adding-workbox">Adding Workbox</a></li><li class="sidebar-item__anchor" title="Registering Our Service Worker"><a class="" href="/guides/progressive-web-application/#registering-our-service-worker">Registering Our Service Worker</a></li><li class="sidebar-item__anchor" title="Conclusion"><a class="" href="/guides/progressive-web-application/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/public-path/">Public Path</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Use Cases"><a class="" href="/guides/public-path/#use-cases">Use Cases</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Environment Based"><a class="" href="/guides/public-path/#environment-based">Environment Based</a></li><li class="sidebar-item__anchor" title="On The Fly"><a class="" href="/guides/public-path/#on-the-fly">On The Fly</a></li><li class="sidebar-item__anchor" title="Automatic publicPath"><a class="" href="/guides/public-path/#automatic-publicpath">Automatic publicPath</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/integrations/">Integrations</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="NPM Scripts"><a class="" href="/guides/integrations/#npm-scripts">NPM Scripts</a></li><li class="sidebar-item__anchor" title="Grunt"><a class="" href="/guides/integrations/#grunt">Grunt</a></li><li class="sidebar-item__anchor" title="Gulp"><a class="" href="/guides/integrations/#gulp">Gulp</a></li><li class="sidebar-item__anchor" title="Mocha"><a class="" href="/guides/integrations/#mocha">Mocha</a></li><li class="sidebar-item__anchor" title="Karma"><a class="" href="/guides/integrations/#karma">Karma</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/asset-modules/">Asset Modules</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Public Path"><a class="" href="/guides/asset-modules/#public-path">Public Path</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="On The Fly Override"><a class="" href="/guides/asset-modules/#on-the-fly-override">On The Fly Override</a></li></ul></li><li class="sidebar-item__anchor" title="Resource assets"><a class="" href="/guides/asset-modules/#resource-assets">Resource assets</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Custom output filename"><a class="" href="/guides/asset-modules/#custom-output-filename">Custom output filename</a></li></ul></li><li class="sidebar-item__anchor" title="Inlining assets"><a class="" href="/guides/asset-modules/#inlining-assets">Inlining assets</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Custom data URI generator"><a class="" href="/guides/asset-modules/#custom-data-uri-generator">Custom data URI generator</a></li></ul></li><li class="sidebar-item__anchor" title="Source assets"><a class="" href="/guides/asset-modules/#source-assets">Source assets</a></li><li class="sidebar-item__anchor" title="URL assets"><a class="" href="/guides/asset-modules/#url-assets">URL assets</a></li><li class="sidebar-item__anchor" title="General asset type"><a class="" href="/guides/asset-modules/#general-asset-type">General asset type</a></li><li class="sidebar-item__anchor" title="Replacing Inline Loader Syntax"><a class="" href="/guides/asset-modules/#replacing-inline-loader-syntax">Replacing Inline Loader Syntax</a></li><li class="sidebar-item__anchor" title="Disable emitting assets"><a class="" href="/guides/asset-modules/#disable-emitting-assets">Disable emitting assets</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/entry-advanced/">Advanced entry</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Multiple file types per entry"><a class="" href="/guides/entry-advanced/#multiple-file-types-per-entry">Multiple file types per entry</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/package-exports/">Package exports</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="General syntax"><a class="" href="/guides/package-exports/#general-syntax">General syntax</a></li><li class="sidebar-item__anchor" title="Alternatives"><a class="" href="/guides/package-exports/#alternatives">Alternatives</a></li><li class="sidebar-item__anchor" title="Conditional syntax"><a class="" href="/guides/package-exports/#conditional-syntax">Conditional syntax</a></li><li class="sidebar-item__anchor" title="Abbreviation"><a class="" href="/guides/package-exports/#abbreviation">Abbreviation</a></li><li class="sidebar-item__anchor" title="Notes about ordering"><a class="" href="/guides/package-exports/#notes-about-ordering">Notes about ordering</a></li><li class="sidebar-item__anchor" title="Support"><a class="" href="/guides/package-exports/#support">Support</a></li><li class="sidebar-item__anchor" title="Conditions"><a class="" href="/guides/package-exports/#conditions">Conditions</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Reference syntax"><a class="" href="/guides/package-exports/#reference-syntax">Reference syntax</a></li><li class="sidebar-item__anchor" title="Optimizations"><a class="" href="/guides/package-exports/#optimizations">Optimizations</a></li><li class="sidebar-item__anchor" title="Target environment"><a class="" href="/guides/package-exports/#target-environment">Target environment</a></li><li class="sidebar-item__anchor" title="Conditions: Preprocessor and runtimes"><a class="" href="/guides/package-exports/#conditions-preprocessor-and-runtimes">Conditions: Preprocessor and runtimes</a></li><li class="sidebar-item__anchor" title="Conditions: Custom"><a class="" href="/guides/package-exports/#conditions-custom">Conditions: Custom</a></li></ul></li><li class="sidebar-item__anchor" title="Common patterns"><a class="" href="/guides/package-exports/#common-patterns">Common patterns</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Target environment independent packages"><a class="" href="/guides/package-exports/#target-environment-independent-packages">Target environment independent packages</a></li><li class="sidebar-item__anchor" title="Providing devtools or production optimizations"><a class="" href="/guides/package-exports/#providing-devtools-or-production-optimizations">Providing devtools or production optimizations</a></li><li class="sidebar-item__anchor" title="Providing different versions depending on target environment"><a class="" href="/guides/package-exports/#providing-different-versions-depending-on-target-environment">Providing different versions depending on target environment</a></li><li class="sidebar-item__anchor" title="Combining patterns"><a class="" href="/guides/package-exports/#combining-patterns">Combining patterns</a></li></ul></li><li class="sidebar-item__anchor" title="Guidelines"><a class="" href="/guides/package-exports/#guidelines">Guidelines</a></li></ul></div></div></div></nav><section class="page"><div class="markdown"><h1>Printable</h1><div id="md-content"><h1><span id="guides"></span>Guides<a href="#guides" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>This section contains guides for understanding and mastering the wide variety of tools and features that webpack offers. The first is a guide that takes you through <a href="/guides/getting-started/">getting started</a>.</p>
<p>The guides get more advanced as you go on. Most serve as a starting point, and once completed you should feel more comfortable diving into the actual <a href="/configuration/">documentation</a>.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>The output shown from running webpack in the guides may differ slightly from the output of newer versions. This is to be expected. As long as the bundles look similar and run correctly, then there shouldn&#x27;t be any issues. If you do come across an example that seems to be broken by a new version, please <a href="https://github.com/webpack/webpack.js.org/issues/new/choose">create an issue</a> and we will do our best to resolve the discrepancy.</p></aside>
<h1><span id="getting-started"></span>Getting Started<a href="#getting-started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>Webpack is used to compile JavaScript modules. Once <a href="/guides/installation">installed</a>, you can interact with webpack either from its <a href="/api/cli">CLI</a> or <a href="/api/node">API</a>. If you&#x27;re still new to webpack, please read through the <a href="/concepts">core concepts</a> and <a href="/comparison">this comparison</a> to learn why you might use it over the other tools that are out in the community.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>The minimum supported Node.js version to run webpack 5 is 10.13.0 (LTS)</p></aside>
<aside class="preview"><h6 class="preview__prefix">live preview</h6><p>Check out this guide live on StackBlitz.</p><a href="https://stackblitz.com/github/webpack/webpack.js.org/tree/main/examples/getting-started?terminal=" target="_blank" rel="noopener noreferrer"><img src="/open-in-stackblitz-button.d5768454f28617a0.svg" alt="Open in StackBlitz"/></a></aside>
<h2><span id="basic-setup"></span>Basic Setup<a href="#basic-setup" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>First let&#x27;s create a directory, initialize npm, <a href="/guides/installation/#local-installation">install webpack locally</a>, and install the <a href="https://github.com/webpack/webpack-cli"><code>webpack-cli</code></a> (the tool used to run webpack on the command line):</p>
<pre><code class="hljs language-bash"><span class="token function">mkdir</span> webpack-demo
<span class="token builtin class-name">cd</span> webpack-demo
<span class="token function">npm</span> init -y
<span class="token function">npm</span> <span class="token function">install</span> webpack webpack-cli --save-dev</code></pre>
<p>Throughout the Guides we will use <strong><code>diff</code></strong> blocks to show you what changes we&#x27;re making to directories, files, and code. For instance:</p>
<pre><code class="hljs language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> this is a new line you shall copy into your code
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> and this is a line to be removed from your code
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> and this is a line not to touch.</span></span></code></pre>
<p>Now we&#x27;ll create the following directory structure, files and their contents:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- index.html
</span><span class="token prefix inserted">+</span><span class="token line"> |- /src
</span><span class="token prefix inserted">+</span><span class="token line">   |- index.js</span></span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">function</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;div&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Lodash, currently included via a script, is required for this line to work</span>
  element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27; &#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>index.html</strong></p>
<pre><code class="hljs language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Getting Started<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/lodash@4.17.20<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./src/index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
<p>We also need to adjust our <code>package.json</code> file in order to make sure we mark our package as <code>private</code>, as well as removing the <code>main</code> entry. This is to prevent an accidental publish of your code.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>If you want to learn more about the inner workings of <code>package.json</code>, then we recommend reading the <a href="https://docs.npmjs.com/files/package.json">npm documentation</a>.</p></aside>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">{
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;name&quot;: &quot;webpack-demo&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;version&quot;: &quot;1.0.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;description&quot;: &quot;&quot;,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  &quot;main&quot;: &quot;index.js&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &quot;private&quot;: true,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  &quot;scripts&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;keywords&quot;: [],
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;author&quot;: &quot;&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;license&quot;: &quot;MIT&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;devDependencies&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack&quot;: &quot;^5.38.1&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack-cli&quot;: &quot;^4.7.2&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  }
</span><span class="token prefix unchanged"> </span><span class="token line">}</span></span></code></pre>
<p>In this example, there are implicit dependencies between the <code>&lt;script&gt;</code> tags. Our <code>index.js</code> file depends on <code>lodash</code> being included in the page before it runs. This is because <code>index.js</code> never explicitly declared a need for <code>lodash</code>; it assumes that the global variable <code>_</code> exists.</p>
<p>There are problems with managing JavaScript projects this way:</p>
<ul>
<li>It is not immediately apparent that the script depends on an external library.</li>
<li>If a dependency is missing, or included in the wrong order, the application will not function properly.</li>
<li>If a dependency is included but not used, the browser will be forced to download unnecessary code.</li>
</ul>
<p>Let&#x27;s use webpack to manage these scripts instead.</p>
<h2><span id="creating-a-bundle"></span>Creating a Bundle<a href="#creating-a-bundle" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>First we&#x27;ll tweak our directory structure slightly, separating the &quot;source&quot; code (<code>./src</code>) from our &quot;distribution&quot; code (<code>./dist</code>). The &quot;source&quot; code is the code that we&#x27;ll write and edit. The &quot;distribution&quot; code is the minimized and optimized <code>output</code> of our build process that will eventually be loaded in the browser. Tweak the directory structure as follows:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- /dist
</span><span class="token prefix inserted">+</span><span class="token line">   |- index.html
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> |- index.html
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js</span></span></code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>You may have noticed that <code>index.html</code> was created manually, even though it is now placed in the <code>dist</code> directory. Later on in <a href="/guides/output-management/#setting-up-htmlwebpackplugin">another guide</a>, we will generate <code>index.html</code> rather than edit it manually. Once this is done, it should be safe to empty the <code>dist</code> directory and to regenerate all the files within it.</p></aside>
<p>To bundle the <code>lodash</code> dependency with <code>index.js</code>, we&#x27;ll need to install the library locally:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save lodash</code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>When installing a package that will be bundled into your production bundle, you should use <code>npm install --save</code>. If you&#x27;re installing a package for development purposes (e.g. a linter, testing libraries, etc.) then you should use <code>npm install --save-dev</code>. More information can be found in the <a href="https://docs.npmjs.com/cli/install">npm documentation</a>.</p></aside>
<p>Now, let&#x27;s import <code>lodash</code> in our script:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import _ from &#x27;lodash&#x27;;
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  // Lodash, currently included via a script, is required for this line to work
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  // Lodash, now imported by this script
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());</span></span></code></pre>
<p>Now, since we&#x27;ll be bundling our scripts, we have to update our <code>index.html</code> file. Let&#x27;s remove the lodash <code>&lt;script&gt;</code>, as we now <code>import</code> it, and modify the other <code>&lt;script&gt;</code> tag to load the bundle, instead of the raw <code>./src</code> file:</p>
<p><strong>dist/index.html</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">&lt;!DOCTYPE html&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">&lt;html&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">  &lt;head&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">    &lt;meta charset=&quot;utf-8&quot; /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">    &lt;title&gt;Getting Started&lt;/title&gt;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    &lt;script src=&quot;https://unpkg.com/lodash@4.17.20&quot;&gt;&lt;/script&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  &lt;/head&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">  &lt;body&gt;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    &lt;script src=&quot;./src/index.js&quot;&gt;&lt;/script&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;script src=&quot;main.js&quot;&gt;&lt;/script&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  &lt;/body&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">&lt;/html&gt;</span></span></code></pre>
<p>In this setup, <code>index.js</code> explicitly requires <code>lodash</code> to be present, and binds it as <code>_</code> (no global scope pollution). By stating what dependencies a module needs, webpack can use this information to build a dependency graph. It then uses the graph to generate an optimized bundle where scripts will be executed in the correct order.</p>
<p>With that said, let&#x27;s run <code>npx webpack</code>, which will take our script at <code>src/index.js</code> as the <a href="/concepts/entry-points">entry point</a>, and will generate <code>dist/main.js</code> as the <a href="/concepts/output">output</a>. The <code>npx</code> command, which ships with Node 8.2/npm 5.2.0 or higher, runs the webpack binary (<code>./node_modules/.bin/webpack</code>) of the webpack package we installed in the beginning:</p>
<pre><code class="hljs language-bash">$ npx webpack
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
asset main.js <span class="token number">69.3</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span> <span class="token number">1</span> related asset
runtime modules <span class="token number">1000</span> bytes <span class="token number">5</span> modules
cacheable modules <span class="token number">530</span> KiB
  ./src/index.js <span class="token number">257</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">1851</span> ms</code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Your output may vary a bit, but if the build is successful then you are good to go.</p></aside>
<p>Open <code>index.html</code> from the <code>dist</code> directory in your browser and, if everything went right, you should see the following text: <code>&#x27;Hello webpack&#x27;</code>.</p>
<h2><span id="modules"></span>Modules<a href="#modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"><code>import</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export"><code>export</code></a> statements have been standardized in <a href="https://babeljs.io/docs/en/learn/">ES2015</a>. They are supported in most of the browsers at this moment, however there are some browsers that don&#x27;t recognize the new syntax. But don&#x27;t worry, webpack does support them out of the box.</p>
<p>Behind the scenes, webpack actually &quot;<strong>transpiles</strong>&quot; the code so that older browsers can also run it. If you inspect <code>dist/main.js</code>, you might be able to see how webpack does this, it&#x27;s quite ingenious! Besides <code>import</code> and <code>export</code>, webpack supports various other module syntaxes as well, see <a href="/api/module-methods">Module API</a> for more information.</p>
<p>Note that webpack will not alter any code other than <code>import</code> and <code>export</code> statements. If you are using other <a href="http://es6-features.org/">ES2015 features</a>, make sure to <a href="/loaders/#transpiling">use a transpiler</a> such as <a href="https://babeljs.io/">Babel</a> via webpack&#x27;s <a href="/concepts/loaders/">loader system</a>.</p>
<h2><span id="using-a-configuration"></span>Using a Configuration<a href="#using-a-configuration" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>As of version 4, webpack doesn&#x27;t require any configuration, but most projects will need a more complex setup, which is why webpack supports a <a href="/concepts/configuration">configuration file</a>. This is much more efficient than having to manually type in a lot of commands in the terminal, so let&#x27;s create one:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- webpack.config.js
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.html
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js</span></span></code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">&#x27;./src/index.js&#x27;</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;main.js&#x27;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;dist&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Now, let&#x27;s run the build again but instead using our new configuration file:</p>
<pre><code class="hljs language-bash">$ npx webpack --config webpack.config.js
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
asset main.js <span class="token number">69.3</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span> <span class="token number">1</span> related asset
runtime modules <span class="token number">1000</span> bytes <span class="token number">5</span> modules
cacheable modules <span class="token number">530</span> KiB
  ./src/index.js <span class="token number">257</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">1934</span> ms</code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>If a <code>webpack.config.js</code> is present, the <code>webpack</code> command picks it up by default. We use the <code>--config</code> option here only to show that you can pass a configuration of any name. This will be useful for more complex configurations that need to be split into multiple files.</p></aside>
<p>A configuration file allows far more flexibility than CLI usage. We can specify loader rules, plugins, resolve options and many other enhancements this way. See the <a href="/configuration">configuration documentation</a> to learn more.</p>
<h2><span id="npm-scripts"></span>NPM Scripts<a href="#npm-scripts" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Given it&#x27;s not particularly fun to run a local copy of webpack from the CLI, we can set up a little shortcut. Let&#x27;s adjust our <em>package.json</em> by adding an <a href="https://docs.npmjs.com/misc/scripts">npm script</a>:</p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">{
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;name&quot;: &quot;webpack-demo&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;version&quot;: &quot;1.0.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;description&quot;: &quot;&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;private&quot;: true,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;scripts&quot;: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
</span><span class="token prefix inserted">+</span><span class="token line">    &quot;build&quot;: &quot;webpack&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;keywords&quot;: [],
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;author&quot;: &quot;&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;license&quot;: &quot;ISC&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;devDependencies&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack&quot;: &quot;^5.4.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack-cli&quot;: &quot;^4.2.0&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;dependencies&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;lodash&quot;: &quot;^4.17.20&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  }
</span><span class="token prefix unchanged"> </span><span class="token line">}</span></span></code></pre>
<p>Now the <code>npm run build</code> command can be used in place of the <code>npx</code> command we used earlier. Note that within <code>scripts</code> we can reference locally installed npm packages by name the same way we did with <code>npx</code>. This convention is the standard in most npm-based projects because it allows all contributors to use the same set of common scripts.</p>
<p>Now run the following command and see if your script alias works:</p>
<pre><code class="hljs language-bash">$ <span class="token function">npm</span> run build

<span class="token punctuation">..</span>.

<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
asset main.js <span class="token number">69.3</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span> <span class="token number">1</span> related asset
runtime modules <span class="token number">1000</span> bytes <span class="token number">5</span> modules
cacheable modules <span class="token number">530</span> KiB
  ./src/index.js <span class="token number">257</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">1940</span> ms</code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Custom parameters can be passed to webpack by adding two dashes between the <code>npm run build</code> command and your parameters, e.g. <code>npm run build -- --color</code>.</p></aside>
<h2><span id="conclusion"></span>Conclusion<a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Now that you have a basic build together you should move on to the next guide <a href="/guides/asset-management"><code>Asset Management</code></a> to learn how to manage assets like images and fonts with webpack. At this point, your project should look like this:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- package-lock.json
|- webpack.config.js
|- /dist
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- main.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- index.html
</span></span>|- /src
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- index.js
</span></span>|- /node_modules</code></pre>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>Do not compile untrusted code with webpack. It could lead to execution of malicious code on your computer, remote servers, or in the Web browsers of the end users of your application.</p></aside>
<p>If you want to learn more about webpack&#x27;s design, you can check out the <a href="/concepts">basic concepts</a> and <a href="/configuration">configuration</a> pages. Furthermore, the <a href="/api">API</a> section digs into the various interfaces webpack offers.</p>
<h1><span id="asset-management"></span>Asset Management<a href="#asset-management" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>If you&#x27;ve been following the guides from the start, you will now have a small project that shows &quot;Hello webpack&quot;. Now let&#x27;s try to incorporate some other assets, like images, to see how they can be handled.</p>
<p>Prior to webpack, front-end developers would use tools like <a href="https://gruntjs.com/">grunt</a> and <a href="https://gulpjs.com/">gulp</a> to process these assets and move them from their <code>/src</code> folder into their <code>/dist</code> or <code>/build</code> directory. The same idea was used for JavaScript modules, but tools like webpack will <strong>dynamically bundle</strong> all dependencies (creating what&#x27;s known as a <a href="/concepts/dependency-graph">dependency graph</a>). This is great because every module now <em>explicitly states its dependencies</em> and we&#x27;ll avoid bundling modules that aren&#x27;t in use.</p>
<p>One of the coolest webpack features is that you can also <em>include any other type of file</em>, besides JavaScript, for which there is a loader or built-in <a href="/guides/asset-modules/">Asset Modules</a> support. This means that the same benefits listed above for JavaScript (e.g. explicit dependencies) can be applied to everything used in building a website or web app. Let&#x27;s start with CSS, as you may already be familiar with that setup.</p>
<h2><span id="setup"></span>Setup<a href="#setup" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Let&#x27;s make a minor change to our project before we get started:</p>
<p><strong>dist/index.html</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">&lt;!DOCTYPE html&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">&lt;html&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">  &lt;head&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">    &lt;meta charset=&quot;utf-8&quot; /&gt;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    &lt;title&gt;Getting Started&lt;/title&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;title&gt;Asset Management&lt;/title&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  &lt;/head&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">  &lt;body&gt;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    &lt;script src=&quot;main.js&quot;&gt;&lt;/script&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  &lt;/body&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">&lt;/html&gt;</span></span></code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    filename: &#x27;main.js&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    filename: &#x27;bundle.js&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<h2><span id="loading-css"></span>Loading CSS<a href="#loading-css" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>In order to <code>import</code> a CSS file from within a JavaScript module, you need to install and add the <a href="/loaders/style-loader">style-loader</a> and <a href="/loaders/css-loader">css-loader</a> to your <a href="/configuration/module"><code>module</code> configuration</a>:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev style-loader css-loader</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  module: {
</span><span class="token prefix inserted">+</span><span class="token line">    rules: [
</span><span class="token prefix inserted">+</span><span class="token line">      {
</span><span class="token prefix inserted">+</span><span class="token line">        test: /\.css$/i,
</span><span class="token prefix inserted">+</span><span class="token line">        use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;],
</span><span class="token prefix inserted">+</span><span class="token line">      },
</span><span class="token prefix inserted">+</span><span class="token line">    ],
</span><span class="token prefix inserted">+</span><span class="token line">  },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>Module loaders can be chained. Each loader in the chain applies transformations to the processed resource. A chain is executed in reverse order. The first loader passes its result (resource with applied transformations) to the next one, and so forth. Finally, webpack expects JavaScript to be returned by the last loader in the chain.</p>
<p>The above order of loaders should be maintained: <a href="/loaders/style-loader"><code>&#x27;style-loader&#x27;</code></a> comes first and followed by <a href="/loaders/css-loader"><code>&#x27;css-loader&#x27;</code></a>. If this convention is not followed, webpack is likely to throw errors.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>webpack uses a regular expression to determine which files it should look for and serve to a specific loader. In this case, any file that ends with <code>.css</code> will be served to the <code>style-loader</code> and the <code>css-loader</code>.</p></aside>
<p>This enables you to <code>import &#x27;./style.css&#x27;</code> into the file that depends on that styling. Now, when that module is run, a <code>&lt;style&gt;</code> tag with the stringified css will be inserted into the <code>&lt;head&gt;</code> of your html file.</p>
<p>Let&#x27;s try it out by adding a new <code>style.css</code> file to our project and import it in our <code>index.js</code>:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- webpack.config.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line">   |- bundle.js
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.html
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   |- style.css
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules</span></span></code></pre>
<p><strong>src/style.css</strong></p>
<pre><code class="hljs language-css"><span class="token selector">.hello</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">import _ from &#x27;lodash&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import &#x27;./style.css&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  // Lodash, now imported by this script
</span><span class="token prefix unchanged"> </span><span class="token line">  element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  element.classList.add(&#x27;hello&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());</span></span></code></pre>
<p>Now run your build command:</p>
<pre><code class="hljs language-bash">$ <span class="token function">npm</span> run build

<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
asset bundle.js <span class="token number">72.6</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span> <span class="token number">1</span> related asset
runtime modules <span class="token number">1000</span> bytes <span class="token number">5</span> modules
orphan modules <span class="token number">326</span> bytes <span class="token punctuation">[</span>orphan<span class="token punctuation">]</span> <span class="token number">1</span> module
cacheable modules <span class="token number">539</span> KiB
  modules by path ./node_modules/ <span class="token number">538</span> KiB
    ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js <span class="token number">6.67</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./node_modules/css-loader/dist/runtime/api.js <span class="token number">1.57</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  modules by path ./src/ <span class="token number">965</span> bytes
    ./src/index.js + <span class="token number">1</span> modules <span class="token number">639</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./node_modules/css-loader/dist/cjs.js<span class="token operator">!</span>./src/style.css <span class="token number">326</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">2231</span> ms</code></pre>
<p>Open up <code>dist/index.html</code> in your browser again and you should see that <code>Hello webpack</code> is now styled in red. To see what webpack did, inspect the page (don&#x27;t view the page source, as it won&#x27;t show you the result, because the <code>&lt;style&gt;</code> tag is dynamically created by JavaScript) and look at the page&#x27;s head tags. It should contain the style block that we imported in <code>index.js</code>.</p>
<p>Note that you can, and in most cases should, <a href="/plugins/mini-css-extract-plugin/#minimizing-for-production">minimize css</a> for better load times in production. On top of that, loaders exist for pretty much any flavor of CSS you can think of – <a href="/loaders/postcss-loader">postcss</a>, <a href="/loaders/sass-loader">sass</a>, and <a href="/loaders/less-loader">less</a> to name a few.</p>
<h2><span id="loading-images"></span>Loading Images<a href="#loading-images" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>So now we&#x27;re pulling in our CSS, but what about our images like backgrounds and icons? As of webpack 5, using the built-in <a href="/guides/asset-modules/">Asset Modules</a> we can easily incorporate those in our system as well:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  module: {
</span><span class="token prefix unchanged"> </span><span class="token line">    rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: /\.css$/i,
</span><span class="token prefix unchanged"> </span><span class="token line">        use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;],
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      {
</span><span class="token prefix inserted">+</span><span class="token line">        test: /\.(png|svg|jpg|jpeg|gif)$/i,
</span><span class="token prefix inserted">+</span><span class="token line">        type: &#x27;asset/resource&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">      },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    ],
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>Now, when you <code>import MyImage from &#x27;./my-image.png&#x27;</code>, that image will be processed and added to your <code>output</code> directory <em>and</em> the <code>MyImage</code> variable will contain the final url of that image after processing. When using the <a href="/loaders/css-loader">css-loader</a>, as shown above, a similar process will occur for <code>url(&#x27;./my-image.png&#x27;)</code> within your CSS. The loader will recognize this is a local file, and replace the <code>&#x27;./my-image.png&#x27;</code> path with the final path to the image in your <code>output</code> directory. The <a href="/loaders/html-loader">html-loader</a> handles <code>&lt;img src=&quot;./my-image.png&quot; /&gt;</code> in the same manner.</p>
<p>Let&#x27;s add an image to our project and see how this works, you can use any image you like:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- webpack.config.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line">   |- bundle.js
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.html
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   |- icon.png
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   |- style.css
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules</span></span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">import _ from &#x27;lodash&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line">import &#x27;./style.css&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import Icon from &#x27;./icon.png&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  // Lodash, now imported by this script
</span><span class="token prefix unchanged"> </span><span class="token line">  element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">  element.classList.add(&#x27;hello&#x27;);
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  // Add the image to our existing div.
</span><span class="token prefix inserted">+</span><span class="token line">  const myIcon = new Image();
</span><span class="token prefix inserted">+</span><span class="token line">  myIcon.src = Icon;
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">  element.appendChild(myIcon);
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());</span></span></code></pre>
<p><strong>src/style.css</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">.hello {
</span><span class="token prefix unchanged"> </span><span class="token line">  color: red;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  background: url(&#x27;./icon.png&#x27;);
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}</span></span></code></pre>
<p>Let&#x27;s create a new build and open up the <code>index.html</code> file again:</p>
<pre><code class="hljs language-bash">$ <span class="token function">npm</span> run build

<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
assets by status <span class="token number">9.88</span> KiB <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">1</span> asset
asset bundle.js <span class="token number">73.4</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span> <span class="token number">1</span> related asset
runtime modules <span class="token number">1.82</span> KiB <span class="token number">6</span> modules
orphan modules <span class="token number">326</span> bytes <span class="token punctuation">[</span>orphan<span class="token punctuation">]</span> <span class="token number">1</span> module
cacheable modules <span class="token number">540</span> KiB <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">9.88</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
  modules by path ./node_modules/ <span class="token number">539</span> KiB
    modules by path ./node_modules/css-loader/dist/runtime/*.js <span class="token number">2.38</span> KiB
      ./node_modules/css-loader/dist/runtime/api.js <span class="token number">1.57</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
      ./node_modules/css-loader/dist/runtime/getUrl.js <span class="token number">830</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js <span class="token number">6.67</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  modules by path ./src/ <span class="token number">1.45</span> KiB <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">9.88</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
    ./src/index.js + <span class="token number">1</span> modules <span class="token number">794</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/icon.png <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">9.88</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./node_modules/css-loader/dist/cjs.js<span class="token operator">!</span>./src/style.css <span class="token number">648</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">1972</span> ms</code></pre>
<p>If all went well, you should now see your icon as a repeating background, as well as an <code>img</code> element beside our <code>Hello webpack</code> text. If you inspect this element, you&#x27;ll see that the actual filename has changed to something like <code>29822eaa871e8eadeaa4.png</code>. This means webpack found our file in the <code>src</code> folder and processed it!</p>
<h2><span id="loading-fonts"></span>Loading Fonts<a href="#loading-fonts" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>So what about other assets like fonts? The Asset Modules will take any file you load through them and output it to your build directory. This means we can use them for any kind of file, including fonts. Let&#x27;s update our <code>webpack.config.js</code> to handle font files:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  module: {
</span><span class="token prefix unchanged"> </span><span class="token line">    rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: /\.css$/i,
</span><span class="token prefix unchanged"> </span><span class="token line">        use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;],
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: /\.(png|svg|jpg|jpeg|gif)$/i,
</span><span class="token prefix unchanged"> </span><span class="token line">        type: &#x27;asset/resource&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      {
</span><span class="token prefix inserted">+</span><span class="token line">        test: /\.(woff|woff2|eot|ttf|otf)$/i,
</span><span class="token prefix inserted">+</span><span class="token line">        type: &#x27;asset/resource&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">      },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    ],
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>Add some font files to your project:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- webpack.config.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line">   |- bundle.js
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.html
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   |- my-font.woff
</span><span class="token prefix inserted">+</span><span class="token line">   |- my-font.woff2
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   |- icon.png
</span><span class="token prefix unchanged"> </span><span class="token line">   |- style.css
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules</span></span></code></pre>
<p>With the loader configured and fonts in place, you can incorporate them via an <code>@font-face</code> declaration. The local <code>url(...)</code> directive will be picked up by webpack, as it was with the image:</p>
<p><strong>src/style.css</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">@font-face {
</span><span class="token prefix inserted">+</span><span class="token line">  font-family: &#x27;MyFont&#x27;;
</span><span class="token prefix inserted">+</span><span class="token line">  src: url(&#x27;./my-font.woff2&#x27;) format(&#x27;woff2&#x27;),
</span><span class="token prefix inserted">+</span><span class="token line">    url(&#x27;./my-font.woff&#x27;) format(&#x27;woff&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line">  font-weight: 600;
</span><span class="token prefix inserted">+</span><span class="token line">  font-style: normal;
</span><span class="token prefix inserted">+</span><span class="token line">}
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">.hello {
</span><span class="token prefix unchanged"> </span><span class="token line">  color: red;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  font-family: &#x27;MyFont&#x27;;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  background: url(&#x27;./icon.png&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">}</span></span></code></pre>
<p>Now run a new build and let&#x27;s see if webpack handled our fonts:</p>
<pre><code class="hljs language-bash">$ <span class="token function">npm</span> run build

<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
assets by status <span class="token number">9.88</span> KiB <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">1</span> asset
assets by info <span class="token number">33.2</span> KiB <span class="token punctuation">[</span>immutable<span class="token punctuation">]</span>
  asset 55055dbfc7c6a83f60ba.woff <span class="token number">18.8</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>immutable<span class="token punctuation">]</span> <span class="token punctuation">[</span>from: src/my-font.woff<span class="token punctuation">]</span> <span class="token punctuation">(</span>auxiliary name: main<span class="token punctuation">)</span>
  asset 8f717b802eaab4d7fb94.woff2 <span class="token number">14.5</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>immutable<span class="token punctuation">]</span> <span class="token punctuation">[</span>from: src/my-font.woff2<span class="token punctuation">]</span> <span class="token punctuation">(</span>auxiliary name: main<span class="token punctuation">)</span>
asset bundle.js <span class="token number">73.7</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span> <span class="token number">1</span> related asset
runtime modules <span class="token number">1.82</span> KiB <span class="token number">6</span> modules
orphan modules <span class="token number">326</span> bytes <span class="token punctuation">[</span>orphan<span class="token punctuation">]</span> <span class="token number">1</span> module
cacheable modules <span class="token number">541</span> KiB <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">43.1</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
  javascript modules <span class="token number">541</span> KiB
    modules by path ./node_modules/ <span class="token number">539</span> KiB
      modules by path ./node_modules/css-loader/dist/runtime/*.js <span class="token number">2.38</span> KiB <span class="token number">2</span> modules
      ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
      ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js <span class="token number">6.67</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    modules by path ./src/ <span class="token number">1.98</span> KiB
      ./src/index.js + <span class="token number">1</span> modules <span class="token number">794</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
      ./node_modules/css-loader/dist/cjs.js<span class="token operator">!</span>./src/style.css <span class="token number">1.21</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  asset modules <span class="token number">126</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">43.1</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
    ./src/icon.png <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">9.88</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/my-font.woff2 <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">14.5</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/my-font.woff <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">18.8</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">2142</span> ms</code></pre>
<p>Open up <code>dist/index.html</code> again and see if our <code>Hello webpack</code> text has changed to the new font. If all is well, you should see the changes.</p>
<h2><span id="loading-data"></span>Loading Data<a href="#loading-data" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Another useful asset that can be loaded is data, like JSON files, CSVs, TSVs, and XML. Support for JSON is actually built-in, similar to NodeJS, meaning <code>import Data from &#x27;./data.json&#x27;</code> will work by default. To import CSVs, TSVs, and XML you could use the <a href="https://github.com/theplatapi/csv-loader">csv-loader</a> and <a href="https://github.com/gisikw/xml-loader">xml-loader</a>. Let&#x27;s handle loading all three:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev csv-loader xml-loader</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  module: {
</span><span class="token prefix unchanged"> </span><span class="token line">    rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: /\.css$/i,
</span><span class="token prefix unchanged"> </span><span class="token line">        use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;],
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: /\.(png|svg|jpg|jpeg|gif)$/i,
</span><span class="token prefix unchanged"> </span><span class="token line">        type: &#x27;asset/resource&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: /\.(woff|woff2|eot|ttf|otf)$/i,
</span><span class="token prefix unchanged"> </span><span class="token line">        type: &#x27;asset/resource&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      {
</span><span class="token prefix inserted">+</span><span class="token line">        test: /\.(csv|tsv)$/i,
</span><span class="token prefix inserted">+</span><span class="token line">        use: [&#x27;csv-loader&#x27;],
</span><span class="token prefix inserted">+</span><span class="token line">      },
</span><span class="token prefix inserted">+</span><span class="token line">      {
</span><span class="token prefix inserted">+</span><span class="token line">        test: /\.xml$/i,
</span><span class="token prefix inserted">+</span><span class="token line">        use: [&#x27;xml-loader&#x27;],
</span><span class="token prefix inserted">+</span><span class="token line">      },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    ],
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>Add some data files to your project:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- webpack.config.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line">   |- bundle.js
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.html
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   |- data.xml
</span><span class="token prefix inserted">+</span><span class="token line">   |- data.csv
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   |- my-font.woff
</span><span class="token prefix unchanged"> </span><span class="token line">   |- my-font.woff2
</span><span class="token prefix unchanged"> </span><span class="token line">   |- icon.png
</span><span class="token prefix unchanged"> </span><span class="token line">   |- style.css
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules</span></span></code></pre>
<p><strong>src/data.xml</strong></p>
<pre><code class="hljs language-xml"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>note</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to</span><span class="token punctuation">&gt;</span></span>Mary<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>to</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>from</span><span class="token punctuation">&gt;</span></span>John<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>from</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>heading</span><span class="token punctuation">&gt;</span></span>Reminder<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>heading</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>Call Cindy on Tuesday<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>note</span><span class="token punctuation">&gt;</span></span></code></pre>
<p><strong>src/data.csv</strong></p>
<pre><code class="hljs language-csv">to,from,heading,body
Mary,John,Reminder,Call Cindy on Tuesday
Zoe,Bill,Reminder,Buy orange juice
Autumn,Lindsey,Letter,I miss you
</code></pre>
<p>Now you can <code>import</code> any one of those four types of data (JSON, CSV, TSV, XML) and the <code>Data</code> variable you import, will contain parsed JSON for consumption:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">import _ from &#x27;lodash&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line">import &#x27;./style.css&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line">import Icon from &#x27;./icon.png&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import Data from &#x27;./data.xml&#x27;;
</span><span class="token prefix inserted">+</span><span class="token line">import Notes from &#x27;./data.csv&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  // Lodash, now imported by this script
</span><span class="token prefix unchanged"> </span><span class="token line">  element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">  element.classList.add(&#x27;hello&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  // Add the image to our existing div.
</span><span class="token prefix unchanged"> </span><span class="token line">  const myIcon = new Image();
</span><span class="token prefix unchanged"> </span><span class="token line">  myIcon.src = Icon;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  element.appendChild(myIcon);
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  console.log(Data);
</span><span class="token prefix inserted">+</span><span class="token line">  console.log(Notes);
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());</span></span></code></pre>
<p>Re-run the <code>npm run build</code> command and open <code>dist/index.html</code>. If you look at the console in your developer tools, you should be able to see your imported data being logged to the console!</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>This can be especially helpful when implementing some sort of data visualization using a tool like <a href="https://github.com/d3">d3</a>. Instead of making an ajax request and parsing the data at runtime you can load it into your module during the build process so that the parsed data is ready to go as soon as the module hits the browser.</p></aside>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>Only the default export of JSON modules can be used without warning.</p></aside>
<pre><code class="hljs language-javascript"><span class="token comment">// No warning</span>
<span class="token keyword">import</span> data <span class="token keyword">from</span> <span class="token string">&#x27;./data.json&#x27;</span><span class="token punctuation">;</span>

<span class="token comment">// Warning shown, this is not allowed by the spec.</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> foo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./data.json&#x27;</span><span class="token punctuation">;</span></code></pre>
<h3><span id="customize-parser-of-json-modules"></span>Customize parser of JSON modules<a href="#customize-parser-of-json-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>It&#x27;s possible to import any <code>toml</code>, <code>yaml</code> or <code>json5</code> files as a JSON module by using a <a href="/configuration/module/#ruleparserparse">custom parser</a> instead of a specific webpack loader.</p>
<p>Let&#x27;s say you have a <code>data.toml</code>, a <code>data.yaml</code> and a <code>data.json5</code> files under <code>src</code> folder:</p>
<p><strong>src/data.toml</strong></p>
<pre><code class="hljs language-toml">title = &quot;TOML Example&quot;

[owner]
name = &quot;Tom Preston-Werner&quot;
organization = &quot;GitHub&quot;
bio = &quot;GitHub Cofounder &amp; CEO\nLikes tater tots and beer.&quot;
dob = 1979-05-27T07:32:00Z
</code></pre>
<p><strong>src/data.yaml</strong></p>
<pre><code class="hljs language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> YAML Example
<span class="token key atrule">owner</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> Tom Preston<span class="token punctuation">-</span>Werner
  <span class="token key atrule">organization</span><span class="token punctuation">:</span> GitHub
  <span class="token key atrule">bio</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
    GitHub Cofounder &amp; CEO
    Likes tater tots and beer.
  <span class="token key atrule">dob</span><span class="token punctuation">:</span> <span class="token datetime number">1979-05-27T07:32:00.000Z</span></code></pre>
<p><strong>src/data.json5</strong></p>
<pre><code class="hljs language-json5">{
  // comment
  title: &#x27;JSON5 Example&#x27;,
  owner: {
    name: &#x27;Tom Preston-Werner&#x27;,
    organization: &#x27;GitHub&#x27;,
    bio: &#x27;GitHub Cofounder &amp; CEO\n\
Likes tater tots and beer.&#x27;,
    dob: &#x27;1979-05-27T07:32:00.000Z&#x27;,
  },
}
</code></pre>
<p>Install <code>toml</code>, <code>yamljs</code> and <code>json5</code> packages first:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> toml yamljs json5 --save-dev</code></pre>
<p>And configure them in your webpack configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">const toml = require(&#x27;toml&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line">const yaml = require(&#x27;yamljs&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line">const json5 = require(&#x27;json5&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  module: {
</span><span class="token prefix unchanged"> </span><span class="token line">    rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: /\.css$/i,
</span><span class="token prefix unchanged"> </span><span class="token line">        use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;],
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: /\.(png|svg|jpg|jpeg|gif)$/i,
</span><span class="token prefix unchanged"> </span><span class="token line">        type: &#x27;asset/resource&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: /\.(woff|woff2|eot|ttf|otf)$/i,
</span><span class="token prefix unchanged"> </span><span class="token line">        type: &#x27;asset/resource&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: /\.(csv|tsv)$/i,
</span><span class="token prefix unchanged"> </span><span class="token line">        use: [&#x27;csv-loader&#x27;],
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: /\.xml$/i,
</span><span class="token prefix unchanged"> </span><span class="token line">        use: [&#x27;xml-loader&#x27;],
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      {
</span><span class="token prefix inserted">+</span><span class="token line">        test: /\.toml$/i,
</span><span class="token prefix inserted">+</span><span class="token line">        type: &#x27;json&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">        parser: {
</span><span class="token prefix inserted">+</span><span class="token line">          parse: toml.parse,
</span><span class="token prefix inserted">+</span><span class="token line">        },
</span><span class="token prefix inserted">+</span><span class="token line">      },
</span><span class="token prefix inserted">+</span><span class="token line">      {
</span><span class="token prefix inserted">+</span><span class="token line">        test: /\.yaml$/i,
</span><span class="token prefix inserted">+</span><span class="token line">        type: &#x27;json&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">        parser: {
</span><span class="token prefix inserted">+</span><span class="token line">          parse: yaml.parse,
</span><span class="token prefix inserted">+</span><span class="token line">        },
</span><span class="token prefix inserted">+</span><span class="token line">      },
</span><span class="token prefix inserted">+</span><span class="token line">      {
</span><span class="token prefix inserted">+</span><span class="token line">        test: /\.json5$/i,
</span><span class="token prefix inserted">+</span><span class="token line">        type: &#x27;json&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">        parser: {
</span><span class="token prefix inserted">+</span><span class="token line">          parse: json5.parse,
</span><span class="token prefix inserted">+</span><span class="token line">        },
</span><span class="token prefix inserted">+</span><span class="token line">      },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    ],
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">import _ from &#x27;lodash&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line">import &#x27;./style.css&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line">import Icon from &#x27;./icon.png&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line">import Data from &#x27;./data.xml&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line">import Notes from &#x27;./data.csv&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import toml from &#x27;./data.toml&#x27;;
</span><span class="token prefix inserted">+</span><span class="token line">import yaml from &#x27;./data.yaml&#x27;;
</span><span class="token prefix inserted">+</span><span class="token line">import json from &#x27;./data.json5&#x27;;
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">console.log(toml.title); // output `TOML Example`
</span><span class="token prefix inserted">+</span><span class="token line">console.log(toml.owner.name); // output `Tom Preston-Werner`
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">console.log(yaml.title); // output `YAML Example`
</span><span class="token prefix inserted">+</span><span class="token line">console.log(yaml.owner.name); // output `Tom Preston-Werner`
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">console.log(json.title); // output `JSON5 Example`
</span><span class="token prefix inserted">+</span><span class="token line">console.log(json.owner.name); // output `Tom Preston-Werner`
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  // Lodash, now imported by this script
</span><span class="token prefix unchanged"> </span><span class="token line">  element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">  element.classList.add(&#x27;hello&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  // Add the image to our existing div.
</span><span class="token prefix unchanged"> </span><span class="token line">  const myIcon = new Image();
</span><span class="token prefix unchanged"> </span><span class="token line">  myIcon.src = Icon;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  element.appendChild(myIcon);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  console.log(Data);
</span><span class="token prefix unchanged"> </span><span class="token line">  console.log(Notes);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());</span></span></code></pre>
<p>Re-run the <code>npm run build</code> command and open <code>dist/index.html</code>. You should be able to see your imported data being logged to the console!</p>
<h2><span id="global-assets"></span>Global Assets<a href="#global-assets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The coolest part of everything mentioned above, is that loading assets this way allows you to group modules and assets in a more intuitive way. Instead of relying on a global <code>/assets</code> directory that contains everything, you can group assets with the code that uses them. For example, a structure like this can be useful:</p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> |- /assets
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |– /components
</span><span class="token prefix inserted">+</span><span class="token line"> |  |– /my-component
</span><span class="token prefix inserted">+</span><span class="token line"> |  |  |– index.jsx
</span><span class="token prefix inserted">+</span><span class="token line"> |  |  |– index.css
</span><span class="token prefix inserted">+</span><span class="token line"> |  |  |– icon.svg
</span><span class="token prefix inserted">+</span><span class="token line"> |  |  |– img.png</span></span></code></pre>
<p>This setup makes your code a lot more portable as everything that is closely coupled now lives together. Let&#x27;s say you want to use <code>/my-component</code> in another project, copy or move it into the <code>/components</code> directory over there. As long as you&#x27;ve installed any <em>external dependencies</em> and your <em>configuration has the same loaders</em> defined, you should be good to go.</p>
<p>However, let&#x27;s say you&#x27;re locked into your old ways or you have some assets that are shared between multiple components (views, templates, modules, etc.). It&#x27;s still possible to store these assets in a base directory and even use <a href="/configuration/resolve/#resolvealias">aliasing</a> to make them easier to <code>import</code>.</p>
<h2><span id="wrapping-up"></span>Wrapping up<a href="#wrapping-up" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>For the next guides we won&#x27;t be using all the different assets we&#x27;ve used in this guide, so let&#x27;s do some cleanup so we&#x27;re prepared for the next piece of the guides <a href="https://webpack.js.org/guides/output-management/">Output Management</a>:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- webpack.config.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line">   |- bundle.js
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.html
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   |- data.csv
</span><span class="token prefix deleted">-</span><span class="token line">   |- data.json5
</span><span class="token prefix deleted">-</span><span class="token line">   |- data.toml
</span><span class="token prefix deleted">-</span><span class="token line">   |- data.xml
</span><span class="token prefix deleted">-</span><span class="token line">   |- data.yaml
</span><span class="token prefix deleted">-</span><span class="token line">   |- icon.png
</span><span class="token prefix deleted">-</span><span class="token line">   |- my-font.woff
</span><span class="token prefix deleted">-</span><span class="token line">   |- my-font.woff2
</span><span class="token prefix deleted">-</span><span class="token line">   |- style.css
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules</span></span></code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">const toml = require(&#x27;toml&#x27;);
</span><span class="token prefix deleted">-</span><span class="token line">const yaml = require(&#x27;yamljs&#x27;);
</span><span class="token prefix deleted">-</span><span class="token line">const json5 = require(&#x27;json5&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  module: {
</span><span class="token prefix deleted">-</span><span class="token line">    rules: [
</span><span class="token prefix deleted">-</span><span class="token line">      {
</span><span class="token prefix deleted">-</span><span class="token line">        test: /\.css$/i,
</span><span class="token prefix deleted">-</span><span class="token line">        use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;],
</span><span class="token prefix deleted">-</span><span class="token line">      },
</span><span class="token prefix deleted">-</span><span class="token line">      {
</span><span class="token prefix deleted">-</span><span class="token line">        test: /\.(png|svg|jpg|jpeg|gif)$/i,
</span><span class="token prefix deleted">-</span><span class="token line">        type: &#x27;asset/resource&#x27;,
</span><span class="token prefix deleted">-</span><span class="token line">      },
</span><span class="token prefix deleted">-</span><span class="token line">      {
</span><span class="token prefix deleted">-</span><span class="token line">        test: /\.(woff|woff2|eot|ttf|otf)$/i,
</span><span class="token prefix deleted">-</span><span class="token line">        type: &#x27;asset/resource&#x27;,
</span><span class="token prefix deleted">-</span><span class="token line">      },
</span><span class="token prefix deleted">-</span><span class="token line">      {
</span><span class="token prefix deleted">-</span><span class="token line">        test: /\.(csv|tsv)$/i,
</span><span class="token prefix deleted">-</span><span class="token line">        use: [&#x27;csv-loader&#x27;],
</span><span class="token prefix deleted">-</span><span class="token line">      },
</span><span class="token prefix deleted">-</span><span class="token line">      {
</span><span class="token prefix deleted">-</span><span class="token line">        test: /\.xml$/i,
</span><span class="token prefix deleted">-</span><span class="token line">        use: [&#x27;xml-loader&#x27;],
</span><span class="token prefix deleted">-</span><span class="token line">      },
</span><span class="token prefix deleted">-</span><span class="token line">      {
</span><span class="token prefix deleted">-</span><span class="token line">        test: /\.toml$/i,
</span><span class="token prefix deleted">-</span><span class="token line">        type: &#x27;json&#x27;,
</span><span class="token prefix deleted">-</span><span class="token line">        parser: {
</span><span class="token prefix deleted">-</span><span class="token line">          parse: toml.parse,
</span><span class="token prefix deleted">-</span><span class="token line">        },
</span><span class="token prefix deleted">-</span><span class="token line">      },
</span><span class="token prefix deleted">-</span><span class="token line">      {
</span><span class="token prefix deleted">-</span><span class="token line">        test: /\.yaml$/i,
</span><span class="token prefix deleted">-</span><span class="token line">        type: &#x27;json&#x27;,
</span><span class="token prefix deleted">-</span><span class="token line">        parser: {
</span><span class="token prefix deleted">-</span><span class="token line">          parse: yaml.parse,
</span><span class="token prefix deleted">-</span><span class="token line">        },
</span><span class="token prefix deleted">-</span><span class="token line">      },
</span><span class="token prefix deleted">-</span><span class="token line">      {
</span><span class="token prefix deleted">-</span><span class="token line">        test: /\.json5$/i,
</span><span class="token prefix deleted">-</span><span class="token line">        type: &#x27;json&#x27;,
</span><span class="token prefix deleted">-</span><span class="token line">        parser: {
</span><span class="token prefix deleted">-</span><span class="token line">          parse: json5.parse,
</span><span class="token prefix deleted">-</span><span class="token line">        },
</span><span class="token prefix deleted">-</span><span class="token line">      },
</span><span class="token prefix deleted">-</span><span class="token line">    ],
</span><span class="token prefix deleted">-</span><span class="token line">  },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">import _ from &#x27;lodash&#x27;;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">import &#x27;./style.css&#x27;;
</span><span class="token prefix deleted">-</span><span class="token line">import Icon from &#x27;./icon.png&#x27;;
</span><span class="token prefix deleted">-</span><span class="token line">import Data from &#x27;./data.xml&#x27;;
</span><span class="token prefix deleted">-</span><span class="token line">import Notes from &#x27;./data.csv&#x27;;
</span><span class="token prefix deleted">-</span><span class="token line">import toml from &#x27;./data.toml&#x27;;
</span><span class="token prefix deleted">-</span><span class="token line">import yaml from &#x27;./data.yaml&#x27;;
</span><span class="token prefix deleted">-</span><span class="token line">import json from &#x27;./data.json5&#x27;;
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">console.log(toml.title); // output `TOML Example`
</span><span class="token prefix deleted">-</span><span class="token line">console.log(toml.owner.name); // output `Tom Preston-Werner`
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">console.log(yaml.title); // output `YAML Example`
</span><span class="token prefix deleted">-</span><span class="token line">console.log(yaml.owner.name); // output `Tom Preston-Werner`
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">console.log(json.title); // output `JSON5 Example`
</span><span class="token prefix deleted">-</span><span class="token line">console.log(json.owner.name); // output `Tom Preston-Werner`
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  // Lodash, now imported by this script
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  element.classList.add(&#x27;hello&#x27;);
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">  // Add the image to our existing div.
</span><span class="token prefix deleted">-</span><span class="token line">  const myIcon = new Image();
</span><span class="token prefix deleted">-</span><span class="token line">  myIcon.src = Icon;
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">  element.appendChild(myIcon);
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">  console.log(Data);
</span><span class="token prefix deleted">-</span><span class="token line">  console.log(Notes);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());</span></span></code></pre>
<p>And remove those dependencies we added before:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> uninstall css-loader csv-loader json5 style-loader toml xml-loader yamljs</code></pre>
<h2><span id="next-guide"></span>Next guide<a href="#next-guide" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Let&#x27;s move on to <a href="https://webpack.js.org/guides/output-management/">Output Management</a></p>
<h2><span id="further-reading"></span>Further Reading<a href="#further-reading" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<ul>
<li><a href="https://survivejs.com/webpack/loading/fonts/">Loading Fonts</a> on SurviveJS</li>
</ul>
<h1><span id="output-management"></span>Output Management<a href="#output-management" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>This guide extends on code examples found in the <a href="/guides/asset-management"><code>Asset Management</code></a> guide.</p></aside>
<p>So far we&#x27;ve manually included all our assets in our <code>index.html</code> file, but as your application grows and once you start <a href="/guides/caching">using hashes in filenames</a> and outputting <a href="/guides/code-splitting">multiple bundles</a>, it will be difficult to keep managing your <code>index.html</code> file manually. However, a few plugins exist that will make this process much easier to manage.</p>
<h2><span id="preparation"></span>Preparation<a href="#preparation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>First, let&#x27;s adjust our project a little bit:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- webpack.config.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   |- print.js
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules</span></span></code></pre>
<p>Let&#x27;s add some logic to our <code>src/print.js</code> file:</p>
<p><strong>src/print.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">printMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;I get called from print.js!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>And use that function in our <code>src/index.js</code> file:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">import _ from &#x27;lodash&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import printMe from &#x27;./print.js&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  const btn = document.createElement(&#x27;button&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  btn.innerHTML = &#x27;Click me and check the console!&#x27;;
</span><span class="token prefix inserted">+</span><span class="token line">  btn.onclick = printMe;
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">  element.appendChild(btn);
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());</span></span></code></pre>
<p>Let&#x27;s also update our <code>dist/index.html</code> file, in preparation for webpack to split out entries:</p>
<p><strong>dist/index.html</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">&lt;!DOCTYPE html&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">&lt;html&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">  &lt;head&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">    &lt;meta charset=&quot;utf-8&quot; /&gt;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    &lt;title&gt;Asset Management&lt;/title&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;title&gt;Output Management&lt;/title&gt;
</span><span class="token prefix inserted">+</span><span class="token line">    &lt;script src=&quot;./print.bundle.js&quot;&gt;&lt;/script&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  &lt;/head&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">  &lt;body&gt;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;script src=&quot;./index.bundle.js&quot;&gt;&lt;/script&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  &lt;/body&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">&lt;/html&gt;</span></span></code></pre>
<p>Now adjust the config. We&#x27;ll be adding our <code>src/print.js</code> as a new entry point (<code>print</code>) and we&#x27;ll change the output as well, so that it will dynamically generate bundle names, based on the entry point names:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  entry: {
</span><span class="token prefix inserted">+</span><span class="token line">    index: &#x27;./src/index.js&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">    print: &#x27;./src/print.js&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">  },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    filename: &#x27;bundle.js&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    filename: &#x27;[name].bundle.js&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>Let&#x27;s run <code>npm run build</code> and see what this generates:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
asset index.bundle.js <span class="token number">69.5</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span> <span class="token number">1</span> related asset
asset print.bundle.js <span class="token number">316</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: print<span class="token punctuation">)</span>
runtime modules <span class="token number">1.36</span> KiB <span class="token number">7</span> modules
cacheable modules <span class="token number">530</span> KiB
  ./src/index.js <span class="token number">406</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/print.js <span class="token number">83</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">1996</span> ms</code></pre>
<p>We can see that webpack generates our <code>print.bundle.js</code> and <code>index.bundle.js</code> files, which we also specified in our <code>index.html</code> file. if you open <code>index.html</code> in your browser, you can see what happens when you click the button.</p>
<p>But what would happen if we changed the name of one of our entry points, or even added a new one? The generated bundles would be renamed on a build, but our <code>index.html</code> file would still reference the old names. Let&#x27;s fix that with the <a href="/plugins/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a>.</p>
<h2><span id="setting-up-htmlwebpackplugin"></span>Setting up HtmlWebpackPlugin<a href="#setting-up-htmlwebpackplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>First install the plugin and adjust the <code>webpack.config.js</code> file:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev html-webpack-plugin</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">    index: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    print: &#x27;./src/print.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  plugins: [
</span><span class="token prefix inserted">+</span><span class="token line">    new HtmlWebpackPlugin({
</span><span class="token prefix inserted">+</span><span class="token line">      title: &#x27;Output Management&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">    }),
</span><span class="token prefix inserted">+</span><span class="token line">  ],
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>Before we do a build, you should know that the <code>HtmlWebpackPlugin</code> by default will generate its own <code>index.html</code> file, even though we already have one in the <code>dist/</code> folder. This means that it will replace our <code>index.html</code> file with a newly generated one. Let&#x27;s see what happens when we do an <code>npm run build</code>:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
asset index.bundle.js <span class="token number">69.5</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span> <span class="token number">1</span> related asset
asset print.bundle.js <span class="token number">316</span> bytes <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: print<span class="token punctuation">)</span>
asset index.html <span class="token number">253</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
runtime modules <span class="token number">1.36</span> KiB <span class="token number">7</span> modules
cacheable modules <span class="token number">530</span> KiB
  ./src/index.js <span class="token number">406</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/print.js <span class="token number">83</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">2189</span> ms</code></pre>
<p>If you open <code>index.html</code> in your code editor, you&#x27;ll see that the <code>HtmlWebpackPlugin</code> has created an entirely new file for you and that all the bundles are automatically added.</p>
<p>If you want to learn more about all the features and options that the <code>HtmlWebpackPlugin</code> provides, then you should read up on it on the <a href="https://github.com/jantimon/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a> repo.</p>
<h2><span id="cleaning-up-the-dist-folder"></span>Cleaning up the <code>/dist</code> folder<a href="#cleaning-up-the-dist-folder" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>As you might have noticed over the past guides and code example, our <code>/dist</code> folder has become quite cluttered. Webpack will generate the files and put them in the <code>/dist</code> folder for you, but it doesn&#x27;t keep track of which files are actually in use by your project.</p>
<p>In general it&#x27;s good practice to clean the <code>/dist</code> folder before each build, so that only used files will be generated. Let&#x27;s take care of that with <a href="/configuration/output/#outputclean"><code>output.clean</code></a> option.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">    index: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    print: &#x27;./src/print.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">    new HtmlWebpackPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">      title: &#x27;Output Management&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    }),
</span><span class="token prefix unchanged"> </span><span class="token line">  ],
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    clean: true,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>Now run an <code>npm run build</code> and inspect the <code>/dist</code> folder. If everything went well you should now only see the files generated from the build and no more old files!</p>
<h2><span id="the-manifest"></span>The Manifest<a href="#the-manifest" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>You might be wondering how webpack and its plugins seem to &quot;know&quot; what files are being generated. The answer is in the manifest that webpack keeps to track how all the modules map to the output bundles. If you&#x27;re interested in managing webpack&#x27;s <a href="/configuration/output"><code>output</code></a> in other ways, the manifest would be a good place to start.</p>
<p>The manifest data can be extracted into a json file for consumption using the <a href="https://github.com/shellscape/webpack-manifest-plugin"><code>WebpackManifestPlugin</code></a>.</p>
<p>We won&#x27;t go through a full example of how to use this plugin within your projects, but you can read up on <a href="/concepts/manifest">the concept page</a> and the <a href="/guides/caching">caching guide</a> to find out how this ties into long term caching.</p>
<h2><span id="conclusion"></span>Conclusion<a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Now that you&#x27;ve learned about dynamically adding bundles to your HTML, let&#x27;s dive into the <a href="/guides/development">development guide</a>. Or, if you want to dig into more advanced topics, we would recommend heading over to the <a href="/guides/code-splitting">code splitting guide</a>.</p>
<h1><span id="development"></span>Development<a href="#development" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>This guide extends on code examples found in the <a href="/guides/output-management">Output Management</a> guide.</p></aside>
<p>If you&#x27;ve been following the guides, you should have a solid understanding of some of the webpack basics. Before we continue, let&#x27;s look into setting up a development environment to make our lives a little easier.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>The tools in this guide are <strong>only meant for development</strong>, please <strong>avoid</strong> using them in production!</p></aside>
<p>Let&#x27;s start by setting <a href="/configuration/mode/#mode-development"><code>mode</code> to <code>&#x27;development&#x27;</code></a> and <code>title</code> to <code>&#x27;Development&#x27;</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  mode: &#x27;development&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">    index: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    print: &#x27;./src/print.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">    new HtmlWebpackPlugin({
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">      title: &#x27;Output Management&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      title: &#x27;Development&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    }),
</span><span class="token prefix unchanged"> </span><span class="token line">  ],
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">    clean: true,
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<h2><span id="using-source-maps"></span>Using source maps<a href="#using-source-maps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>When webpack bundles your source code, it can become difficult to track down errors and warnings to their original location. For example, if you bundle three source files (<code>a.js</code>, <code>b.js</code>, and <code>c.js</code>) into one bundle (<code>bundle.js</code>) and one of the source files contains an error, the stack trace will point to <code>bundle.js</code>. This isn&#x27;t always helpful as you probably want to know exactly which source file the error came from.</p>
<p>In order to make it easier to track down errors and warnings, JavaScript offers <a href="http://blog.teamtreehouse.com/introduction-source-maps">source maps</a>, which map your compiled code back to your original source code. If an error originates from <code>b.js</code>, the source map will tell you exactly that.</p>
<p>There are a lot of <a href="/configuration/devtool">different options</a> available when it comes to source maps. Be sure to check them out so you can configure them to your needs.</p>
<p>For this guide, let&#x27;s use the <code>inline-source-map</code> option, which is good for illustrative purposes (though not for production):</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  mode: &#x27;development&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">    index: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    print: &#x27;./src/print.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  devtool: &#x27;inline-source-map&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">    new HtmlWebpackPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">      title: &#x27;Development&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    }),
</span><span class="token prefix unchanged"> </span><span class="token line">  ],
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">    clean: true,
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>Now let&#x27;s make sure we have something to debug, so let&#x27;s create an error in our <code>print.js</code> file:</p>
<p><strong>src/print.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">export default function printMe() {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  console.log(&#x27;I get called from print.js!&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  cosnole.log(&#x27;I get called from print.js!&#x27;);
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}</span></span></code></pre>
<p>Run an <code>npm run build</code>, it should compile to something like this:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
asset index.bundle.js <span class="token number">1.38</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
asset print.bundle.js <span class="token number">6.25</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: print<span class="token punctuation">)</span>
asset index.html <span class="token number">272</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
runtime modules <span class="token number">1.9</span> KiB <span class="token number">9</span> modules
cacheable modules <span class="token number">530</span> KiB
  ./src/index.js <span class="token number">406</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/print.js <span class="token number">83</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">706</span> ms</code></pre>
<p>Now open the resulting <code>index.html</code> file in your browser. Click the button and look in your console where the error is displayed. The error should say something like this:</p>
<pre><code class="hljs language-bash">Uncaught ReferenceError: cosnole is not defined
   at HTMLButtonElement.printMe <span class="token punctuation">(</span>print.js:2<span class="token punctuation">)</span></code></pre>
<p>We can see that the error also contains a reference to the file (<code>print.js</code>) and line number (2) where the error occurred. This is great because now we know exactly where to look in order to fix the issue.</p>
<h2><span id="choosing-a-development-tool"></span>Choosing a Development Tool<a href="#choosing-a-development-tool" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>Some text editors have a &quot;safe write&quot; function that might interfere with some of the following tools. Read <a href="#adjusting-your-text-editor">Adjusting Your Text Editor</a> for a solution to these issues.</p></aside>
<p>It quickly becomes a hassle to manually run <code>npm run build</code> every time you want to compile your code.</p>
<p>There are a couple of different options available in webpack that help you automatically compile your code whenever it changes:</p>
<ol>
<li>webpack&#x27;s <a href="/configuration/watch/#watch">Watch Mode</a></li>
<li><a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a></li>
<li><a href="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a></li>
</ol>
<p>In most cases, you probably would want to use <code>webpack-dev-server</code>, but let&#x27;s explore all of the above options.</p>
<h3><span id="using-watch-mode"></span>Using Watch Mode<a href="#using-watch-mode" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>You can instruct webpack to &quot;watch&quot; all files within your dependency graph for changes. If one of these files is updated, the code will be recompiled so you don&#x27;t have to run the full build manually.</p>
<p>Let&#x27;s add an npm script that will start webpack&#x27;s Watch Mode:</p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">{
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;name&quot;: &quot;webpack-demo&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;version&quot;: &quot;1.0.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;description&quot;: &quot;&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;private&quot;: true,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;scripts&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &quot;watch&quot;: &quot;webpack --watch&quot;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    &quot;build&quot;: &quot;webpack&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;keywords&quot;: [],
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;author&quot;: &quot;&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;license&quot;: &quot;ISC&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;devDependencies&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;html-webpack-plugin&quot;: &quot;^4.5.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack&quot;: &quot;^5.4.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack-cli&quot;: &quot;^4.2.0&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;dependencies&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;lodash&quot;: &quot;^4.17.20&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  }
</span><span class="token prefix unchanged"> </span><span class="token line">}</span></span></code></pre>
<p>Now run <code>npm run watch</code> from the command line and see how webpack compiles your code.
You can see that it doesn&#x27;t exit the command line because the script is currently watching your files.</p>
<p>Now, while webpack is watching your files, let&#x27;s remove the error we introduced earlier:</p>
<p><strong>src/print.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">export default function printMe() {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  cosnole.log(&#x27;I get called from print.js!&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  console.log(&#x27;I get called from print.js!&#x27;);
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}</span></span></code></pre>
<p>Now save your file and check the terminal window. You should see that webpack automatically recompiles the changed module!</p>
<p>The only downside is that you have to refresh your browser in order to see the changes. It would be much nicer if that would happen automatically as well, so let&#x27;s try <code>webpack-dev-server</code> which will do exactly that.</p>
<h3><span id="using-webpack-dev-server"></span>Using webpack-dev-server<a href="#using-webpack-dev-server" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>The <code>webpack-dev-server</code> provides you with a rudimentary web server and the ability to use live reloading. Let&#x27;s set it up:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-dev-server</code></pre>
<p>Change your configuration file to tell the dev server where to look for files:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  mode: &#x27;development&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">    index: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    print: &#x27;./src/print.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  devtool: &#x27;inline-source-map&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  devServer: {
</span><span class="token prefix inserted">+</span><span class="token line">    static: &#x27;./dist&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">  },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">    new HtmlWebpackPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">      title: &#x27;Development&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    }),
</span><span class="token prefix unchanged"> </span><span class="token line">  ],
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">    clean: true,
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  optimization: {
</span><span class="token prefix inserted">+</span><span class="token line">    runtimeChunk: &#x27;single&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">  },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>This tells <code>webpack-dev-server</code> to serve the files from the <code>dist</code> directory on <code>localhost:8080</code>.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>The <code>optimization.runtimeChunk: &#x27;single&#x27;</code> was added because in this example we have more than one entrypoint on a single HTML page. Without this, we could get into trouble described <a href="https://bundlers.tooling.report/code-splitting/multi-entry/">here</a>. Read the <a href="/guides/code-splitting/">Code Splitting</a> chapter for more details.</p></aside>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p><code>webpack-dev-server</code> serves bundled files from the directory defined in <a href="/configuration/output/#outputpath"><code>output.path</code></a>, i.e., files will be available under <code>http://[devServer.host]:[devServer.port]/[output.publicPath]/[output.filename]</code>.</p></aside>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>webpack-dev-server doesn&#x27;t write any output files after compiling. Instead, it keeps bundle files in memory and serves them as if they were real files mounted at the server&#x27;s root path. If your page expects to find the bundle files on a different path, you can change this with the <a href="/configuration/dev-server/#devserverdevmiddleware"><code>devMiddleware.publicPath</code></a> option in the dev server&#x27;s configuration.</p></aside>
<p>Let&#x27;s add a script to easily run the dev server as well:</p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">{
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;name&quot;: &quot;webpack-demo&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;version&quot;: &quot;1.0.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;description&quot;: &quot;&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;private&quot;: true,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;scripts&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;watch&quot;: &quot;webpack --watch&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &quot;start&quot;: &quot;webpack serve --open&quot;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    &quot;build&quot;: &quot;webpack&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;keywords&quot;: [],
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;author&quot;: &quot;&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;license&quot;: &quot;ISC&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;devDependencies&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;html-webpack-plugin&quot;: &quot;^4.5.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack&quot;: &quot;^5.4.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack-cli&quot;: &quot;^4.2.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack-dev-server&quot;: &quot;^3.11.0&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;dependencies&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;lodash&quot;: &quot;^4.17.20&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  }
</span><span class="token prefix unchanged"> </span><span class="token line">}</span></span></code></pre>
<p>Now we can run <code>npm start</code> from the command line and we will see our browser automatically loading up our page. If you now change any of the source files and save them, the web server will automatically reload after the code has been compiled. Give it a try!</p>
<p>The <code>webpack-dev-server</code> comes with many configurable options. Head over to the <a href="/configuration/dev-server">documentation</a> to learn more.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Now that your server is working, you might want to give <a href="/guides/hot-module-replacement">Hot Module Replacement</a> a try!</p></aside>
<h3><span id="using-webpack-dev-middleware"></span>Using webpack-dev-middleware<a href="#using-webpack-dev-middleware" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p><code>webpack-dev-middleware</code> is a wrapper that will emit files processed by webpack to a server. This is used in <code>webpack-dev-server</code> internally, however it&#x27;s available as a separate package to allow more custom setups if desired. We&#x27;ll take a look at an example that combines <code>webpack-dev-middleware</code> with an express server.</p>
<p>Let&#x27;s install <code>express</code> and <code>webpack-dev-middleware</code> so we can get started:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev express webpack-dev-middleware</code></pre>
<p>Now we need to make some adjustments to our webpack configuration file in order to make sure the middleware will function correctly:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  mode: &#x27;development&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">    index: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    print: &#x27;./src/print.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  devtool: &#x27;inline-source-map&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  devServer: {
</span><span class="token prefix unchanged"> </span><span class="token line">    static: &#x27;./dist&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">    new HtmlWebpackPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">      title: &#x27;Development&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    }),
</span><span class="token prefix unchanged"> </span><span class="token line">  ],
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">    clean: true,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    publicPath: &#x27;/&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>The <code>publicPath</code> will be used within our server script as well in order to make sure files are served correctly on <code>http://localhost:3000</code>. We&#x27;ll specify the port number later. The next step is setting up our custom <code>express</code> server:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- webpack.config.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- server.js
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span><span class="token prefix unchanged"> </span><span class="token line">   |- print.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules</span></span></code></pre>
<p><strong>server.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;express&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpackDevMiddleware <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack-dev-middleware&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./webpack.config.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Tell express to use the webpack-dev-middleware and use the webpack.config.js</span>
<span class="token comment">// configuration file as a base.</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token function">webpackDevMiddleware</span><span class="token punctuation">(</span>compiler<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> config<span class="token punctuation">.</span>output<span class="token punctuation">.</span>publicPath<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Serve the files on port 3000.</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Example app listening on port 3000!\n&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Now add an npm script to make it a little easier to run the server:</p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">{
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;name&quot;: &quot;webpack-demo&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;version&quot;: &quot;1.0.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;description&quot;: &quot;&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;private&quot;: true,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;scripts&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;watch&quot;: &quot;webpack --watch&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;start&quot;: &quot;webpack serve --open&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &quot;server&quot;: &quot;node server.js&quot;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    &quot;build&quot;: &quot;webpack&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;keywords&quot;: [],
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;author&quot;: &quot;&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;license&quot;: &quot;ISC&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;devDependencies&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;express&quot;: &quot;^4.17.1&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;html-webpack-plugin&quot;: &quot;^4.5.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack&quot;: &quot;^5.4.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack-cli&quot;: &quot;^4.2.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack-dev-middleware&quot;: &quot;^4.0.2&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;webpack-dev-server&quot;: &quot;^3.11.0&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  &quot;dependencies&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">    &quot;lodash&quot;: &quot;^4.17.20&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">  }
</span><span class="token prefix unchanged"> </span><span class="token line">}</span></span></code></pre>
<p>Now in your terminal run <code>npm run server</code>, it should give you an output similar to this:</p>
<pre><code class="hljs language-bash">Example app listening on port <span class="token number">3000</span><span class="token operator">!</span>
<span class="token punctuation">..</span>.
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> <span class="token punctuation">[</span>webpack-dev-middleware<span class="token punctuation">]</span> asset index.bundle.js <span class="token number">1.38</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> asset print.bundle.js <span class="token number">6.25</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: print<span class="token punctuation">)</span>
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> asset index.html <span class="token number">274</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> runtime modules <span class="token number">1.9</span> KiB <span class="token number">9</span> modules
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> cacheable modules <span class="token number">530</span> KiB
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>   ./src/index.js <span class="token number">406</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>   ./src/print.js <span class="token number">83</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>   ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">709</span> ms
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> <span class="token punctuation">[</span>webpack-dev-middleware<span class="token punctuation">]</span> Compiled successfully.
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> <span class="token punctuation">[</span>webpack-dev-middleware<span class="token punctuation">]</span> Compiling<span class="token punctuation">..</span>.
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> <span class="token punctuation">[</span>webpack-dev-middleware<span class="token punctuation">]</span> assets by status <span class="token number">1.38</span> MiB <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">2</span> assets
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> cached modules <span class="token number">530</span> KiB <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">1.9</span> KiB <span class="token punctuation">(</span>runtime<span class="token punctuation">)</span> <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">12</span> modules
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">19</span> ms
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> <span class="token punctuation">[</span>webpack-dev-middleware<span class="token punctuation">]</span> Compiled successfully.</code></pre>
<p>Now fire up your browser and go to <code>http://localhost:3000</code>. You should see your webpack app running and functioning!</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>If you would like to know more about how Hot Module Replacement works, we recommend you read the <a href="/guides/hot-module-replacement/">Hot Module Replacement</a> guide.</p></aside>
<h2><span id="adjusting-your-text-editor"></span>Adjusting Your Text Editor<a href="#adjusting-your-text-editor" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>When using automatic compilation of your code, you could run into issues when saving your files. Some editors have a &quot;safe write&quot; feature that can potentially interfere with recompilation.</p>
<p>To disable this feature in some common editors, see the list below:</p>
<ul>
<li><strong>Sublime Text 3</strong>: Add <code>atomic_save: &#x27;false&#x27;</code> to your user preferences.</li>
<li><strong>JetBrains IDEs (e.g. WebStorm)</strong>: Uncheck &quot;Use safe write&quot; in <code>Preferences &gt; Appearance &amp; Behavior &gt; System Settings</code>.</li>
<li><strong>Vim</strong>: Add <code>:set backupcopy=yes</code> to your settings.</li>
</ul>
<h2><span id="conclusion"></span>Conclusion<a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Now that you&#x27;ve learned how to automatically compile your code and run a development server, you can check out the next guide, which will cover <a href="/guides/code-splitting/">Code Splitting</a>.</p>
<h1><span id="code-splitting"></span>Code Splitting<a href="#code-splitting" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>This guide extends the example provided in <a href="/guides/getting-started">Getting Started</a>. Please make sure you are at least familiar with the example provided there and the <a href="/guides/output-management/">Output Management</a> chapter.</p></aside>
<p>Code splitting is one of the most compelling features of webpack. This feature allows you to split your code into various bundles which can then be loaded on demand or in parallel. It can be used to achieve smaller bundles and control resource load prioritization which, if used correctly, can have a major impact on load time.</p>
<p>There are three general approaches to code splitting available:</p>
<ul>
<li><strong>Entry Points</strong>: Manually split code using <a href="/configuration/entry-context"><code>entry</code></a> configuration.</li>
<li><strong>Prevent Duplication</strong>: Use <a href="/configuration/entry-context/#dependencies">Entry dependencies</a> or <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> to dedupe and split chunks.</li>
<li><strong>Dynamic Imports</strong>: Split code via inline function calls within modules.</li>
</ul>
<h2><span id="entry-points"></span>Entry Points<a href="#entry-points" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>This is by far the easiest and most intuitive way to split code. However, it is more manual and has some pitfalls we will go over. Let&#x27;s take a look at how we might split another module from the main bundle:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- package-lock.json
|- webpack.config.js
|- /dist
|- /src
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- index.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- another-module.js
</span></span>|- /node_modules</code></pre>
<p><strong>another-module.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;Another&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;module&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;loaded!&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27; &#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  mode: &#x27;development&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">  entry: {
</span><span class="token prefix inserted">+</span><span class="token line">    index: &#x27;./src/index.js&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">    another: &#x27;./src/another-module.js&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">  },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    filename: &#x27;main.js&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    filename: &#x27;[name].bundle.js&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>This will yield the following build result:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
asset index.bundle.js <span class="token number">553</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
asset another.bundle.js <span class="token number">553</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: another<span class="token punctuation">)</span>
runtime modules <span class="token number">2.49</span> KiB <span class="token number">12</span> modules
cacheable modules <span class="token number">530</span> KiB
  ./src/index.js <span class="token number">257</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/another-module.js <span class="token number">84</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">245</span> ms</code></pre>
<p>As mentioned there are some pitfalls to this approach:</p>
<ul>
<li>If there are any duplicated modules between entry chunks they will be included in both bundles.</li>
<li>It isn&#x27;t as flexible and can&#x27;t be used to dynamically split code with the core application logic.</li>
</ul>
<p>The first of these two points is definitely an issue for our example, as <code>lodash</code> is also imported within <code>./src/index.js</code> and will thus be duplicated in both bundles. Let&#x27;s remove this duplication in next section.</p>
<h2><span id="prevent-duplication"></span>Prevent Duplication<a href="#prevent-duplication" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<h3><span id="entry-dependencies"></span>Entry dependencies<a href="#entry-dependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>The <a href="/configuration/entry-context/#dependencies"><code>dependOn</code> option</a> allows to share the modules between the chunks:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  mode: &#x27;development&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    index: &#x27;./src/index.js&#x27;,
</span><span class="token prefix deleted">-</span><span class="token line">    another: &#x27;./src/another-module.js&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    index: {
</span><span class="token prefix inserted">+</span><span class="token line">      import: &#x27;./src/index.js&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">      dependOn: &#x27;shared&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">    },
</span><span class="token prefix inserted">+</span><span class="token line">    another: {
</span><span class="token prefix inserted">+</span><span class="token line">      import: &#x27;./src/another-module.js&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">      dependOn: &#x27;shared&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">    },
</span><span class="token prefix inserted">+</span><span class="token line">    shared: &#x27;lodash&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>If we&#x27;re going to use multiple entry points on a single HTML page, <code>optimization.runtimeChunk: &#x27;single&#x27;</code> is needed too, otherwise we could get into trouble described <a href="https://bundlers.tooling.report/code-splitting/multi-entry/">here</a>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  mode: &#x27;development&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">    index: {
</span><span class="token prefix unchanged"> </span><span class="token line">      import: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">      dependOn: &#x27;shared&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    },
</span><span class="token prefix unchanged"> </span><span class="token line">    another: {
</span><span class="token prefix unchanged"> </span><span class="token line">      import: &#x27;./src/another-module.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">      dependOn: &#x27;shared&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    },
</span><span class="token prefix unchanged"> </span><span class="token line">    shared: &#x27;lodash&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  optimization: {
</span><span class="token prefix inserted">+</span><span class="token line">    runtimeChunk: &#x27;single&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">  },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>And here&#x27;s the result of build:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
asset shared.bundle.js <span class="token number">549</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: shared<span class="token punctuation">)</span>
asset runtime.bundle.js <span class="token number">7.79</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: runtime<span class="token punctuation">)</span>
asset index.bundle.js <span class="token number">1.77</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
asset another.bundle.js <span class="token number">1.65</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: another<span class="token punctuation">)</span>
Entrypoint index <span class="token number">1.77</span> KiB <span class="token operator">=</span> index.bundle.js
Entrypoint another <span class="token number">1.65</span> KiB <span class="token operator">=</span> another.bundle.js
Entrypoint shared <span class="token number">557</span> KiB <span class="token operator">=</span> runtime.bundle.js <span class="token number">7.79</span> KiB shared.bundle.js <span class="token number">549</span> KiB
runtime modules <span class="token number">3.76</span> KiB <span class="token number">7</span> modules
cacheable modules <span class="token number">530</span> KiB
  ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/another-module.js <span class="token number">84</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/index.js <span class="token number">257</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">249</span> ms</code></pre>
<p>As you can see there&#x27;s another <code>runtime.bundle.js</code> file generated besides <code>shared.bundle.js</code>, <code>index.bundle.js</code> and <code>another.bundle.js</code>.</p>
<p>Although using multiple entry points per page is allowed in webpack, it should be avoided when possible in favor of an entry point with multiple imports: <code>entry: { page: [&#x27;./analytics&#x27;, &#x27;./app&#x27;] }</code>. This results in a better optimization and consistent execution order when using <code>async</code> script tags.</p>
<h3><span id="splitchunksplugin"></span>SplitChunksPlugin<a href="#splitchunksplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>The <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> allows us to extract common dependencies into an existing entry chunk or an entirely new chunk. Let&#x27;s use this to de-duplicate the <code>lodash</code> dependency from the previous example:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   mode: &#x27;development&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">     index: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     another: &#x27;./src/another-module.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">     filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   optimization: {
</span><span class="token prefix inserted">+</span><span class="token line">     splitChunks: {
</span><span class="token prefix inserted">+</span><span class="token line">       chunks: &#x27;all&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">     },
</span><span class="token prefix inserted">+</span><span class="token line">   },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre>
<p>With the <a href="/plugins/split-chunks-plugin/#optimizationsplitchunks"><code>optimization.splitChunks</code></a> configuration option in place, we should now see the duplicate dependency removed from our <code>index.bundle.js</code> and <code>another.bundle.js</code>. The plugin should notice that we&#x27;ve separated <code>lodash</code> out to a separate chunk and remove the dead weight from our main bundle. However, it&#x27;s important to note that common dependencies are only extracted into a separate chunk if they meet the <a href="/plugins/split-chunks-plugin/#splitchunksminsize">size thresholds</a> specified by webpack.</p>
<p>Let&#x27;s do an <code>npm run build</code> to see if it worked:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
asset vendors-node_modules_lodash_lodash_js.bundle.js <span class="token number">549</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>id hint: vendors<span class="token punctuation">)</span>
asset index.bundle.js <span class="token number">8.92</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
asset another.bundle.js <span class="token number">8.8</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: another<span class="token punctuation">)</span>
Entrypoint index <span class="token number">558</span> KiB <span class="token operator">=</span> vendors-node_modules_lodash_lodash_js.bundle.js <span class="token number">549</span> KiB index.bundle.js <span class="token number">8.92</span> KiB
Entrypoint another <span class="token number">558</span> KiB <span class="token operator">=</span> vendors-node_modules_lodash_lodash_js.bundle.js <span class="token number">549</span> KiB another.bundle.js <span class="token number">8.8</span> KiB
runtime modules <span class="token number">7.64</span> KiB <span class="token number">14</span> modules
cacheable modules <span class="token number">530</span> KiB
  ./src/index.js <span class="token number">257</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/another-module.js <span class="token number">84</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">241</span> ms</code></pre>
<p>Here are some other useful plugins and loaders provided by the community for splitting code:</p>
<ul>
<li><a href="/plugins/mini-css-extract-plugin"><code>mini-css-extract-plugin</code></a>: Useful for splitting CSS out from the main application.</li>
</ul>
<h2><span id="dynamic-imports"></span>Dynamic Imports<a href="#dynamic-imports" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Two similar techniques are supported by webpack when it comes to dynamic code splitting. The first and recommended approach is to use the <a href="/api/module-methods/#import-1"><code>import()</code> syntax</a> that conforms to the <a href="https://github.com/tc39/proposal-dynamic-import">ECMAScript proposal</a> for dynamic imports. The legacy, webpack-specific approach is to use <a href="/api/module-methods/#requireensure"><code>require.ensure</code></a>. Let&#x27;s try using the first of these two approaches...</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p><code>import()</code> calls use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promises</a> internally. If you use <code>import()</code> with older browsers (e.g., IE 11), remember to shim <code>Promise</code> using a polyfill such as <a href="https://github.com/stefanpenner/es6-promise">es6-promise</a> or <a href="https://github.com/taylorhakes/promise-polyfill">promise-polyfill</a>.</p></aside>
<p>Before we start, let&#x27;s remove the extra <a href="/concepts/entry-points/"><code>entry</code></a> and <a href="/plugins/split-chunks-plugin"><code>optimization.splitChunks</code></a> from our configuration in the above example as they won&#x27;t be needed for this next demonstration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  mode: &#x27;development&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">    index: &#x27;./src/index.js&#x27;,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    another: &#x27;./src/another-module.js&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  optimization: {
</span><span class="token prefix deleted">-</span><span class="token line">    splitChunks: {
</span><span class="token prefix deleted">-</span><span class="token line">      chunks: &#x27;all&#x27;,
</span><span class="token prefix deleted">-</span><span class="token line">    },
</span><span class="token prefix deleted">-</span><span class="token line">  },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>We&#x27;ll also update our project to remove the now unused files:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- package-lock.json
|- webpack.config.js
|- /dist
|- /src
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- index.js
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> |- another-module.js
</span></span>|- /node_modules</code></pre>
<p>Now, instead of statically importing <code>lodash</code>, we&#x27;ll use dynamic importing to separate a chunk:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">import _ from &#x27;lodash&#x27;;
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">function component() {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">function getComponent() {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  // Lodash, now imported by this script
</span><span class="token prefix deleted">-</span><span class="token line">  element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  return import(&#x27;lodash&#x27;)
</span><span class="token prefix inserted">+</span><span class="token line">    .then(({ default: _ }) =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">      const element = document.createElement(&#x27;div&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">      element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  return element;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      return element;
</span><span class="token prefix inserted">+</span><span class="token line">    })
</span><span class="token prefix inserted">+</span><span class="token line">    .catch((error) =&gt; &#x27;An error occurred while loading the component&#x27;);
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">document.body.appendChild(component());
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">getComponent().then((component) =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">  document.body.appendChild(component);
</span><span class="token prefix inserted">+</span><span class="token line">});</span></span></code></pre>
<p>The reason we need <code>default</code> is that since webpack 4, when importing a CommonJS module, the import will no longer resolve to the value of <code>module.exports</code>, it will instead create an artificial namespace object for the CommonJS module. For more information on the reason behind this, read <a href="https://medium.com/webpack/webpack-4-import-and-commonjs-d619d626b655">webpack 4: import() and CommonJs</a>.</p>
<p>Let&#x27;s run webpack to see <code>lodash</code> separated out to a separate bundle:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
asset vendors-node_modules_lodash_lodash_js.bundle.js <span class="token number">549</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>id hint: vendors<span class="token punctuation">)</span>
asset index.bundle.js <span class="token number">13.5</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
runtime modules <span class="token number">7.37</span> KiB <span class="token number">11</span> modules
cacheable modules <span class="token number">530</span> KiB
  ./src/index.js <span class="token number">434</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">268</span> ms</code></pre>
<p>As <code>import()</code> returns a promise, it can be used with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function"><code>async</code> functions</a>. Here&#x27;s how it would simplify the code:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">function getComponent() {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">async function getComponent() {
</span><span class="token prefix inserted">+</span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line">  const { default: _ } = await import(&#x27;lodash&#x27;);
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  return import(&#x27;lodash&#x27;)
</span><span class="token prefix deleted">-</span><span class="token line">    .then(({ default: _ }) =&gt; {
</span><span class="token prefix deleted">-</span><span class="token line">      const element = document.createElement(&#x27;div&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">      element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">      return element;
</span><span class="token prefix deleted">-</span><span class="token line">    })
</span><span class="token prefix deleted">-</span><span class="token line">    .catch((error) =&gt; &#x27;An error occurred while loading the component&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  return element;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">getComponent().then((component) =&gt; {
</span><span class="token prefix unchanged"> </span><span class="token line">  document.body.appendChild(component);
</span><span class="token prefix unchanged"> </span><span class="token line">});</span></span></code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>It is possible to provide a <a href="/api/module-methods/#dynamic-expressions-in-import">dynamic expression</a> to <code>import()</code> when you might need to import specific module based on a computed variable later.</p></aside>
<h2><span id="prefetchingpreloading-modules"></span>Prefetching/Preloading modules<a href="#prefetchingpreloading-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Webpack 4.6.0+ adds support for prefetching and preloading.</p>
<p>Using these inline directives while declaring your imports allows webpack to output “Resource Hint” which tells the browser that for:</p>
<ul>
<li><strong>prefetch</strong>: resource is probably needed for some navigation in the future</li>
<li><strong>preload</strong>: resource will also be needed during the current navigation</li>
</ul>
<p>An example of this is having a <code>HomePage</code> component, which renders a <code>LoginButton</code> component which then on demand loads a <code>LoginModal</code> component after being clicked.</p>
<p><strong>LoginButton.js</strong></p>
<pre><code class="hljs language-js"><span class="token comment">//...</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPrefetch: true */</span> <span class="token string">&#x27;./path/to/LoginModal.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>This will result in <code>&lt;link rel=&quot;prefetch&quot; href=&quot;login-modal-chunk.js&quot;&gt;</code> being appended in the head of the page, which will instruct the browser to prefetch in idle time the <code>login-modal-chunk.js</code> file.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>webpack will add the prefetch hint once the parent chunk has been loaded.</p></aside>
<p>Preload directive has a bunch of differences compared to prefetch:</p>
<ul>
<li>A preloaded chunk starts loading in parallel to the parent chunk. A prefetched chunk starts after the parent chunk finishes loading.</li>
<li>A preloaded chunk has medium priority and is instantly downloaded. A prefetched chunk is downloaded while the browser is idle.</li>
<li>A preloaded chunk should be instantly requested by the parent chunk. A prefetched chunk can be used anytime in the future.</li>
<li>Browser support is different.</li>
</ul>
<p>An example of this can be having a <code>Component</code> which always depends on a big library that should be in a separate chunk.</p>
<p>Let&#x27;s imagine a component <code>ChartComponent</code> which needs a huge <code>ChartingLibrary</code>. It displays a <code>LoadingIndicator</code> when rendered and instantly does an on demand import of <code>ChartingLibrary</code>:</p>
<p><strong>ChartComponent.js</strong></p>
<pre><code class="hljs language-js"><span class="token comment">//...</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPreload: true */</span> <span class="token string">&#x27;ChartingLibrary&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>When a page which uses the <code>ChartComponent</code> is requested, the charting-library-chunk is also requested via <code>&lt;link rel=&quot;preload&quot;&gt;</code>. Assuming the page-chunk is smaller and finishes faster, the page will be displayed with a <code>LoadingIndicator</code>, until the already requested <code>charting-library-chunk</code> finishes. This will give a little load time boost since it only needs one round-trip instead of two. Especially in high-latency environments.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Using <code>webpackPreload</code> incorrectly can actually hurt performance, so be careful when using it.</p></aside>
<p>Sometimes you need to have your own control over preload. For example, preload of any dynamic import can be done via async script. This can be useful in case of streaming server side rendering.</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> <span class="token function-variable function">lazyComp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#x27;DynamicComponent&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do something with the error.</span>
    <span class="token comment">// For example, we can retry the request in case of any net error</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>If the script loading will fail before webpack starts loading of that script by itself (webpack creates a script tag to load its code, if that script is not on a page), that catch handler won&#x27;t start till <a href="/configuration/output/#outputchunkloadtimeout">chunkLoadTimeout</a> is not passed. This behavior can be unexpected. But it&#x27;s explainable — webpack can not throw any error, cause webpack doesn&#x27;t know, that script failed. Webpack will add onerror handler to the script right after the error has happen.</p>
<p>To prevent such problem you can add your own onerror handler, which removes the script in case of any error:</p>
<pre><code class="hljs language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.com/dist/dynamicComponent.js<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">async</span>
  <span class="token attr-name">onerror</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>this.remove()<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre>
<p>In that case, errored script will be removed. Webpack will create its own script and any error will be processed without any timeouts.</p>
<h2><span id="bundle-analysis"></span>Bundle Analysis<a href="#bundle-analysis" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Once you start splitting your code, it can be useful to analyze the output to check where modules have ended up. The <a href="https://github.com/webpack/analyse">official analyze tool</a> is a good place to start. There are some other community-supported options out there as well:</p>
<ul>
<li><a href="https://alexkuz.github.io/webpack-chart/">webpack-chart</a>: Interactive pie chart for webpack stats.</li>
<li><a href="https://chrisbateman.github.io/webpack-visualizer/">webpack-visualizer</a>: Visualize and analyze your bundles to see which modules are taking up space and which might be duplicates.</li>
<li><a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">webpack-bundle-analyzer</a>: A plugin and CLI utility that represents bundle content as a convenient interactive zoomable treemap.</li>
<li><a href="https://webpack.jakoblind.no/optimize">webpack bundle optimize helper</a>: This tool will analyze your bundle and give you actionable suggestions on what to improve to reduce your bundle size.</li>
<li><a href="https://github.com/bundle-stats/bundle-stats">bundle-stats</a>: Generate a bundle report(bundle size, assets, modules) and compare the results between different builds.</li>
<li><a href="https://github.com/moonrailgun/webpack-stats-viewer">webpack-stats-viewer</a>: A plugin with build for webpack stats. Show more information about webpack bundle detail.</li>
</ul>
<h2><span id="next-steps"></span>Next Steps<a href="#next-steps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>See <a href="/guides/lazy-loading/">Lazy Loading</a> for a more concrete example of how <code>import()</code> can be used in a real application and <a href="/guides/caching/">Caching</a> to learn how to split code more effectively.</p>
<h1><span id="caching"></span>Caching<a href="#caching" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>The examples in this guide stem from <a href="/guides/getting-started">getting started</a>, <a href="/guides/output-management">output management</a> and <a href="/guides/code-splitting">code splitting</a>.</p></aside>
<p>So we&#x27;re using webpack to bundle our modular application which yields a deployable <code>/dist</code> directory. Once the contents of <code>/dist</code> have been deployed to a server, clients (typically browsers) will hit that server to grab the site and its assets. The last step can be time consuming, which is why browsers use a technique called <a href="https://en.wikipedia.org/wiki/Cache_(computing)">caching</a>. This allows sites to load faster with less unnecessary network traffic. However, it can also cause headaches when you need new code to be picked up.</p>
<p>This guide focuses on the configuration needed to ensure files produced by webpack compilation can remain cached unless their content has changed.</p>
<h2><span id="output-filenames"></span>Output Filenames<a href="#output-filenames" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>We can use the <code>output.filename</code> <a href="/configuration/output/#outputfilename">substitutions</a> setting to define the names of our output files. Webpack provides a method of templating the filenames using bracketed strings called <strong>substitutions</strong>. The <code>[contenthash]</code> substitution will add a unique hash based on the content of an asset. When the asset&#x27;s content changes, <code>[contenthash]</code> will change as well.</p>
<p>Let&#x27;s get our project set up using the example from <a href="/guides/getting-started">getting started</a> with the <code>plugins</code> from <a href="/guides/output-management">output management</a>, so we don&#x27;t have to deal with maintaining our <code>index.html</code> file manually:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- package-lock.json
|- webpack.config.js
|- /dist
|- /src
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- index.js
</span></span>|- /node_modules</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line"> const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">     new HtmlWebpackPlugin({
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       title: &#x27;Output Management&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       title: &#x27;Caching&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }),
</span><span class="token prefix unchanged"> </span><span class="token line">   ],
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     filename: &#x27;bundle.js&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     filename: &#x27;[name].[contenthash].js&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">     clean: true,
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre>
<p>Running our build script, <code>npm run build</code>, with this configuration should produce the following output:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                       Asset       Size  Chunks                    Chunk Names
main.7e2c49a622975ebd9b7e.js     <span class="token number">544</span> kB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  main
                  index.html  <span class="token number">197</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<p>As you can see the bundle&#x27;s name now reflects its content (via the hash). If we run another build without making any changes, we&#x27;d expect that filename to stay the same. However, if we were to run it again, we may find that this is not the case:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                       Asset       Size  Chunks                    Chunk Names
main.205199ab45963f6a62ec.js     <span class="token number">544</span> kB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  main
                  index.html  <span class="token number">197</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<p>This is because webpack includes certain boilerplate, specifically the runtime and manifest, in the entry chunk.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>Output may differ depending on your current webpack version. Newer versions may not have all the same issues with hashing as some older versions, but we still recommend the following steps to be safe.</p></aside>
<h2><span id="extracting-boilerplate"></span>Extracting Boilerplate<a href="#extracting-boilerplate" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>As we learned in <a href="/guides/code-splitting">code splitting</a>, the <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> can be used to split modules out into separate bundles. Webpack provides an optimization feature to split runtime code into a separate chunk using the <a href="/configuration/optimization/#optimizationruntimechunk"><code>optimization.runtimeChunk</code></a> option. Set it to <code>single</code> to create a single runtime bundle for all chunks:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line"> const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">     new HtmlWebpackPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">     title: &#x27;Caching&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     }),
</span><span class="token prefix unchanged"> </span><span class="token line">   ],
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">     filename: &#x27;[name].[contenthash].js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">     clean: true,
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   optimization: {
</span><span class="token prefix inserted">+</span><span class="token line">     runtimeChunk: &#x27;single&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">   },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre>
<p>Let&#x27;s run another build to see the extracted <code>runtime</code> bundle:</p>
<pre><code class="hljs language-bash">Hash: 82c9c385607b2150fab2
Version: webpack <span class="token number">4.12</span>.0
Time: 3027ms
                          Asset       Size  Chunks             Chunk Names
runtime.cc17ae2a94ec771e9221.js   <span class="token number">1.42</span> KiB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
   main.e81de2cf758ada72f306.js   <span class="token number">69.5</span> KiB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
                     index.html  <span class="token number">275</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>/buildin/module.js <span class="token number">497</span> bytes <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>/buildin/global.js <span class="token number">489</span> bytes <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> ./src/index.js <span class="token number">309</span> bytes <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    + <span class="token number">1</span> hidden module</code></pre>
<p>It&#x27;s also good practice to extract third-party libraries, such as <code>lodash</code> or <code>react</code>, to a separate <code>vendor</code> chunk as they are less likely to change than our local source code. This step will allow clients to request even less from the server to stay up to date.
This can be done by using the <a href="/plugins/split-chunks-plugin/#splitchunkscachegroups"><code>cacheGroups</code></a> option of the <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> demonstrated in <a href="/plugins/split-chunks-plugin/#split-chunks-example-2">Example 2 of SplitChunksPlugin</a>. Lets add <code>optimization.splitChunks</code> with <code>cacheGroups</code> with next params and build:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line"> const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">     new HtmlWebpackPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">     title: &#x27;Caching&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     }),
</span><span class="token prefix unchanged"> </span><span class="token line">   ],
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">     filename: &#x27;[name].[contenthash].js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">     clean: true,
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   optimization: {
</span><span class="token prefix unchanged"> </span><span class="token line">     runtimeChunk: &#x27;single&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     splitChunks: {
</span><span class="token prefix inserted">+</span><span class="token line">       cacheGroups: {
</span><span class="token prefix inserted">+</span><span class="token line">         vendor: {
</span><span class="token prefix inserted">+</span><span class="token line">           test: /[\\/]node_modules[\\/]/,
</span><span class="token prefix inserted">+</span><span class="token line">           name: &#x27;vendors&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">           chunks: &#x27;all&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">         },
</span><span class="token prefix inserted">+</span><span class="token line">       },
</span><span class="token prefix inserted">+</span><span class="token line">     },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre>
<p>Let&#x27;s run another build to see our new <code>vendor</code> bundle:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                          Asset       Size  Chunks             Chunk Names
runtime.cc17ae2a94ec771e9221.js   <span class="token number">1.42</span> KiB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
vendors.a42c3ca0d742766d7a28.js   <span class="token number">69.4</span> KiB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors
   main.abf44fedb7d11d4312d7.js  <span class="token number">240</span> bytes       <span class="token number">2</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
                     index.html  <span class="token number">353</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<p>We can now see that our <code>main</code> bundle does not contain <code>vendor</code> code from <code>node_modules</code> directory and is down in size to <code>240 bytes</code>!</p>
<h2><span id="module-identifiers"></span>Module Identifiers<a href="#module-identifiers" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Let&#x27;s add another module, <code>print.js</code>, to our project:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- package-lock.json
|- webpack.config.js
|- /dist
|- /src
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- index.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- print.js
</span></span>|- /node_modules</code></pre>
<p><strong>print.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> export default function print(text) {
</span><span class="token prefix inserted">+</span><span class="token line">   console.log(text);
</span><span class="token prefix inserted">+</span><span class="token line"> };</span></span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> import _ from &#x27;lodash&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import Print from &#x27;./print&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">   const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // Lodash, now imported by this script
</span><span class="token prefix unchanged"> </span><span class="token line">   element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   element.onclick = Print.bind(null, &#x27;Hello webpack!&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return element;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> document.body.appendChild(component());</span></span></code></pre>
<p>Running another build, we would expect only our <code>main</code> bundle&#x27;s hash to change, however...</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                           Asset       Size  Chunks                    Chunk Names
  runtime.1400d5af64fc1b7b3a45.js    <span class="token number">5.85</span> kB      <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         runtime
  vendor.a7561fb0e9a071baadb9.js     <span class="token number">541</span> kB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  vendor
    main.b746e3eb72875af2caa9.js    <span class="token number">1.22</span> kB       <span class="token number">2</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         main
                      index.html  <span class="token number">352</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<p>... we can see that all three have. This is because each <a href="/api/module-variables/#moduleid-commonjs"><code>module.id</code></a> is incremented based on resolving order by default. Meaning when the order of resolving is changed, the IDs will be changed as well. To recap:</p>
<ul>
<li>The <code>main</code> bundle changed because of its new content.</li>
<li>The <code>vendor</code> bundle changed because its <code>module.id</code> was changed.</li>
<li>And, the <code>runtime</code> bundle changed because it now contains a reference to a new module.</li>
</ul>
<p>The first and last are expected, it&#x27;s the <code>vendor</code> hash we want to fix. Let&#x27;s use <a href="/configuration/optimization/#optimizationmoduleids"><code>optimization.moduleIds</code></a> with <code>&#x27;deterministic&#x27;</code> option:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line"> const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">     new HtmlWebpackPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">       title: &#x27;Caching&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     }),
</span><span class="token prefix unchanged"> </span><span class="token line">   ],
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">     filename: &#x27;[name].[contenthash].js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">     clean: true,
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   optimization: {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     moduleIds: &#x27;deterministic&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     runtimeChunk: &#x27;single&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     splitChunks: {
</span><span class="token prefix unchanged"> </span><span class="token line">       cacheGroups: {
</span><span class="token prefix unchanged"> </span><span class="token line">         vendor: {
</span><span class="token prefix unchanged"> </span><span class="token line">           test: /[\\/]node_modules[\\/]/,
</span><span class="token prefix unchanged"> </span><span class="token line">           name: &#x27;vendors&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">           chunks: &#x27;all&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">         },
</span><span class="token prefix unchanged"> </span><span class="token line">       },
</span><span class="token prefix unchanged"> </span><span class="token line">     },
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre>
<p>Now, despite any new local dependencies, our <code>vendor</code> hash should stay consistent between builds:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                          Asset       Size  Chunks             Chunk Names
   main.216e852f60c8829c2289.js  <span class="token number">340</span> bytes       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
vendors.55e79e5927a639d21a1b.js   <span class="token number">69.5</span> KiB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors
runtime.725a1a51ede5ae0cfde0.js   <span class="token number">1.42</span> KiB       <span class="token number">2</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
                     index.html  <span class="token number">353</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint main <span class="token operator">=</span> runtime.725a1a51ede5ae0cfde0.js vendors.55e79e5927a639d21a1b.js main.216e852f60c8829c2289.js
<span class="token punctuation">..</span>.</code></pre>
<p>And let&#x27;s modify our <code>src/index.js</code> to temporarily remove that extra dependency:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> import _ from &#x27;lodash&#x27;;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import Print from &#x27;./print&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> // import Print from &#x27;./print&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">   const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // Lodash, now imported by this script
</span><span class="token prefix unchanged"> </span><span class="token line">   element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   element.onclick = Print.bind(null, &#x27;Hello webpack!&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   // element.onclick = Print.bind(null, &#x27;Hello webpack!&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return element;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> document.body.appendChild(component());</span></span></code></pre>
<p>And finally run our build again:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                          Asset       Size  Chunks             Chunk Names
   main.ad717f2466ce655fff5c.js  <span class="token number">274</span> bytes       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
vendors.55e79e5927a639d21a1b.js   <span class="token number">69.5</span> KiB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors
runtime.725a1a51ede5ae0cfde0.js   <span class="token number">1.42</span> KiB       <span class="token number">2</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
                     index.html  <span class="token number">353</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint main <span class="token operator">=</span> runtime.725a1a51ede5ae0cfde0.js vendors.55e79e5927a639d21a1b.js main.ad717f2466ce655fff5c.js
<span class="token punctuation">..</span>.</code></pre>
<p>We can see that both builds yielded <code>55e79e5927a639d21a1b</code> in the <code>vendor</code> bundle&#x27;s filename.</p>
<h2><span id="conclusion"></span>Conclusion<a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Caching can be complicated, but the benefit to application or site users makes it worth the effort. See the <em>Further Reading</em> section below to learn more.</p>
<h1><span id="authoring-libraries"></span>Authoring Libraries<a href="#authoring-libraries" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>Aside from applications, webpack can also be used to bundle JavaScript libraries. The following guide is meant for library authors looking to streamline their bundling strategy.</p>
<h2><span id="authoring-a-library"></span>Authoring a Library<a href="#authoring-a-library" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Let&#x27;s assume that we are writing a small library, <code>webpack-numbers</code>, that allows users to convert the numbers 1 through 5 from their numeric representation to a textual one and vice-versa, e.g. 2 to &#x27;two&#x27;.</p>
<p>The basic project structure would look like this:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  |- webpack.config.js
</span><span class="token prefix inserted">+</span><span class="token line">  |- package.json
</span><span class="token prefix inserted">+</span><span class="token line">  |- /src
</span><span class="token prefix inserted">+</span><span class="token line">    |- index.js
</span><span class="token prefix inserted">+</span><span class="token line">    |- ref.json</span></span></code></pre>
<p>Initialize the project with npm, then install <code>webpack</code>, <code>webpack-cli</code> and <code>lodash</code>:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> init -y
<span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack webpack-cli lodash</code></pre>
<p>We install <code>lodash</code> as <code>devDependencies</code> instead of <code>dependencies</code> because we don&#x27;t want to bundle it into our library, or our library could be easily bloated.</p>
<p><strong>src/ref.json</strong></p>
<pre><code class="hljs language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;One&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Two&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Three&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Four&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Five&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Zero&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> numRef <span class="token keyword">from</span> <span class="token string">&#x27;./ref.json&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">numToWord</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
    numRef<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">accum<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> ref<span class="token punctuation">.</span>num <span class="token operator">===</span> num <span class="token operator">?</span> ref<span class="token punctuation">.</span>word <span class="token operator">:</span> accum<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&#x27;&#x27;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token parameter">word</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
    numRef<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">accum<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> ref<span class="token punctuation">.</span>word <span class="token operator">===</span> word <span class="token operator">&amp;&amp;</span> word<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> ref<span class="token punctuation">.</span>num <span class="token operator">:</span> accum<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token number">1</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h2><span id="webpack-configuration"></span>Webpack Configuration<a href="#webpack-configuration" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Let&#x27;s start with this basic webpack configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">&#x27;./src/index.js&#x27;</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;dist&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;webpack-numbers.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>In the above example, we&#x27;re telling webpack to bundle <code>src/index.js</code> into <code>dist/webpack-numbers.js</code>.</p>
<h2><span id="expose-the-library"></span>Expose the Library<a href="#expose-the-library" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>So far everything should be the same as bundling an application, and here comes the different part – we need to expose exports from the entry point through <a href="/configuration/output/#outputlibrary"><code>output.library</code></a> option.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">     filename: &#x27;webpack-numbers.js&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     library: &quot;webpackNumbers&quot;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre>
<p>We exposed the entry point as <code>webpackNumbers</code> so users can use it through script tag:</p>
<pre><code class="hljs language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.org/webpack-numbers.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  window<span class="token punctuation">.</span>webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">&#x27;Five&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre>
<p>However it only works when it&#x27;s referenced through script tag, it can&#x27;t be used in other environments like CommonJS, AMD, Node.js, etc.</p>
<p>As a library author, we want it to be compatible in different environments, i.e., users should be able to consume the bundled library in multiple ways listed below:</p>
<ul>
<li>
<p><strong>CommonJS module require</strong>:</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> webpackNumbers <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack-numbers&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">&#x27;Two&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li>
<p><strong>AMD module require</strong>:</p>
<pre><code class="hljs language-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;webpackNumbers&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">webpackNumbers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">&#x27;Two&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li>
<p><strong>script tag</strong>:</p>
<pre><code class="hljs language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.org/webpack-numbers.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// ...</span>
    <span class="token comment">// Global variable</span>
    webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">&#x27;Five&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Property in the window object</span>
    window<span class="token punctuation">.</span>webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">&#x27;Five&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
</li>
</ul>
<p>Let&#x27;s update the <code>output.library</code> option with its <code>type</code> set to <a href="/configuration/output/#type-umd"><code>&#x27;umd&#x27;</code></a>:</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;webpack-numbers.js&#x27;,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    library: &#x27;webpackNumbers&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    globalObject: &#x27;this&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">    library: {
</span><span class="token prefix inserted">+</span><span class="token line">      name: &#x27;webpackNumbers&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">      type: &#x27;umd&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">    },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>Now webpack will bundle a library that can work with CommonJS, AMD, and script tag.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Note that the <code>library</code> setup is tied to the <code>entry</code> configuration. For most libraries, specifying a single entry point is sufficient. While <a href="https://github.com/webpack/webpack/tree/master/examples/multi-part-library">multi-part libraries</a> are possible, it is more straightforward to expose partial exports through an <a href="https://stackoverflow.com/questions/34072598/es6-exporting-importing-in-index-file">index script</a> that serves as a single entry point. Using an <code>array</code> as an <code>entry</code> point for a library is <strong>not recommended</strong>.</p></aside>
<h2><span id="externalize-lodash"></span>Externalize Lodash<a href="#externalize-lodash" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Now, if you run <code>npx webpack</code>, you will find that a largish bundle is created. If you inspect the file, you&#x27;ll see that lodash has been bundled along with your code. In this case, we&#x27;d prefer to treat <code>lodash</code> as a <em>peer dependency</em>. Meaning that the consumer should already have <code>lodash</code> installed. Hence you would want to give up control of this external library to the consumer of your library.</p>
<p>This can be done using the <a href="/configuration/externals/"><code>externals</code></a> configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">     filename: &#x27;webpack-numbers.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     library: {
</span><span class="token prefix unchanged"> </span><span class="token line">       name: &quot;webpackNumbers&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">       type: &quot;umd&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">     },
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   externals: {
</span><span class="token prefix inserted">+</span><span class="token line">     lodash: {
</span><span class="token prefix inserted">+</span><span class="token line">       commonjs: &#x27;lodash&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">       commonjs2: &#x27;lodash&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">       amd: &#x27;lodash&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">       root: &#x27;_&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">     },
</span><span class="token prefix inserted">+</span><span class="token line">   },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre>
<p>This means that your library expects a dependency named <code>lodash</code> to be available in the consumer&#x27;s environment.</p>
<h3><span id="external-limitations"></span>External Limitations<a href="#external-limitations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>For libraries that use several files from a dependency:</p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token constant">A</span> <span class="token keyword">from</span> <span class="token string">&#x27;library/one&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token constant">B</span> <span class="token keyword">from</span> <span class="token string">&#x27;library/two&#x27;</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span></code></pre>
<p>You won&#x27;t be able to exclude them from the bundle by specifying <code>library</code> in the externals. You&#x27;ll either need to exclude them one by one or by using a regular expression.</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#x27;library/one&#x27;</span><span class="token punctuation">,</span>
    <span class="token string">&#x27;library/two&#x27;</span><span class="token punctuation">,</span>
    <span class="token comment">// Everything that starts with &quot;library/&quot;</span>
    <span class="token operator">/</span><span class="token operator">^</span>library\<span class="token regex">/.+$/</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2><span id="final-steps"></span>Final Steps<a href="#final-steps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Optimize your output for production by following the steps mentioned in the <a href="/guides/production">production guide</a>. Let&#x27;s also add the path to your generated bundle as the package&#x27;s <code>main</code> field in with the <code>package.json</code></p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/webpack-numbers.js&quot;</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span></code></pre>
<p>Or, to add it as a standard module as per <a href="https://github.com/dherman/defense-of-dot-js/blob/master/proposal.md#typical-usage">this guide</a>:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/index.js&quot;</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span></code></pre>
<p>The key <code>main</code> refers to the <a href="https://docs.npmjs.com/files/package.json#main">standard from <code>package.json</code></a>, and <code>module</code> to <a href="https://github.com/dherman/defense-of-dot-js/blob/master/proposal.md">a</a> <a href="https://github.com/rollup/rollup/wiki/pkg.module">proposal</a> to allow the JavaScript ecosystem upgrade to use ES2015 modules without breaking backwards compatibility.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>The <code>module</code> property should point to a script that utilizes ES2015 module syntax but no other syntax features that aren&#x27;t yet supported by browsers or node. This enables webpack to parse the module syntax itself, allowing for lighter bundles via <a href="https://webpack.js.org/guides/tree-shaking/">tree shaking</a> if users are only consuming certain parts of the library.</p></aside>
<p>Now you can <a href="https://docs.npmjs.com/getting-started/publishing-npm-packages">publish it as an npm package</a> and find it at <a href="https://unpkg.com/#/">unpkg.com</a> to distribute it to your users.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>To expose stylesheets associated with your library, the <a href="/plugins/mini-css-extract-plugin"><code>MiniCssExtractPlugin</code></a> should be used. Users can then consume and load these as they would any other stylesheet.</p></aside>
<h1><span id="environment-variables"></span>Environment Variables<a href="#environment-variables" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>To disambiguate in your <code>webpack.config.js</code> between <a href="/guides/development">development</a> and <a href="/guides/production">production builds</a> you may use environment variables.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>webpack&#x27;s environment variables are different from the <a href="https://en.wikipedia.org/wiki/Environment_variable">environment variables</a> of operating system shells like <code>bash</code> and <code>CMD.exe</code></p></aside>
<p>The webpack command line <a href="/api/cli/#environment-options">environment option</a> <code>--env</code> allows you to pass in as many environment variables as you like. Environment variables will be made accessible in your <code>webpack.config.js</code>. For example, <code>--env production</code> or <code>--env goal=local</code>.</p>
<pre><code class="hljs language-bash">npx webpack --env <span class="token assign-left variable">goal</span><span class="token operator">=</span>local --env production --progress</code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Setting up your <code>env</code> variable without assignment, <code>--env production</code> sets <code>env.production</code> to <code>true</code> by default. There are also other syntaxes that you can use. See the <a href="/api/cli/#environment-options">webpack CLI</a> documentation for more information.</p></aside>
<p>There is one change that you will have to make to your webpack config. Typically, <code>module.exports</code> points to the configuration object. To use the <code>env</code> variable, you must convert <code>module.exports</code> to a function:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Use env.&lt;YOUR VARIABLE&gt; here:</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Goal: &#x27;</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span>goal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x27;local&#x27;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Production: &#x27;</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span>production<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">&#x27;./src/index.js&#x27;</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;bundle.js&#x27;</span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;dist&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Webpack CLI offers some <a href="/api/cli/#cli-environment-variables">built-in environment variables</a> which you can access inside a webpack configuration.</p></aside>
<h1><span id="build-performance"></span>Build Performance<a href="#build-performance" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>This guide contains some useful tips for improving build/compilation performance.</p>
<hr/>
<h2><span id="general"></span>General<a href="#general" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The following best practices should help, whether you&#x27;re running build scripts in <a href="/guides/development">development</a> or <a href="/guides/production">production</a>.</p>
<h3><span id="stay-up-to-date"></span>Stay Up to Date<a href="#stay-up-to-date" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Use the latest webpack version. We are always making performance improvements. The latest recommended version of webpack is:</p>
<p><a href="https://github.com/webpack/webpack/releases"><img src="https://img.shields.io/github/package-json/v/webpack/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600" alt="latest webpack version"/></a></p>
<p>Staying up-to-date with <strong>Node.js</strong> can also help with performance. On top of this, keeping your package manager (e.g. <code>npm</code> or <code>yarn</code>) up-to-date can also help. Newer versions create more efficient module trees and increase resolving speed.</p>
<h3><span id="loaders"></span>Loaders<a href="#loaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Apply loaders to the minimal number of modules necessary. Instead of:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&#x27;babel-loader&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Use the <code>include</code> field to only apply the loader modules that actually need to be transformed by it:</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        include<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&#x27;babel-loader&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3><span id="bootstrap"></span>Bootstrap<a href="#bootstrap" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Each additional loader/plugin has a bootup time. Try to use as few tools as possible.</p>
<h3><span id="resolving"></span>Resolving<a href="#resolving" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>The following steps can increase resolving speed:</p>
<ul>
<li>Minimize the number of items in <code>resolve.modules</code>, <code>resolve.extensions</code>, <code>resolve.mainFiles</code>, <code>resolve.descriptionFiles</code>, as they increase the number of filesystem calls.</li>
<li>Set <code>resolve.symlinks: false</code> if you don&#x27;t use symlinks (e.g. <code>npm link</code> or <code>yarn link</code>).</li>
<li>Set <code>resolve.cacheWithContext: false</code> if you use custom resolving plugins, that are not context specific.</li>
</ul>
<h3><span id="dlls"></span>Dlls<a href="#dlls" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Use the <code>DllPlugin</code> to move code that is changed less often into a separate compilation. This will improve the application&#x27;s compilation speed, although it does increase complexity of the build process.</p>
<h3><span id="smaller--faster"></span>Smaller = Faster<a href="#smaller--faster" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Decrease the total size of the compilation to increase build performance. Try to keep chunks small.</p>
<ul>
<li>Use fewer/smaller libraries.</li>
<li>Use the <code>SplitChunksPlugin</code> in Multi-Page Applications.</li>
<li>Use the <code>SplitChunksPlugin</code> in <code>async</code> mode in Multi-Page Applications.</li>
<li>Remove unused code.</li>
<li>Only compile the part of the code you are currently developing on.</li>
</ul>
<h3><span id="worker-pool"></span>Worker Pool<a href="#worker-pool" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>The <code>thread-loader</code> can be used to offload expensive loaders to a worker pool.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>Don&#x27;t use too many workers, as there is a boot overhead for the Node.js runtime and the loader. Minimize the module transfers between worker and main process. IPC is expensive.</p></aside>
<h3><span id="persistent-cache"></span>Persistent cache<a href="#persistent-cache" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Use <a href="/configuration/cache"><code>cache</code></a> option in webpack configuration. Clear cache directory on <code>&quot;postinstall&quot;</code> in <code>package.json</code>.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>We support yarn PnP version 3 <a href="https://yarnpkg.com/features/pnp"><code>yarn 2 berry</code></a> for persistent caching.</p></aside>
<h3><span id="custom-pluginsloaders"></span>Custom plugins/loaders<a href="#custom-pluginsloaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Profile them to not introduce a performance problem here.</p>
<h3><span id="progress-plugin"></span>Progress plugin<a href="#progress-plugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>It is possible to shorten build times by removing <code>ProgressPlugin</code> from webpack&#x27;s configuration. Keep in mind, <code>ProgressPlugin</code> might not provide as much value for fast builds as well, so make sure you are leveraging the benefits of using it.</p>
<hr/>
<h2><span id="development"></span>Development<a href="#development" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The following steps are especially useful in <em>development</em>.</p>
<h3><span id="incremental-builds"></span>Incremental Builds<a href="#incremental-builds" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Use webpack&#x27;s watch mode. Don&#x27;t use other tools to watch your files and invoke webpack. The built-in watch mode will keep track of timestamps and passes this information to the compilation for cache invalidation.</p>
<p>In some setups, watching falls back to polling mode. With many watched files, this can cause a lot of CPU load. In these cases, you can increase the polling interval with <code>watchOptions.poll</code>.</p>
<h3><span id="compile-in-memory"></span>Compile in Memory<a href="#compile-in-memory" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>The following utilities improve performance by compiling and serving assets in memory rather than writing to disk:</p>
<ul>
<li><code>webpack-dev-server</code></li>
<li><code>webpack-hot-middleware</code></li>
<li><code>webpack-dev-middleware</code></li>
</ul>
<h3><span id="statstojson-speed"></span>stats.toJson speed<a href="#statstojson-speed" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Webpack 4 outputs a large amount of data with its <code>stats.toJson()</code> by default. Avoid retrieving portions of the <code>stats</code> object unless necessary in the incremental step. <code>webpack-dev-server</code> after v3.1.3 contained a substantial performance fix to minimize the amount of data retrieved from the <code>stats</code> object per incremental build step.</p>
<h3><span id="devtool"></span>Devtool<a href="#devtool" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Be aware of the performance differences between the different <code>devtool</code> settings.</p>
<ul>
<li><code>&quot;eval&quot;</code> has the best performance, but doesn&#x27;t assist you for transpiled code.</li>
<li>The <code>cheap-source-map</code> variants are more performant if you can live with the slightly worse mapping quality.</li>
<li>Use a <code>eval-source-map</code> variant for incremental builds.</li>
</ul>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>In most cases, <code>eval-cheap-module-source-map</code> is the best option.</p></aside>
<h3><span id="avoid-production-specific-tooling"></span>Avoid Production Specific Tooling<a href="#avoid-production-specific-tooling" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Certain utilities, plugins, and loaders only make sense when building for production. For example, it usually doesn&#x27;t make sense to minify and mangle your code with the <code>TerserPlugin</code> while in development. These tools should typically be excluded in development:</p>
<ul>
<li><code>TerserPlugin</code></li>
<li><code>[fullhash]</code>/<code>[chunkhash]</code>/<code>[contenthash]</code></li>
<li><code>AggressiveSplittingPlugin</code></li>
<li><code>AggressiveMergingPlugin</code></li>
<li><code>ModuleConcatenationPlugin</code></li>
</ul>
<h3><span id="minimal-entry-chunk"></span>Minimal Entry Chunk<a href="#minimal-entry-chunk" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Webpack only emits updated chunks to the filesystem. For some configuration options, (HMR, <code>[name]</code>/<code>[chunkhash]</code>/<code>[contenthash]</code> in <code>output.chunkFilename</code>, <code>[fullhash]</code>) the entry chunk is invalidated in addition to the changed chunks.</p>
<p>Make sure the entry chunk is cheap to emit by keeping it small. The following configuration creates an additional chunk for the runtime code, so it&#x27;s cheap to generate:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    runtimeChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3><span id="avoid-extra-optimization-steps"></span>Avoid Extra Optimization Steps<a href="#avoid-extra-optimization-steps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Webpack does extra algorithmic work to optimize the output for size and load performance. These optimizations are performant for smaller codebases, but can be costly in larger ones:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    removeAvailableModules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    removeEmptyChunks<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    splitChunks<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3><span id="output-without-path-info"></span>Output Without Path Info<a href="#output-without-path-info" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Webpack has the ability to generate path info in the output bundle. However, this puts garbage collection pressure on projects that bundle thousands of modules. Turn this off in the <code>options.output.pathinfo</code> setting:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    pathinfo<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3><span id="nodejs-versions-8910-9111"></span>Node.js Versions 8.9.10-9.11.1<a href="#nodejs-versions-8910-9111" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>There was a <a href="https://github.com/nodejs/node/issues/19769">performance regression</a> in Node.js versions 8.9.10 - 9.11.1 in the ES2015 <code>Map</code> and <code>Set</code> implementations. Webpack uses those data structures liberally, so this regression affects compile times.</p>
<p>Earlier and later Node.js versions are not affected.</p>
<h3><span id="typescript-loader"></span>TypeScript Loader<a href="#typescript-loader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>To improve the build time when using <code>ts-loader</code>, use the <code>transpileOnly</code> loader option. On its own, this option turns off type checking. To gain type checking again, use the <a href="https://www.npmjs.com/package/fork-ts-checker-webpack-plugin"><code>ForkTsCheckerWebpackPlugin</code></a>. This speeds up TypeScript type checking and ESLint linting by moving each to a separate process.</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  test<span class="token operator">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      loader<span class="token operator">:</span> <span class="token string">&#x27;ts-loader&#x27;</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        transpileOnly<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>There is a <a href="https://github.com/TypeStrong/ts-loader/tree/master/examples/fork-ts-checker-webpack-plugin">full example</a> on the <code>ts-loader</code> GitHub repository.</p></aside>
<hr/>
<h2><span id="production"></span>Production<a href="#production" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The following steps are especially useful in <em>production</em>.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p><strong>Don&#x27;t sacrifice the quality of your application for small performance gains!</strong> Keep in mind that optimization quality is, in most cases, more important than build performance.</p></aside>
<h3><span id="source-maps"></span>Source Maps<a href="#source-maps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Source maps are really expensive. Do you really need them?</p>
<hr/>
<h2><span id="specific-tooling-issues"></span>Specific Tooling Issues<a href="#specific-tooling-issues" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The following tools have certain problems that can degrade build performance:</p>
<h3><span id="babel"></span>Babel<a href="#babel" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<ul>
<li>Minimize the number of preset/plugins</li>
</ul>
<h3><span id="typescript"></span>TypeScript<a href="#typescript" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<ul>
<li>Use the <code>fork-ts-checker-webpack-plugin</code> for typechecking in a separate process.</li>
<li>Configure loaders to skip typechecking.</li>
<li>Use the <code>ts-loader</code> in <code>happyPackMode: true</code> / <code>transpileOnly: true</code>.</li>
</ul>
<h3><span id="sass"></span>Sass<a href="#sass" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<ul>
<li><code>node-sass</code> has a bug which blocks threads from the Node.js thread pool. When using it with the <code>thread-loader</code> set <code>workerParallelJobs: 2</code>.</li>
</ul>
<h1><span id="content-security-policies"></span>Content Security Policies<a href="#content-security-policies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>Webpack is capable of adding a <code>nonce</code> to all scripts that it loads. To activate this feature, set a <code>__webpack_nonce__</code> variable and include it in your entry script. A unique hash-based <code>nonce</code> will then be generated and provided for each unique page view (this is why <code>__webpack_nonce__</code> is specified in the entry file and not in the configuration). Please note that the <code>__webpack_nonce__</code> should always be a base64-encoded string.</p>
<h2><span id="examples"></span>Examples<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>In the entry file:</p>
<pre><code class="hljs language-js"><span class="token comment">// ...</span>
__webpack_nonce__ <span class="token operator">=</span> <span class="token string">&#x27;c29tZSBjb29sIHN0cmluZyB3aWxsIHBvcCB1cCAxMjM=&#x27;</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span></code></pre>
<h2><span id="enabling-csp"></span>Enabling CSP<a href="#enabling-csp" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Please note that CSPs are not enabled by default. A corresponding header <code>Content-Security-Policy</code> or meta tag <code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot; ...&gt;</code> needs to be sent with the document to instruct the browser to enable the CSP. Here&#x27;s an example of what a CSP header including a CDN white-listed URL might look like:</p>
<pre><code class="hljs language-html">Content-Security-Policy: default-src &#x27;self&#x27;; script-src &#x27;self&#x27;
https://trusted.cdn.com;</code></pre>
<p>For more information on CSP and <code>nonce</code> attribute, please refer to <strong>Further Reading</strong> section at the bottom of this page.</p>
<h2><span id="trusted-types"></span>Trusted Types<a href="#trusted-types" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Webpack is also capable of using Trusted Types to load dynamically constructed scripts, to adhere to CSP <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/require-trusted-types-for"><code>require-trusted-types-for</code></a> directive restrictions. See <a href="/configuration/output/#outputtrustedtypes"><code>output.trustedTypes</code></a> configuration option.</p>
<h1><span id="development---vagrant"></span>Development - Vagrant<a href="#development---vagrant" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>If you have a more advanced project and use <a href="https://www.vagrantup.com/">Vagrant</a> to run your development environment in a Virtual Machine, you&#x27;ll often want to also run webpack in the VM.</p>
<h2><span id="configuring-the-project"></span>Configuring the Project<a href="#configuring-the-project" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>To start, make sure that the <code>Vagrantfile</code> has a static IP;</p>
<pre><code class="hljs language-ruby"><span class="token constant">Vagrant</span><span class="token punctuation">.</span>configure<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
  config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>network <span class="token symbol">:private_network</span><span class="token punctuation">,</span> ip<span class="token punctuation">:</span> <span class="token string">&quot;10.10.10.61&quot;</span>
<span class="token keyword">end</span></code></pre>
<p>Next, install <code>webpack</code>, <code>webpack-cli</code>, <code>@webpack-cli/serve</code>, and <code>webpack-dev-server</code> in your project;</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack webpack-cli @webpack-cli/serve webpack-dev-server</code></pre>
<p>Make sure to have a <code>webpack.config.js</code> file. If you haven&#x27;t already, use this as a minimal example to get started:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  context<span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">&#x27;./app.js&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>And create an <code>index.html</code> file. The script tag should point to your bundle. If <code>output.filename</code> is not specified in the config, this will be <code>bundle.js</code>.</p>
<pre><code class="hljs language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/bundle.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>Hey!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
<p>Note that you also need to create an <code>app.js</code> file.</p>
<h2><span id="running-the-server"></span>Running the Server<a href="#running-the-server" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Now, let&#x27;s run the server:</p>
<pre><code class="hljs language-bash">webpack serve --host <span class="token number">0.0</span>.0.0 --client-web-socket-url ws://10.10.10.61:8080/ws --watch-options-poll</code></pre>
<p>By default, the server will only be accessible from localhost. We&#x27;ll be accessing it from our host PC, so we need to change <code>--host</code> to allow this.</p>
<p><code>webpack-dev-server</code> will include a script in your bundle that connects to a WebSocket to reload when a change in any of your files occurs.
The <code>--client-web-socket-url</code> flag makes sure the script knows where to look for the WebSocket. The server will use port <code>8080</code> by default, so we should also specify that here.</p>
<p><code>--watch-options-poll</code> makes sure that webpack can detect changes in your files. By default, webpack listens to events triggered by the filesystem, but VirtualBox has many problems with this.</p>
<p>The server should be accessible on <code>http://10.10.10.61:8080</code> now. If you make a change in <code>app.js</code>, it should live reload.</p>
<h2><span id="advanced-usage-with-nginx"></span>Advanced Usage with nginx<a href="#advanced-usage-with-nginx" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>To mimic a more production-like environment, it is also possible to proxy the <code>webpack-dev-server</code> with nginx.</p>
<p>In your nginx configuration file, add the following:</p>
<pre><code class="hljs language-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>
  <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">8080</span><span class="token punctuation">;</span>
    <span class="token keyword">proxy_http_version</span> <span class="token number">1.1</span><span class="token punctuation">;</span>
    <span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>
    <span class="token keyword">proxy_set_header</span> Connection <span class="token string">&quot;upgrade&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">error_page</span> <span class="token number">502</span> @start<span class="token operator">-</span>webpack<span class="token operator">-</span>dev<span class="token operator">-</span><span class="token keyword">server</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">location</span> @start<span class="token operator">-</span>webpack<span class="token operator">-</span>dev<span class="token operator">-</span><span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">default_type</span> text<span class="token operator">/</span>plain<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">502</span> <span class="token string">&quot;Please start the webpack-dev-server first.&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>The <code>proxy_set_header</code> lines are important, because they allow the WebSockets to work correctly.</p>
<p>The command to start <code>webpack-dev-server</code> can then be changed to this:</p>
<pre><code class="hljs language-bash">webpack serve --client-web-socket-url ws://10.10.10.61:8080/ws --watch-options-poll</code></pre>
<p>This makes the server only accessible on <code>127.0.0.1</code>, which is fine because nginx takes care of making it available on your host PC.</p>
<h2><span id="conclusion"></span>Conclusion<a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>We made the Vagrant box accessible from a static IP, and then made <code>webpack-dev-server</code> publicly accessible so it is reachable from a browser. We then tackled a common problem that VirtualBox doesn&#x27;t send out filesystem events, causing the server to not reload on file changes.</p>
<h1><span id="dependency-management"></span>Dependency Management<a href="#dependency-management" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<blockquote>
<p>es6 modules</p>
</blockquote>
<blockquote>
<p>commonjs</p>
</blockquote>
<blockquote>
<p>amd</p>
</blockquote>
<h2><span id="require-with-expression"></span>require with expression<a href="#require-with-expression" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>A context is created if your request contains expressions, so the <strong>exact</strong> module is not known on compile time.</p>
<p>Example, given we have the following folder structure including <code>.ejs</code> files:</p>
<pre><code class="hljs language-bash">example_directory
│
└───template
│   │   table.ejs
│   │   table-row.ejs
│   │
│   └───directory
│       │   another.ejs</code></pre>
<p>When following <code>require()</code> call is evaluated:</p>
<pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./template/&#x27;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&#x27;.ejs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Webpack parses the <code>require()</code> call and extracts some information:</p>
<pre><code class="hljs language-code">Directory: ./template
Regular expression: /^.*\.ejs$/
</code></pre>
<p><strong>context module</strong></p>
<p>A context module is generated. It contains references to <strong>all modules in that directory</strong> that can be required with a request matching the regular expression. The context module contains a map which translates requests to module ids.</p>
<p>Example map:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;./table.ejs&quot;</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token property">&quot;./table-row.ejs&quot;</span><span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
  <span class="token property">&quot;./directory/another.ejs&quot;</span><span class="token operator">:</span> <span class="token number">44</span>
<span class="token punctuation">}</span></code></pre>
<p>The context module also contains some runtime logic to access the map.</p>
<p>This means dynamic requires are supported but will cause all matching modules to be included in the bundle.</p>
<h2><span id="requirecontext"></span>require.context<a href="#requirecontext" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>You can create your own context with the <code>require.context()</code> function.</p>
<p>It allows you to pass in a directory to search, a flag indicating whether subdirectories should be searched
too, and a regular expression to match files against.</p>
<p>Webpack parses for <code>require.context()</code> in the code while building.</p>
<p>The syntax is as follows:</p>
<pre><code class="hljs language-javascript">require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>
  directory<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>useSubdirectories <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>regExp <span class="token operator">=</span> <span class="token regex">/^\.\/.*$/</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>mode <span class="token operator">=</span> <span class="token string">&#x27;sync&#x27;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Examples:</p>
<pre><code class="hljs language-javascript">require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&#x27;./test&#x27;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex">/\.test\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// a context with files from the test directory that can be required with a request ending with `.test.js`.</span></code></pre>
<pre><code class="hljs language-javascript">require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&#x27;../&#x27;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.stories\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// a context with all files in the parent folder and descending folders ending with `.stories.js`.</span></code></pre>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>The arguments passed to <code>require.context</code> must be literals!</p></aside>
<h3><span id="context-module-api"></span>context module API<a href="#context-module-api" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>A context module exports a (require) function that takes one argument: the request.</p>
<p>The exported function has 3 properties: <code>resolve</code>, <code>keys</code>, <code>id</code>.</p>
<ul>
<li><code>resolve</code> is a function and returns the module id of the parsed request.</li>
<li><code>keys</code> is a function that returns an array of all possible requests that the context module can handle.</li>
</ul>
<p>This can be useful if you want to require all files in a directory or matching a pattern, Example:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">function</span> <span class="token function">importAll</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  r<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">importAll</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&#x27;../components/&#x27;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre><code class="hljs language-javascript"><span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">importAll</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  r<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">r</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">importAll</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&#x27;../components/&#x27;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// At build-time cache will be populated with all required modules.</span></code></pre>
<ul>
<li><code>id</code> is the module id of the context module. This may be useful for <code>module.hot.accept</code>.</li>
</ul>
<h1><span id="installation"></span>Installation<a href="#installation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>This guide goes through the various methods used to install webpack.</p>
<h2><span id="prerequisites"></span>Prerequisites<a href="#prerequisites" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Before we begin, make sure you have a fresh version of <a href="https://nodejs.org/en/">Node.js</a> installed. The current Long Term Support (LTS) release is an ideal starting point. You may run into a variety of issues with the older versions as they may be missing functionality webpack and/or its related packages require.</p>
<h2><span id="local-installation"></span>Local Installation<a href="#local-installation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The latest webpack release is:</p>
<p><a href="https://github.com/webpack/webpack/releases"><img src="https://img.shields.io/npm/v/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600" alt="GitHub release"/></a></p>
<p>To install the latest release or a specific version, run one of the following commands:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack
<span class="token comment"># or specific version</span>
<span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack@<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span></code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Whether to use <code>--save-dev</code> or not depends on your use cases. Say you&#x27;re using webpack only for bundling, then it&#x27;s suggested that you install it with <code>--save-dev</code> option since you&#x27;re not going to include webpack in your production build. Otherwise you can ignore <code>--save-dev</code>.</p></aside>
<p>If you&#x27;re using webpack v4 or later and want to call <code>webpack</code> from the command line, you&#x27;ll also need to install the <a href="/api/cli/">CLI</a>.</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-cli</code></pre>
<p>Installing locally is what we recommend for most projects. This makes it easier to upgrade projects individually when breaking changes are introduced. Typically webpack is run via one or more <a href="https://docs.npmjs.com/misc/scripts">npm scripts</a> which will look for a webpack installation in your local <code>node_modules</code> directory:</p>
<pre><code class="hljs language-json"><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config webpack.config.js&quot;</span>
<span class="token punctuation">}</span></code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>To run the local installation of webpack you can access its binary version as <code>node_modules/.bin/webpack</code>. Alternatively, if you are using npm v5.2.0 or greater, you can run <code>npx webpack</code> to do it.</p></aside>
<h2><span id="global-installation"></span>Global Installation<a href="#global-installation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The following NPM installation will make <code>webpack</code> available globally:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --global webpack</code></pre>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>Note that this is <strong>not a recommended practice</strong>. Installing globally locks you down to a specific version of webpack and could fail in projects that use a different version.</p></aside>
<h2><span id="bleeding-edge"></span>Bleeding Edge<a href="#bleeding-edge" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>If you are enthusiastic about using the latest that webpack has to offer, you can install beta versions or even directly from the webpack repository using the following commands:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack@next
<span class="token comment"># or a specific tag/branch</span>
<span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack/webpack<span class="token comment">#&lt;tagname/branchname&gt;</span></code></pre>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>Take caution when installing these bleeding edge releases! They may still contain bugs and therefore should not be used in production.</p></aside>
<h1><span id="hot-module-replacement"></span>Hot Module Replacement<a href="#hot-module-replacement" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>This guide extends on code examples found in the <a href="/guides/development">Development</a> guide.</p></aside>
<p>Hot Module Replacement (or HMR) is one of the most useful features offered by webpack. It allows all kinds of modules to be updated at runtime without the need for a full refresh. This page focuses on <strong>implementation</strong> while the <a href="/concepts/hot-module-replacement">concepts page</a> gives more details on how it works and why it&#x27;s useful.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p><strong>HMR</strong> is not intended for use in production, meaning it should only be used in development. See the <a href="/guides/production">building for production guide</a> for more information.</p></aside>
<h2><span id="enabling-hmr"></span>Enabling HMR<a href="#enabling-hmr" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>This feature is great for productivity. All we need to do is update our <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> configuration, and use webpack&#x27;s built-in HMR plugin. We&#x27;ll also remove the entry point for <code>print.js</code> as it will now be consumed by the <code>index.js</code> module.</p>
<p>Since <code>webpack-dev-server</code> v4.0.0, Hot Module Replacement is enabled by default.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>If you took the route of using <code>webpack-dev-middleware</code> instead of <code>webpack-dev-server</code>, please use the <a href="https://github.com/webpack-contrib/webpack-hot-middleware"><code>webpack-hot-middleware</code></a> package to enable HMR on your custom server or application.</p></aside>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line"> const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">      app: &#x27;./src/index.js&#x27;,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">      print: &#x27;./src/print.js&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   devtool: &#x27;inline-source-map&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   devServer: {
</span><span class="token prefix unchanged"> </span><span class="token line">     static: &#x27;./dist&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     hot: true,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">     new HtmlWebpackPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">       title: &#x27;Hot Module Replacement&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     }),
</span><span class="token prefix unchanged"> </span><span class="token line">   ],
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">     filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">     clean: true,
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre>
<p>you can also provide manual entry points for HMR:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line"> const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const webpack = require(&quot;webpack&quot;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">      app: &#x27;./src/index.js&#x27;,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">      print: &#x27;./src/print.js&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      // Runtime code for hot module replacement
</span><span class="token prefix inserted">+</span><span class="token line">      hot: &#x27;webpack/hot/dev-server.js&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">      // Dev server client for web socket transport, hot and live reload logic
</span><span class="token prefix inserted">+</span><span class="token line">      client: &#x27;webpack-dev-server/client/index.js?hot=true&amp;live-reload=true&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   devtool: &#x27;inline-source-map&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   devServer: {
</span><span class="token prefix unchanged"> </span><span class="token line">     static: &#x27;./dist&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     // Dev server client for web socket transport, hot and live reload logic
</span><span class="token prefix inserted">+</span><span class="token line">     hot: false,
</span><span class="token prefix inserted">+</span><span class="token line">     client: false,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">     new HtmlWebpackPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">       title: &#x27;Hot Module Replacement&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     }),
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     // Plugin for hot module replacement
</span><span class="token prefix inserted">+</span><span class="token line">     new webpack.HotModuleReplacementPlugin(),
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ],
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">     filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">     clean: true,
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>You can use the CLI to modify the <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> configuration with the following command: <code>webpack serve --hot-only</code>.</p></aside>
<p>Now let&#x27;s update the <code>index.js</code> file so that when a change inside <code>print.js</code> is detected we tell webpack to accept the updated module.</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> import _ from &#x27;lodash&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line"> import printMe from &#x27;./print.js&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">   const element = document.createElement(&#x27;div&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">   const btn = document.createElement(&#x27;button&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   btn.innerHTML = &#x27;Click me and check the console!&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line">   btn.onclick = printMe;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   element.appendChild(btn);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return element;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> document.body.appendChild(component());
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line"> if (module.hot) {
</span><span class="token prefix inserted">+</span><span class="token line">   module.hot.accept(&#x27;./print.js&#x27;, function() {
</span><span class="token prefix inserted">+</span><span class="token line">     console.log(&#x27;Accepting the updated printMe module!&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line">     printMe();
</span><span class="token prefix inserted">+</span><span class="token line">   })
</span><span class="token prefix inserted">+</span><span class="token line"> }</span></span></code></pre>
<p>Start changing the <code>console.log</code> statement in <code>print.js</code>, and you should see the following output in the browser console (don&#x27;t worry about that <code>button.onclick = printMe</code> output for now, we will also update that part later).</p>
<p><strong>print.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> export default function printMe() {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   console.log(&#x27;I get called from print.js!&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   console.log(&#x27;Updating print.js...&#x27;);
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<p><strong>console</strong></p>
<pre><code class="hljs language-diff">[HMR] Waiting for update signal from WDS...
main.js:4395 [WDS] Hot Module Replacement enabled.
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> 2main.js:4395 [WDS] App updated. Recompiling...
</span><span class="token prefix inserted">+</span><span class="token line"> main.js:4395 [WDS] App hot update...
</span><span class="token prefix inserted">+</span><span class="token line"> main.js:4330 [HMR] Checking for updates on the server...
</span><span class="token prefix inserted">+</span><span class="token line"> main.js:10024 Accepting the updated printMe module!
</span><span class="token prefix inserted">+</span><span class="token line"> 0.4b8ee77….hot-update.js:10 Updating print.js...
</span><span class="token prefix inserted">+</span><span class="token line"> main.js:4330 [HMR] Updated modules:
</span><span class="token prefix inserted">+</span><span class="token line"> main.js:4330 [HMR]  - 20</span></span></code></pre>
<h2><span id="via-the-nodejs-api"></span>Via the Node.js API<a href="#via-the-nodejs-api" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>When using Webpack Dev Server with the Node.js API, don&#x27;t put the dev server options on the webpack configuration object. Instead, pass them as a second parameter upon creation. For example:</p>
<p><code>new WebpackDevServer(options, compiler)</code></p>
<p>To enable HMR, you also need to modify your webpack configuration object to include the HMR entry points. Here&#x27;s a small example of how that might look:</p>
<p><strong>dev-server.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;html-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpackDevServer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack-dev-server&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&#x27;development&#x27;</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// Runtime code for hot module replacement</span>
    <span class="token string">&#x27;webpack/hot/dev-server.js&#x27;</span><span class="token punctuation">,</span>
    <span class="token comment">// Dev server client for web socket transport, hot and live reload logic</span>
    <span class="token string">&#x27;webpack-dev-server/client/index.js?hot=true&amp;live-reload=true&#x27;</span><span class="token punctuation">,</span>
    <span class="token comment">// Your entry</span>
    <span class="token string">&#x27;./src/index.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">&#x27;inline-source-map&#x27;</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// Plugin for hot module replacement</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#x27;Hot Module Replacement&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;[name].bundle.js&#x27;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;dist&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    clean<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// `hot` and `client` options are disabled because we added them manually</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">webpackDevServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> hot<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> client<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> server<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;dev server is running&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>See the <a href="/api/webpack-dev-server/">full documentation of <code>webpack-dev-server</code> Node.js API</a>.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>If you&#x27;re <a href="/guides/development/#using-webpack-dev-middleware">using <code>webpack-dev-middleware</code></a>, check out the <a href="https://github.com/webpack-contrib/webpack-hot-middleware"><code>webpack-hot-middleware</code></a> package to enable HMR on your custom dev server.</p></aside>
<h2><span id="gotchas"></span>Gotchas<a href="#gotchas" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Hot Module Replacement can be tricky. To show this, let&#x27;s go back to our working example. If you go ahead and click the button on the example page, you will realize the console is printing the old <code>printMe</code> function.</p>
<p>This is happening because the button&#x27;s <code>onclick</code> event handler is still bound to the original <code>printMe</code> function.</p>
<p>To make this work with HMR we need to update that binding to the new <code>printMe</code> function using <code>module.hot.accept</code>:</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> import _ from &#x27;lodash&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line"> import printMe from &#x27;./print.js&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">   const element = document.createElement(&#x27;div&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">   const btn = document.createElement(&#x27;button&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   btn.innerHTML = &#x27;Click me and check the console!&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line">   btn.onclick = printMe;  // onclick event is bind to the original printMe function
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   element.appendChild(btn);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return element;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> document.body.appendChild(component());
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> let element = component(); // Store the element to re-render on print.js changes
</span><span class="token prefix inserted">+</span><span class="token line"> document.body.appendChild(element);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> if (module.hot) {
</span><span class="token prefix unchanged"> </span><span class="token line">   module.hot.accept(&#x27;./print.js&#x27;, function() {
</span><span class="token prefix unchanged"> </span><span class="token line">     console.log(&#x27;Accepting the updated printMe module!&#x27;);
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     printMe();
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     document.body.removeChild(element);
</span><span class="token prefix inserted">+</span><span class="token line">     element = component(); // Re-render the &quot;component&quot; to update the click handler
</span><span class="token prefix inserted">+</span><span class="token line">     document.body.appendChild(element);
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   })
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<p>This is only one example, but there are many others that can easily trip people up. Luckily, there are a lot of loaders out there (some of which are mentioned below) that will make hot module replacement much easier.</p>
<h2><span id="hmr-with-stylesheets"></span>HMR with Stylesheets<a href="#hmr-with-stylesheets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Hot Module Replacement with CSS is actually fairly straightforward with the help of the <code>style-loader</code>. This loader uses <code>module.hot.accept</code> behind the scenes to patch <code>&lt;style&gt;</code> tags when CSS dependencies are updated.</p>
<p>First let&#x27;s install both loaders with the following command:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev style-loader css-loader</code></pre>
<p>Now let&#x27;s update the configuration file to make use of the loader.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line"> const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">     app: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   devtool: &#x27;inline-source-map&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   devServer: {
</span><span class="token prefix unchanged"> </span><span class="token line">     static: &#x27;./dist&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     hot: true,
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   module: {
</span><span class="token prefix inserted">+</span><span class="token line">     rules: [
</span><span class="token prefix inserted">+</span><span class="token line">       {
</span><span class="token prefix inserted">+</span><span class="token line">         test: /\.css$/,
</span><span class="token prefix inserted">+</span><span class="token line">         use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;],
</span><span class="token prefix inserted">+</span><span class="token line">       },
</span><span class="token prefix inserted">+</span><span class="token line">     ],
</span><span class="token prefix inserted">+</span><span class="token line">   },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">     new HtmlWebpackPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">       title: &#x27;Hot Module Replacement&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     }),
</span><span class="token prefix unchanged"> </span><span class="token line">   ],
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">     filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">     clean: true,
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre>
<p>Hot loading stylesheets can be done by importing them into a module:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> | - package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> | - webpack.config.js
</span><span class="token prefix unchanged"> </span><span class="token line"> | - /dist
</span><span class="token prefix unchanged"> </span><span class="token line">   | - bundle.js
</span><span class="token prefix unchanged"> </span><span class="token line"> | - /src
</span><span class="token prefix unchanged"> </span><span class="token line">   | - index.js
</span><span class="token prefix unchanged"> </span><span class="token line">   | - print.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   | - styles.css</span></span></code></pre>
<p><strong>styles.css</strong></p>
<pre><code class="hljs language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> import _ from &#x27;lodash&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line"> import printMe from &#x27;./print.js&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import &#x27;./styles.css&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">   const element = document.createElement(&#x27;div&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">   const btn = document.createElement(&#x27;button&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   btn.innerHTML = &#x27;Click me and check the console!&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line">   btn.onclick = printMe;  // onclick event is bind to the original printMe function
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   element.appendChild(btn);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return element;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> let element = component();
</span><span class="token prefix unchanged"> </span><span class="token line"> document.body.appendChild(element);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> if (module.hot) {
</span><span class="token prefix unchanged"> </span><span class="token line">   module.hot.accept(&#x27;./print.js&#x27;, function() {
</span><span class="token prefix unchanged"> </span><span class="token line">     console.log(&#x27;Accepting the updated printMe module!&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">     document.body.removeChild(element);
</span><span class="token prefix unchanged"> </span><span class="token line">     element = component(); // Re-render the &quot;component&quot; to update the click handler
</span><span class="token prefix unchanged"> </span><span class="token line">     document.body.appendChild(element);
</span><span class="token prefix unchanged"> </span><span class="token line">   })
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre>
<p>Change the style on <code>body</code> to <code>background: red;</code> and you should immediately see the page&#x27;s background color change without a full refresh.</p>
<p><strong>styles.css</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> body {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   background: blue;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   background: red;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h2><span id="other-code-and-frameworks"></span>Other Code and Frameworks<a href="#other-code-and-frameworks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>There are many other loaders and examples out in the community to make HMR interact smoothly with a variety of frameworks and libraries...</p>
<ul>
<li><a href="https://github.com/gaearon/react-hot-loader">React Hot Loader</a>: Tweak react components in real time.</li>
<li><a href="https://github.com/vuejs/vue-loader">Vue Loader</a>: This loader supports HMR for vue components out of the box.</li>
<li><a href="https://github.com/klazuka/elm-hot-webpack-loader">Elm Hot webpack Loader</a>: Supports HMR for the Elm programming language.</li>
<li><a href="https://angular.io/cli/serve">Angular HMR</a>: No loader necessary! HMR support is built in the Angular CLI, add the <code>--hmr</code> flag to you <code>ng serve</code> command.</li>
<li><a href="https://github.com/sveltejs/svelte-loader">Svelte Loader</a>: This loader supports HMR for Svelte components out of the box.</li>
</ul>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>If you know of any other loaders or plugins that help with or enhance HMR, please submit a pull request to add them to this list!</p></aside>
<h1><span id="tree-shaking"></span>Tree Shaking<a href="#tree-shaking" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p><em>Tree shaking</em> is a term commonly used in the JavaScript context for dead-code elimination. It relies on the <a href="http://exploringjs.com/es6/ch_modules.html#static-module-structure">static structure</a> of ES2015 module syntax, i.e. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"><code>import</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export"><code>export</code></a>. The name and concept have been popularized by the ES2015 module bundler <a href="https://github.com/rollup/rollup">rollup</a>.</p>
<p>The webpack 2 release came with built-in support for ES2015 modules (alias <em>harmony modules</em>) as well as unused module export detection. The new webpack 4 release expands on this capability with a way to provide hints to the compiler via the <code>&quot;sideEffects&quot;</code> <code>package.json</code> property to denote which files in your project are &quot;pure&quot; and therefore safe to prune if unused.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>The remainder of this guide will stem from <a href="/guides/getting-started">Getting Started</a>. If you haven&#x27;t read through that guide already, please do so now.</p></aside>
<h2><span id="add-a-utility"></span>Add a Utility<a href="#add-a-utility" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Let&#x27;s add a new utility file to our project, <code>src/math.js</code>, that exports two functions:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- package-lock.json
|- webpack.config.js
|- /dist
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- bundle.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- index.html
</span></span>|- /src
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- index.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- math.js
</span></span>|- /node_modules</code></pre>
<p><strong>src/math.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">cube</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Set the <code>mode</code> configuration option to <a href="/configuration/mode/#mode-development">development</a> to make sure that the bundle is not minified:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require(&#x27;path&#x27;);

module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line"> output: {
</span><span class="token prefix unchanged"> </span><span class="token line">   filename: &#x27;bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> mode: &#x27;development&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line"> optimization: {
</span><span class="token prefix inserted">+</span><span class="token line">   usedExports: true,
</span><span class="token prefix inserted">+</span><span class="token line"> },
</span></span>};</code></pre>
<p>With that in place, let&#x27;s update our entry script to utilize one of these new methods and remove <code>lodash</code> for simplicity:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import _ from &#x27;lodash&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import { cube } from &#x27;./math.js&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function component() {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   const element = document.createElement(&#x27;div&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   const element = document.createElement(&#x27;pre&#x27;);
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   // Lodash, now imported by this script
</span><span class="token prefix deleted">-</span><span class="token line">   element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   element.innerHTML = [
</span><span class="token prefix inserted">+</span><span class="token line">     &#x27;Hello webpack!&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">     &#x27;5 cubed is equal to &#x27; + cube(5)
</span><span class="token prefix inserted">+</span><span class="token line">   ].join(&#x27;\n\n&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return element;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> document.body.appendChild(component());</span></span></code></pre>
<p>Note that we <strong>did not <code>import</code> the <code>square</code> method</strong> from the <code>src/math.js</code> module. That function is what&#x27;s known as &quot;dead code&quot;, meaning an unused <code>export</code> that should be dropped. Now let&#x27;s run our npm script, <code>npm run build</code>, and inspect the output bundle:</p>
<p><strong>dist/bundle.js (around lines 90 - 100)</strong></p>
<pre><code class="hljs language-js"><span class="token comment">/* 1 */</span>
<span class="token comment">/***/</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> __webpack_exports__<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">&#x27;use strict&#x27;</span><span class="token punctuation">;</span>
  <span class="token comment">/* unused harmony export square */</span>
  <span class="token comment">/* harmony export (immutable) */</span> __webpack_exports__<span class="token punctuation">[</span><span class="token string">&#x27;a&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> cube<span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">cube</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Note the <code>unused harmony export square</code> comment above. If you look at the code below it, you&#x27;ll notice that <code>square</code> is not being imported, however, it is still included in the bundle. We&#x27;ll fix that in the next section.</p>
<h2><span id="mark-the-file-as-side-effect-free"></span>Mark the file as side-effect-free<a href="#mark-the-file-as-side-effect-free" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>In a 100% ESM module world, identifying side effects is straightforward. However, we aren&#x27;t there quite yet, so in the mean time it&#x27;s necessary to provide hints to webpack&#x27;s compiler on the &quot;pureness&quot; of your code.</p>
<p>The way this is accomplished is the <code>&quot;sideEffects&quot;</code> package.json property.</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-project&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span></code></pre>
<p>All the code noted above does not contain side effects, so we can mark the property as <code>false</code> to inform webpack that it can safely prune unused exports.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>A &quot;side effect&quot; is defined as code that performs a special behavior when imported, other than exposing one or more exports. An example of this are polyfills, which affect the global scope and usually do not provide an export.</p></aside>
<p>If your code did have some side effects though, an array can be provided instead:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-project&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/some-side-effectful-file.js&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<p>The array accepts simple glob patterns to the relevant files. It uses <a href="https://github.com/fitzgen/glob-to-regexp">glob-to-regexp</a> under the hood (Supports: <code>*</code>, <code>**</code>, <code>{a,b}</code>, <code>[a-z]</code>). Patterns like <code>*.css</code>, which do not include a <code>/</code>, will be treated like <code>**/*.css</code>.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Note that any imported file is subject to tree shaking. This means if you use something like <code>css-loader</code> in your project and import a CSS file, it needs to be added to the side effect list so it will not be unintentionally dropped in production mode:</p></aside>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-project&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/some-side-effectful-file.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*.css&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<p>Finally, <code>&quot;sideEffects&quot;</code> can also be set from the <a href="/configuration/module/#modulerules"><code>module.rules</code> configuration option</a>.</p>
<h2><span id="clarifying-tree-shaking-and-sideeffects"></span>Clarifying tree shaking and <code>sideEffects</code><a href="#clarifying-tree-shaking-and-sideeffects" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The <a href="/configuration/optimization/#optimizationsideeffects"><code>sideEffects</code></a> and <a href="/configuration/optimization/#optimizationusedexports"><code>usedExports</code></a> (more known as tree shaking) optimizations are two different things.</p>
<p><strong><code>sideEffects</code> is much more effective</strong> since it allows to skip whole modules/files and the complete subtree.</p>
<p><code>usedExports</code> relies on <a href="https://github.com/terser-js/terser">terser</a> to detect side effects in statements. It is a difficult task in JavaScript and not as effective as straightforward <code>sideEffects</code> flag. It also can&#x27;t skip subtree/dependencies since the spec says that side effects need to be evaluated. While exporting function works fine, React&#x27;s Higher Order Components (HOC) are problematic in this regard.</p>
<p>Let&#x27;s make an example:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@shopify/polaris&#x27;</span><span class="token punctuation">;</span></code></pre>
<p>The pre-bundled version looks like this:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> hoistStatics <span class="token keyword">from</span> <span class="token string">&#x27;hoist-non-react-statics&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Button</span><span class="token punctuation">(</span><span class="token parameter">_ref</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> _final <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span>
    <span class="token keyword">var</span> _len <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span> objs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>_len<span class="token punctuation">)</span><span class="token punctuation">,</span> _key <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    _key <span class="token operator">&lt;</span> _len<span class="token punctuation">;</span>
    _key<span class="token operator">++</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    objs<span class="token punctuation">[</span>_key<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>_key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _objs <span class="token operator">=</span> objs<span class="token punctuation">;</span> _i <span class="token operator">&lt;</span> _objs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> _i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> _objs<span class="token punctuation">[</span>_i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">mergeRecursively</span><span class="token punctuation">(</span>_final<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> _final<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">withAppProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">addProvider</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> WithProvider <span class="token operator">=</span>
      <span class="token comment">/*#__PURE__*/</span>
      <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_React$Component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token keyword">return</span> WithProvider<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Component<span class="token punctuation">)</span><span class="token punctuation">;</span>

    WithProvider<span class="token punctuation">.</span>contextTypes <span class="token operator">=</span> WrappedComponent<span class="token punctuation">.</span>contextTypes
      <span class="token operator">?</span> <span class="token function">merge</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">.</span>contextTypes<span class="token punctuation">,</span> polarisAppProviderContextTypes<span class="token punctuation">)</span>
      <span class="token operator">:</span> polarisAppProviderContextTypes<span class="token punctuation">;</span>
    <span class="token keyword">var</span> FinalComponent <span class="token operator">=</span> <span class="token function">hoistStatics</span><span class="token punctuation">(</span>WithProvider<span class="token punctuation">,</span> WrappedComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> FinalComponent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> Button$<span class="token number">1</span> <span class="token operator">=</span> <span class="token function">withAppProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Button<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...,</span>
  Button$<span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>When <code>Button</code> is unused you can effectively remove the <code>export { Button$1 };</code> which leaves all the remaining code. So the question is &quot;Does this code have any side effects or can it be safely removed?&quot;. Difficult to say, especially because of this line <code>withAppProvider()(Button)</code>. <code>withAppProvider</code> is called and the return value is also called. Are there any side effects when calling <code>merge</code> or <code>hoistStatics</code>? Are there side effects when assigning <code>WithProvider.contextTypes</code> (Setter?) or when reading <code>WrappedComponent.contextTypes</code> (Getter?).</p>
<p>Terser actually tries to figure it out, but it doesn&#x27;t know for sure in many cases. This doesn&#x27;t mean that terser is not doing its job well because it can&#x27;t figure it out. It&#x27;s too difficult to determine it reliably in a dynamic language like JavaScript.</p>
<p>But we can help terser by using the <code>/*#__PURE__*/</code> annotation. It flags a statement as side effect free. So a small change would make it possible to tree-shake the code:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">var</span> Button$<span class="token number">1</span> <span class="token operator">=</span> <span class="token comment">/*#__PURE__*/</span> <span class="token function">withAppProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Button<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>This would allow to remove this piece of code. But there are still questions with the imports which need to be included/evaluated because they could contain side effects.</p>
<p>To tackle this, we use the <a href="/guides/tree-shaking/#mark-the-file-as-side-effect-free"><code>&quot;sideEffects&quot;</code></a> property in <code>package.json</code>.</p>
<p>It&#x27;s similar to <code>/*#__PURE__*/</code> but on a module level instead of a statement level. It says (<code>&quot;sideEffects&quot;</code> property): &quot;If no direct export from a module flagged with no-sideEffects is used, the bundler can skip evaluating the module for side effects.&quot;.</p>
<p>In the Shopify&#x27;s Polaris example, original modules look like this:</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token string">&#x27;./configure&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&#x27;./types&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&#x27;./components&#x27;</span><span class="token punctuation">;</span></code></pre>
<p><strong>components/index.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token comment">// ...</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> Breadcrumbs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./Breadcrumbs&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> Button<span class="token punctuation">,</span> buttonFrom<span class="token punctuation">,</span> buttonsFrom <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./Button&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> ButtonGroup <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./ButtonGroup&#x27;</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span></code></pre>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-json"><span class="token comment">// ...</span>
<span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;**/*.css&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;**/*.scss&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;./esnext/index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;./esnext/configure.js&quot;</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token comment">// ...</span></code></pre>
<p>For <code>import { Button } from &quot;@shopify/polaris&quot;;</code> this has the following implications:</p>
<ul>
<li>include it: include the module, evaluate it and continue analysing dependencies</li>
<li>skip over: don&#x27;t include it, don&#x27;t evaluate it but continue analysing dependencies</li>
<li>exclude it: don&#x27;t include it, don&#x27;t evaluate it and don&#x27;t analyse dependencies</li>
</ul>
<p>Specifically per matching resource(s):</p>
<ul>
<li><code>index.js</code>: No direct export is used, but flagged with sideEffects -&gt; include it</li>
<li><code>configure.js</code>: No export is used, but flagged with sideEffects -&gt; include it</li>
<li><code>types/index.js</code>: No export is used, not flagged with sideEffects -&gt; exclude it</li>
<li><code>components/index.js</code>: No direct export is used, not flagged with sideEffects, but reexported exports are used -&gt; skip over</li>
<li><code>components/Breadcrumbs.js</code>: No export is used, not flagged with sideEffects -&gt; exclude it. This also excluded all dependencies like <code>components/Breadcrumbs.css</code> even if they are flagged with sideEffects.</li>
<li><code>components/Button.js</code>: Direct export is used, not flagged with sideEffects -&gt; include it</li>
<li><code>components/Button.css</code>: No export is used, but flagged with sideEffects -&gt; include it</li>
</ul>
<p>In this case only 4 modules are included into the bundle:</p>
<ul>
<li><code>index.js</code>: pretty much empty</li>
<li><code>configure.js</code></li>
<li><code>components/Button.js</code></li>
<li><code>components/Button.css</code></li>
</ul>
<p>After this optimization, other optimizations can still apply. For example: <code>buttonFrom</code> and <code>buttonsFrom</code> exports from <code>Button.js</code> are unused too. <code>usedExports</code> optimization will pick it up and terser may be able to drop some statements from the module.</p>
<p>Module Concatenation also applies. So that these 4 modules plus the entry module (and probably more dependencies) can be concatenated. <strong><code>index.js</code> has no code generated in the end</strong>.</p>
<h2><span id="full-example-understanding-side-effects-with-css-files"></span>Full Example: Understanding Side Effects with CSS Files<a href="#full-example-understanding-side-effects-with-css-files" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>To better understand the impact of the <code>sideEffects</code> flag, let&#x27;s look at a complete example of an npm package with CSS assets and how they might be affected during tree shaking. We&#x27;ll create a fictional UI component library called &quot;awesome-ui&quot;.</p>
<h3><span id="package-structure"></span>Package Structure<a href="#package-structure" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Our example package looks like this:</p>
<pre><code class="hljs language-bash">awesome-ui/
├── package.json
├── dist/
│   ├── index.js
│   ├── components/
│   │   ├── index.js
│   │   ├── Button/
│   │   │   ├── index.js
│   │   │   └── Button.css
│   │   ├── Card/
│   │   │   ├── index.js
│   │   │   └── Card.css
│   │   └── Modal/
│   │       ├── index.js
│   │       └── Modal.css
│   └── theme/
│       ├── index.js
│       └── defaultTheme.css</code></pre>
<h3><span id="package-files-content"></span>Package Files Content<a href="#package-files-content" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;awesome-ui&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>dist/index.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&#x27;./components&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&#x27;./theme&#x27;</span><span class="token punctuation">;</span></code></pre>
<p><strong>dist/components/index.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./Button&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> Card <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./Card&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> Modal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./Modal&#x27;</span><span class="token punctuation">;</span></code></pre>
<p><strong>dist/components/Button/index.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token string">&#x27;./Button.css&#x27;</span><span class="token punctuation">;</span> <span class="token comment">// This has a side effect - it applies styles when imported!</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Button</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Button component implementation</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;button&#x27;</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>props<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>dist/components/Button/Button.css</strong></p>
<pre><code class="hljs language-css"><span class="token selector">.awesome-ui-button</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #0078d7<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 8px 16px<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>dist/components/Card/index.js</strong> and <strong>dist/components/Modal/index.js</strong> would have similar structure.</p>
<p><strong>dist/theme/index.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token string">&#x27;./defaultTheme.css&#x27;</span><span class="token punctuation">;</span> <span class="token comment">// This has a side effect!</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> themeColors <span class="token operator">=</span> <span class="token punctuation">{</span>
  primary<span class="token operator">:</span> <span class="token string">&#x27;#0078d7&#x27;</span><span class="token punctuation">,</span>
  secondary<span class="token operator">:</span> <span class="token string">&#x27;#f3f2f1&#x27;</span><span class="token punctuation">,</span>
  danger<span class="token operator">:</span> <span class="token string">&#x27;#d13438&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3><span id="what-happens-when-consuming-this-package"></span>What Happens When Consuming This Package?<a href="#what-happens-when-consuming-this-package" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Now, imagine a consumer application that only wants to use the Button component:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;awesome-ui&#x27;</span><span class="token punctuation">;</span>

<span class="token comment">// Use the Button component</span></code></pre>
<h4><span id="with-sideeffects-false-in-packagejson"></span>With <code>sideEffects: false</code> in package.json<a href="#with-sideeffects-false-in-packagejson" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<p>When webpack processes this import with tree shaking enabled:</p>
<ol>
<li>It sees the import for only Button</li>
<li>It looks at the package.json and sees <code>sideEffects: false</code></li>
<li>It determines it only needs to include the Button component code</li>
<li>Since all files are marked as having no side effects, it will include <strong>only</strong> the JavaScript code for the Button</li>
<li><strong>The CSS file import gets dropped!</strong> Even though Button.css is imported in Button/index.js, webpack assumes this import has no side effects.</li>
</ol>
<p>The result: The Button component will render, but without any styling since Button.css was eliminated during tree shaking.</p>
<h4><span id="the-correct-configuration-for-this-package"></span>The Correct Configuration for This Package<a href="#the-correct-configuration-for-this-package" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<p>To fix this, we need to update package.json to properly mark CSS files as having side effects:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;awesome-ui&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/*.css&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<p>With this configuration:</p>
<ol>
<li>Webpack still identifies that only the Button component is needed</li>
<li>But now it recognizes that CSS files have side effects</li>
<li>So, it includes Button.css when processing Button/index.js</li>
</ol>
<h3><span id="the-decision-tree-for-side-effects"></span>The Decision Tree for Side Effects<a href="#the-decision-tree-for-side-effects" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Here&#x27;s how webpack evaluates modules during tree shaking:</p>
<ol>
<li>
<p>Is the export from this module used directly or indirectly?</p>
<ul>
<li>If yes: Include the module</li>
<li>If no: Continue to step 2</li>
</ul>
</li>
<li>
<p>Is the module marked with side effects?</p>
<ul>
<li>If yes (<code>sideEffects</code> includes this file or is <code>true</code>): Include the module</li>
<li>If no (<code>sideEffects</code> is <code>false</code> or doesn&#x27;t include this file): Exclude the module and its dependencies</li>
</ul>
</li>
</ol>
<p>For our library&#x27;s files with the proper sideEffects configuration:</p>
<ul>
<li><code>dist/index.js</code>: No direct export used, no side effects -&gt; Skip over</li>
<li><code>dist/components/index.js</code>: No direct export used, no side effects -&gt; Skip over</li>
<li><code>dist/components/Button/index.js</code>: Direct export used -&gt; Include</li>
<li><code>dist/components/Button/Button.css</code>: No exports, has side effects -&gt; Include</li>
<li><code>dist/components/Card/*</code>: No exports used, no side effects -&gt; Exclude</li>
<li><code>dist/components/Modal/*</code>: No exports used, no side effects -&gt; Exclude</li>
<li><code>dist/theme/*</code>: No exports used, no side effects -&gt; Exclude</li>
</ul>
<h3><span id="real-world-impact"></span>Real-World Impact<a href="#real-world-impact" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>The impact of incorrect side effects configuration can be significant:</p>
<ol>
<li><strong>CSS not being included</strong>: Components render without styles</li>
<li><strong>Global JavaScript not running</strong>: Polyfills or global configurations don&#x27;t execute</li>
<li><strong>Initialization code skipped</strong>: Functions that register components or set up event listeners never run</li>
</ol>
<p>These issues can be particularly hard to debug because they often only appear in production builds when tree shaking is enabled.</p>
<h3><span id="testing-side-effects-configuration"></span>Testing Side Effects Configuration<a href="#testing-side-effects-configuration" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>A good way to test if your side effects configuration is correct:</p>
<ol>
<li>Create a minimal application that imports just one component</li>
<li>Build it with production settings (with tree shaking enabled)</li>
<li>Check if all necessary styles and behaviors work correctly</li>
<li>Look at the generated bundle to confirm the right files are included</li>
</ol>
<h2><span id="mark-a-function-call-as-side-effect-free"></span>Mark a function call as side-effect-free<a href="#mark-a-function-call-as-side-effect-free" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>It is possible to tell webpack that a function call is side-effect-free (pure) by using the <code>/*#__PURE__*/</code> annotation. It can be put in front of function calls to mark them as side-effect-free. Arguments passed to the function are not being marked by the annotation and may need to be marked individually. When the initial value in a variable declaration of an unused variable is considered as side-effect-free (pure), it is getting marked as dead code, not executed and dropped by the minimizer.
This behavior is enabled when <a href="/configuration/optimization/#optimizationinnergraph"><code>optimization.innerGraph</code></a> is set to <code>true</code>.</p>
<p><strong>file.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token comment">/*#__PURE__*/</span> <span class="token function">double</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2><span id="minify-the-output"></span>Minify the Output<a href="#minify-the-output" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>So we&#x27;ve cued up our &quot;dead code&quot; to be dropped by using the <code>import</code> and <code>export</code> syntax, but we still need to drop it from the bundle. To do that, set the <code>mode</code> configuration option to <a href="/configuration/mode/#mode-production"><code>production</code></a>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require(&#x27;path&#x27;);

module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line"> output: {
</span><span class="token prefix unchanged"> </span><span class="token line">   filename: &#x27;bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> mode: &#x27;development&#x27;,
</span><span class="token prefix deleted">-</span><span class="token line"> optimization: {
</span><span class="token prefix deleted">-</span><span class="token line">   usedExports: true,
</span><span class="token prefix deleted">-</span><span class="token line"> }
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> mode: &#x27;production&#x27;,
</span></span>};</code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Note that the <code>--optimize-minimize</code> flag can be used to enable <code>TerserPlugin</code> as well.</p></aside>
<p>With that squared away, we can run another <code>npm run build</code> and see if anything has changed.</p>
<p>Notice anything different about <code>dist/bundle.js</code>? The whole bundle is now minified and mangled, but, if you look carefully, you won&#x27;t see the <code>square</code> function included but will see a mangled version of the <code>cube</code> function (<code>function r(e){return e*e*e}n.a=r</code>). With minification and tree shaking, our bundle is now a few bytes smaller! While that may not seem like much in this contrived example, tree shaking can yield a significant decrease in bundle size when working on larger applications with complex dependency trees.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p><a href="/plugins/module-concatenation-plugin/"><code>ModuleConcatenationPlugin</code></a> is needed for the tree shaking to work. It is added by <code>mode: &#x27;production&#x27;</code>. If you are not using it, remember to add the <a href="/plugins/module-concatenation-plugin/"><code>ModuleConcatenationPlugin</code></a> manually.</p></aside>
<h2><span id="common-pitfalls-with-side-effects"></span>Common Pitfalls with Side Effects<a href="#common-pitfalls-with-side-effects" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>When working with tree shaking and the <code>sideEffects</code> flag, there are several common pitfalls to avoid:</p>
<h3><span id="1-over-optimistic-sideeffects-false"></span>1. Over-optimistic <code>sideEffects: false</code><a href="#1-over-optimistic-sideeffects-false" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Setting <code>sideEffects: false</code> in your package.json is tempting for optimal tree shaking, but this can cause problems if your code actually does have side effects. Examples of hidden side effects:</p>
<ul>
<li>CSS imports (as demonstrated above)</li>
<li>Polyfills that modify global objects</li>
<li>Libraries that register global event listeners</li>
<li>Code that modifies prototype chains</li>
</ul>
<h3><span id="2-re-exports-with-side-effects"></span>2. Re-exports with Side Effects<a href="#2-re-exports-with-side-effects" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Consider this pattern:</p>
<pre><code class="hljs language-javascript"><span class="token comment">// This file has side effects that might be skipped</span>
<span class="token keyword">import</span> <span class="token string">&#x27;./polyfill&#x27;</span><span class="token punctuation">;</span>

<span class="token comment">// Re-export components</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&#x27;./components&#x27;</span><span class="token punctuation">;</span></code></pre>
<p>If a consumer only imports specific components, the polyfill import might be skipped entirely if not properly marked with side effects.</p>
<h3><span id="3-forgetting-about-nested-dependencies"></span>3. Forgetting about Nested Dependencies<a href="#3-forgetting-about-nested-dependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Your package might correctly mark side effects, but if it depends on third-party packages that incorrectly mark their side effects, you might still encounter issues.</p>
<h3><span id="4-testing-only-in-development-mode"></span>4. Testing Only in Development Mode<a href="#4-testing-only-in-development-mode" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Tree shaking typically only fully activates in production mode. Testing only in development can hide tree shaking issues until deployment.</p>
<h2><span id="conclusion"></span>Conclusion<a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>What we&#x27;ve learned is that in order to take advantage of <em>tree shaking</em>, you must...</p>
<ul>
<li>Use ES2015 module syntax (i.e. <code>import</code> and <code>export</code>).</li>
<li>Ensure no compilers transform your ES2015 module syntax into CommonJS modules (this is the default behavior of the popular Babel preset @babel/preset-env - see the <a href="https://babeljs.io/docs/en/babel-preset-env#modules">documentation</a> for more details).</li>
<li>Add a <code>&quot;sideEffects&quot;</code> property to your project&#x27;s <code>package.json</code> file.</li>
<li>Be careful about correctly marking files with side effects, especially CSS imports.</li>
<li>Use the <a href="/configuration/mode/#mode-production"><code>production</code></a> <code>mode</code> configuration option to enable <a href="/configuration/mode/#usage">various optimizations</a> including minification and tree shaking (side effects optimization is enabled in development mode using the flag value).</li>
<li>Make sure you set a correct value for <a href="/configuration/devtool/#devtool"><code>devtool</code></a> as some of them can&#x27;t be used in <code>production</code> mode.</li>
</ul>
<p>You can imagine your application as a tree. The source code and libraries you actually use represent the green, living leaves of the tree. Dead code represents the brown, dead leaves of the tree that are consumed by autumn. In order to get rid of the dead leaves, you have to shake the tree, causing them to fall.</p>
<p>If you are interested in more ways to optimize your output, please jump to the next guide for details on building for <a href="/guides/production">production</a>.</p>
<h1><span id="production"></span>Production<a href="#production" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>In this guide, we&#x27;ll dive into some of the best practices and utilities for building a production site or application.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>This walkthrough stems from <a href="/guides/tree-shaking">Tree Shaking</a> and <a href="/guides/development">Development</a>. Please ensure you are familiar with the concepts/setup introduced in those guides before continuing on.</p></aside>
<h2><span id="setup"></span>Setup<a href="#setup" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The goals of <em>development</em> and <em>production</em> builds differ greatly. In <em>development</em>, we want strong source mapping and a localhost server with live reloading or hot module replacement. In <em>production</em>, our goals shift to a focus on minified bundles, lighter weight source maps, and optimized assets to improve load time. With this logical separation at hand, we typically recommend writing <strong>separate webpack configurations</strong> for each environment.</p>
<p>While we will separate the <em>production</em> and <em>development</em> specific bits out, note that we&#x27;ll still maintain a &quot;common&quot; configuration to keep things DRY. In order to merge these configurations together, we&#x27;ll use a utility called <a href="https://github.com/survivejs/webpack-merge"><code>webpack-merge</code></a>. With the &quot;common&quot; configuration in place, we won&#x27;t have to duplicate code within the environment-specific configurations.</p>
<p>Let&#x27;s start by installing <code>webpack-merge</code> and splitting out the bits we&#x27;ve already worked on in previous guides:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-merge</code></pre>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> |- webpack.config.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- webpack.common.js
</span><span class="token prefix inserted">+</span><span class="token line"> |- webpack.dev.js
</span><span class="token prefix inserted">+</span><span class="token line"> |- webpack.prod.js
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span><span class="token prefix unchanged"> </span><span class="token line">   |- math.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules</span></span></code></pre>
<p><strong>webpack.common.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const path = require(&#x27;path&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line"> const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line"> module.exports = {
</span><span class="token prefix inserted">+</span><span class="token line">   entry: {
</span><span class="token prefix inserted">+</span><span class="token line">     app: &#x27;./src/index.js&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">   },
</span><span class="token prefix inserted">+</span><span class="token line">   plugins: [
</span><span class="token prefix inserted">+</span><span class="token line">     new HtmlWebpackPlugin({
</span><span class="token prefix inserted">+</span><span class="token line">       title: &#x27;Production&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">     }),
</span><span class="token prefix inserted">+</span><span class="token line">   ],
</span><span class="token prefix inserted">+</span><span class="token line">   output: {
</span><span class="token prefix inserted">+</span><span class="token line">     filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix inserted">+</span><span class="token line">     clean: true,
</span><span class="token prefix inserted">+</span><span class="token line">   },
</span><span class="token prefix inserted">+</span><span class="token line"> };</span></span></code></pre>
<p><strong>webpack.dev.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const { merge } = require(&#x27;webpack-merge&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line"> const common = require(&#x27;./webpack.common.js&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line"> module.exports = merge(common, {
</span><span class="token prefix inserted">+</span><span class="token line">   mode: &#x27;development&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">   devtool: &#x27;inline-source-map&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">   devServer: {
</span><span class="token prefix inserted">+</span><span class="token line">     static: &#x27;./dist&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">   },
</span><span class="token prefix inserted">+</span><span class="token line"> });</span></span></code></pre>
<p><strong>webpack.prod.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const { merge } = require(&#x27;webpack-merge&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line"> const common = require(&#x27;./webpack.common.js&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line"> module.exports = merge(common, {
</span><span class="token prefix inserted">+</span><span class="token line">   mode: &#x27;production&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line"> });</span></span></code></pre>
<p>In <code>webpack.common.js</code>, we now have setup our <code>entry</code> and <code>output</code> configuration and we&#x27;ve included any plugins that are required for both environments. In <code>webpack.dev.js</code>, we&#x27;ve set <code>mode</code> to <code>development</code>. Also, we&#x27;ve added the recommended <code>devtool</code> for that environment (strong source mapping), as well as our <code>devServer</code> configuration. Finally, in <code>webpack.prod.js</code>,<code>mode</code> is set to <code>production</code> which loads <a href="/plugins/terser-webpack-plugin/"><code>TerserPlugin</code></a>, which was first introduced by the <a href="/guides/tree-shaking/">tree shaking</a> guide.</p>
<p>Note the use of <code>merge()</code> calls in the environment-specific configurations to include our common configuration in <code>webpack.dev.js</code> and <code>webpack.prod.js</code>. The <code>webpack-merge</code> tool offers a variety of advanced features for merging but for our use case we won&#x27;t need any of that.</p>
<h2><span id="npm-scripts"></span>NPM Scripts<a href="#npm-scripts" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Now, let&#x27;s modify our npm scripts to use the new configuration files. For the <code>start</code> script, which runs <code>webpack-dev-server</code>, we will use <code>webpack.dev.js</code>, and for the <code>build</code> script, which runs <code>webpack</code> to create a production build, we will use <code>webpack.prod.js</code>:</p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> {
</span><span class="token prefix unchanged"> </span><span class="token line">   &quot;name&quot;: &quot;development&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">   &quot;version&quot;: &quot;1.0.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">   &quot;description&quot;: &quot;&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">   &quot;main&quot;: &quot;src/index.js&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">   &quot;scripts&quot;: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     &quot;start&quot;: &quot;webpack serve --open&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     &quot;start&quot;: &quot;webpack serve --open --config webpack.dev.js&quot;,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     &quot;build&quot;: &quot;webpack&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     &quot;build&quot;: &quot;webpack --config webpack.prod.js&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   &quot;keywords&quot;: [],
</span><span class="token prefix unchanged"> </span><span class="token line">   &quot;author&quot;: &quot;&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">   &quot;license&quot;: &quot;ISC&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">   &quot;devDependencies&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;css-loader&quot;: &quot;^0.28.4&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;csv-loader&quot;: &quot;^2.1.1&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;express&quot;: &quot;^4.15.3&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;file-loader&quot;: &quot;^0.11.2&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;html-webpack-plugin&quot;: &quot;^2.29.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;style-loader&quot;: &quot;^0.18.2&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;webpack&quot;: &quot;^4.30.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;webpack-dev-middleware&quot;: &quot;^1.12.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;webpack-dev-server&quot;: &quot;^2.9.1&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;webpack-merge&quot;: &quot;^4.1.0&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;xml-loader&quot;: &quot;^1.2.1&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<p>Feel free to run those scripts and see how the output changes as we continue adding to our <em>production</em> configuration.</p>
<h2><span id="specify-the-mode"></span>Specify the Mode<a href="#specify-the-mode" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Many libraries will key off the <code>process.env.NODE_ENV</code> variable to determine what should be included in the library. For example, when <code>process.env.NODE_ENV</code> is not set to <code>&#x27;production&#x27;</code> some libraries may add additional logging and testing to make debugging easier. However, with <code>process.env.NODE_ENV</code> set to <code>&#x27;production&#x27;</code> they might drop or add significant portions of code to optimize how things run for your actual users. Since webpack v4, specifying <a href="/configuration/mode/"><code>mode</code></a> automatically configures <code>process.env.NODE_ENV</code> for you through <a href="https://github.com/webpack/webpack/blob/fcccd192ce550210186f84a7ca59ee4cd47a8b2d/lib/WebpackOptionsApply.js#L565"><code>DefinePlugin</code></a>:</p>
<p><strong>webpack.prod.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const { merge } = require(&#x27;webpack-merge&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line"> const common = require(&#x27;./webpack.common.js&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = merge(common, {
</span><span class="token prefix unchanged"> </span><span class="token line">   mode: &#x27;production&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line"> });</span></span></code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Technically, <code>NODE_ENV</code> is a system environment variable that Node.js exposes into running scripts. It is used by convention to determine dev-vs-prod behavior by server tools, build scripts, and client-side libraries. Contrary to expectations, <code>process.env.NODE_ENV</code> is not set <strong>within</strong> the build script <code>webpack.config.js</code> automatically when running webpack. Thus, conditionals like <code>process.env.NODE_ENV === &#x27;production&#x27; ? &#x27;[name].[contenthash].bundle.js&#x27; : &#x27;[name].bundle.js&#x27;</code> won&#x27;t work in webpack configurations unless you specify <code>NODE_ENV</code> explicitly with <code>NODE_ENV=production</code> through CLI.</p></aside>
<p>If you&#x27;re using a library like <a href="https://reactjs.org/"><code>react</code></a>, you should actually see a significant drop in bundle size after adding <code>DefinePlugin</code>. Also, note that any of our local <code>/src</code> code can key off of this as well, so the following check would be valid:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> import { cube } from &#x27;./math.js&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line"> if (process.env.NODE_ENV !== &#x27;production&#x27;) {
</span><span class="token prefix inserted">+</span><span class="token line">   console.log(&#x27;Looks like we are in development mode!&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line"> }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">   const element = document.createElement(&#x27;pre&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   element.innerHTML = [
</span><span class="token prefix unchanged"> </span><span class="token line">     &#x27;Hello webpack!&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &#x27;5 cubed is equal to &#x27; + cube(5)
</span><span class="token prefix unchanged"> </span><span class="token line">   ].join(&#x27;\n\n&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return element;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> document.body.appendChild(component());</span></span></code></pre>
<h2><span id="minification"></span>Minification<a href="#minification" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Webpack v4+ will minify your code by default in <a href="/configuration/mode/#mode-production"><code>production mode</code></a>.</p>
<p>Note that while the <a href="/plugins/terser-webpack-plugin/"><code>TerserPlugin</code></a> is a great place to start for minification and being used by default, there are other options out there:</p>
<ul>
<li><a href="https://github.com/webpack-contrib/closure-webpack-plugin"><code>ClosureWebpackPlugin</code></a></li>
</ul>
<p>If you decide to try another minification plugin, make sure your new choice also drops dead code as described in the <a href="/guides/tree-shaking">tree shaking</a> guide and provide it as the <a href="/configuration/optimization/#optimizationminimizer"><code>optimization.minimizer</code></a>.</p>
<h2><span id="source-mapping"></span>Source Mapping<a href="#source-mapping" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>We encourage you to have source maps enabled in production, as they are useful for debugging as well as running benchmark tests. That said, you should choose one with a fairly quick build speed that&#x27;s recommended for production use (see <a href="/configuration/devtool"><code>devtool</code></a>). For this guide, we&#x27;ll use the <code>source-map</code> option in the <em>production</em> as opposed to the <code>inline-source-map</code> we used in the <em>development</em>:</p>
<p><strong>webpack.prod.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const { merge } = require(&#x27;webpack-merge&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line"> const common = require(&#x27;./webpack.common.js&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = merge(common, {
</span><span class="token prefix unchanged"> </span><span class="token line">   mode: &#x27;production&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   devtool: &#x27;source-map&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> });</span></span></code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Avoid <code>inline-***</code> and <code>eval-***</code> use in production as they can increase bundle size and reduce the overall performance.</p></aside>
<h2><span id="minimize-css"></span>Minimize CSS<a href="#minimize-css" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>It is crucial to minimize your CSS for production. Please see the <a href="/plugins/mini-css-extract-plugin/#minimizing-for-production">Minimizing for Production</a> section.</p>
<h2><span id="cli-alternatives"></span>CLI Alternatives<a href="#cli-alternatives" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Many of the options described above can be set as command line arguments. For example, <a href="/configuration/optimization/#optimizationminimize"><code>optimization.minimize</code></a> can be set with <code>--optimization-minimize</code>, and <a href="/configuration/mode/"><code>mode</code></a> can be set with <code>--mode</code>. Run <code>npx webpack --help=verbose</code> for a full list of CLI arguments.</p>
<p>While these shorthand methods are useful, we recommend setting these options in a webpack configuration file for more configurability.</p>
<h1><span id="lazy-loading"></span>Lazy Loading<a href="#lazy-loading" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>This guide is a small follow-up to <a href="/guides/code-splitting">Code Splitting</a>. If you have not yet read through that guide, please do so now.</p></aside>
<p>Lazy, or &quot;on demand&quot;, loading is a great way to optimize your site or application. This practice essentially involves splitting your code at logical breakpoints, and then loading it once the user has done something that requires, or will require, a new block of code. This speeds up the initial load of the application and lightens its overall weight as some blocks may never even be loaded.</p>
<h2><span id="dynamic-import-example"></span>Dynamic Import Example<a href="#dynamic-import-example" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Let&#x27;s take the example from <a href="/guides/code-splitting/#dynamic-imports">Code Splitting</a> and tweak it a bit to demonstrate this concept even more. The code there does cause a separate chunk, <code>lodash.bundle.js</code>, to be generated and technically &quot;lazy-loads&quot; it as soon as the script is run. The trouble is that no user interaction is required to load the bundle – meaning that every time the page is loaded, the request will fire. This doesn&#x27;t help us too much and will impact performance negatively.</p>
<p>Let&#x27;s try something different. We&#x27;ll add an interaction to log some text to the console when the user clicks a button. However, we&#x27;ll wait to load that code (<code>print.js</code>) until the interaction occurs for the first time. To do this we&#x27;ll go back and rework the <a href="/guides/code-splitting/#dynamic-imports">final <em>Dynamic Imports</em> example</a> from <em>Code Splitting</em> and leave <code>lodash</code> in the main chunk.</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- package-lock.json
|- webpack.config.js
|- /dist
|- /src
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- index.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- print.js
</span></span>|- /node_modules</code></pre>
<p><strong>src/print.js</strong></p>
<pre><code class="hljs language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
  <span class="token string">&#x27;The print.js module has loaded! See the network tab in dev tools...&#x27;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Button Clicked: Here\&#x27;s &quot;some text&quot;!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import _ from &#x27;lodash&#x27;;
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> async function getComponent() {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> function component() {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   const element = document.createElement(&#x27;div&#x27;);
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   const _ = await import(/* webpackChunkName: &quot;lodash&quot; */ &#x27;lodash&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   const button = document.createElement(&#x27;button&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line">   const br = document.createElement(&#x27;br&#x27;);
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   button.innerHTML = &#x27;Click me and look at the console!&#x27;;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   element.appendChild(br);
</span><span class="token prefix inserted">+</span><span class="token line">   element.appendChild(button);
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">   // Note that because a network request is involved, some indication
</span><span class="token prefix inserted">+</span><span class="token line">   // of loading would need to be shown in a production-level site/app.
</span><span class="token prefix inserted">+</span><span class="token line">   button.onclick = e =&gt; import(/* webpackChunkName: &quot;print&quot; */ &#x27;./print&#x27;).then(module =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">     const print = module.default;
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">     print();
</span><span class="token prefix inserted">+</span><span class="token line">   });
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return element;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> getComponent().then(component =&gt; {
</span><span class="token prefix deleted">-</span><span class="token line">   document.body.appendChild(component);
</span><span class="token prefix deleted">-</span><span class="token line"> });
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> document.body.appendChild(component());</span></span></code></pre>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>Note that when using <code>import()</code> on ES6 modules you must reference the <code>.default</code> property as it&#x27;s the actual <code>module</code> object that will be returned when the promise is resolved.</p></aside>
<p>Now let&#x27;s run webpack and check out our new lazy-loading functionality:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
          Asset       Size  Chunks                    Chunk Names
print.bundle.js  <span class="token number">417</span> bytes       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         print
index.bundle.js     <span class="token number">548</span> kB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  index
     index.html  <span class="token number">189</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<h2><span id="defer-import-example"></span>Defer Import Example<a href="#defer-import-example" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>This feature does not lazily &quot;load&quot; a module, but it lazily &quot;evaluates&quot; a module. This means that the module is still downloaded and parsed, but its evaluation is lazy.</p></aside>
<p>In some cases, it might be annoying or hard to convert all uses of a module to asynchronous, since it enforces the unnecessary asyncification of all functions, without providing the ability to only defer the synchronous evaluation work.</p>
<p>The TC39 proposal <a href="https://github.com/tc39/proposal-defer-import-eval">Deferring Module Evaluation</a> is to solve this problem.</p>
<blockquote>
<p>The proposal is to have a new syntactical import form which will only ever return a namespace exotic object. When used, the module and its dependencies would not be executed, but would be fully loaded to the point of being execution-ready before the module graph is considered loaded.</p>
<p><em>Only when accessing a property of this module, would the execution operations be performed (if needed).</em></p>
</blockquote>
<p>This feature is available by enabling <a href="/configuration/experiments/#experimentsdeferimport">experiments.deferImport</a>.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>This feature is still in the experimental stage and may change in future versions of webpack.</p></aside>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- package-lock.json
|- webpack.config.js
|- /dist
|- /src
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- index.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- print.js
</span></span>|- /node_modules</code></pre>
<p><strong>src/print.js</strong></p>
<pre><code class="hljs language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
  <span class="token string">&#x27;The print.js module has loaded! See the network tab in dev tools...&#x27;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Button Clicked: Here\&#x27;s &quot;some text&quot;!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> import _ from &#x27;lodash&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import defer * as print from &#x27;./print&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">   const element = document.createElement(&#x27;div&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">   const button = document.createElement(&#x27;button&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">   const br = document.createElement(&#x27;br&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   button.innerHTML = &#x27;Click me and look at the console!&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line">   element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">   element.appendChild(br);
</span><span class="token prefix unchanged"> </span><span class="token line">   element.appendChild(button);
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   // Note that because a network request is involved, some indication
</span><span class="token prefix deleted">-</span><span class="token line">   // of loading would need to be shown in a production-level site/app.
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   // In this example, the print module is downloaded but not evaluated,
</span><span class="token prefix inserted">+</span><span class="token line">   // so there is no network request involved after the button is clicked.
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   button.onclick = e =&gt; import(/* webpackChunkName: &quot;print&quot; */ &#x27;./print&#x27;).then(module =&gt; {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   button.onclick = e =&gt; {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     const print = module.default;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     //                  ^ The module is evaluated here.
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     print();
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   });
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   };
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return element;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> getComponent().then(component =&gt; {
</span><span class="token prefix unchanged"> </span><span class="token line">   document.body.appendChild(component);
</span><span class="token prefix unchanged"> </span><span class="token line"> });
</span><span class="token prefix unchanged"> </span><span class="token line"> document.body.appendChild(component());</span></span></code></pre>
<p>This is similar to the CommonJS style of lazy loading:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> import _ from &#x27;lodash&#x27;;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import defer * as print from &#x27;./print&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">   const element = document.createElement(&#x27;div&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">   const button = document.createElement(&#x27;button&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">   const br = document.createElement(&#x27;br&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   button.innerHTML = &#x27;Click me and look at the console!&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line">   element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">   element.appendChild(br);
</span><span class="token prefix unchanged"> </span><span class="token line">   element.appendChild(button);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // In this example, the print module is downloaded but not evaluated,
</span><span class="token prefix unchanged"> </span><span class="token line">   // so there is no network request involved after the button is clicked.
</span><span class="token prefix unchanged"> </span><span class="token line">   button.onclick = e =&gt; {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     const print = require(&#x27;./print&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line">     //            ^ The module is evaluated here.
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     const print = module.default;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     //                  ^ The module is evaluated here.
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     print();
</span><span class="token prefix unchanged"> </span><span class="token line">   };
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return element;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> getComponent().then(component =&gt; {
</span><span class="token prefix unchanged"> </span><span class="token line">   document.body.appendChild(component);
</span><span class="token prefix unchanged"> </span><span class="token line"> });
</span><span class="token prefix unchanged"> </span><span class="token line"> document.body.appendChild(component());</span></span></code></pre>
<h2><span id="frameworks"></span>Frameworks<a href="#frameworks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Many frameworks and libraries have their own recommendations on how this should be accomplished within their methodologies. Here are a few examples:</p>
<ul>
<li>React: <a href="https://react.dev/learn/build-a-react-app-from-scratch#code-splitting">Code Splitting and Lazy Loading</a></li>
<li>Vue: <a href="https://vuedose.tips/tips/dynamic-imports-in-vue-js-for-better-performance/">Dynamic Imports in Vue.js for better performance</a></li>
<li>Angular: <a href="https://angular.io/guide/router#milestone-6-asynchronous-routing">Lazy Loading route configuration</a> and <a href="https://medium.com/@var_bin/angularjs-webpack-lazyload-bb7977f390dd">AngularJS + webpack = lazyLoad</a></li>
</ul>
<h1><span id="ecmascript-modules"></span>ECMAScript Modules<a href="#ecmascript-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>ECMAScript Modules (ESM) is a <a href="https://tc39.github.io/ecma262/#sec-modules">specification</a> for using Modules in the Web.
It&#x27;s supported by all modern browsers and the recommended way of writing modular code for the Web.</p>
<p>Webpack supports processing ECMAScript Modules to optimize them.</p>
<h2><span id="exporting"></span>Exporting<a href="#exporting" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The <code>export</code> keyword allows to expose things from an ESM to other modules:</p>
<pre><code class="hljs language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">CONSTANT</span> <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">let</span> variable <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token comment">// only reading is exposed</span>
<span class="token comment">// it&#x27;s not possible to modify the variable from outside</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;fun&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">Super</span> <span class="token punctuation">{</span>
  <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;method&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> other<span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> other <span class="token keyword">as</span> c <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token function">more</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2><span id="importing"></span>Importing<a href="#importing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The <code>import</code> keyword allows to get references to things from other modules into an ESM:</p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CONSTANT</span><span class="token punctuation">,</span> variable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./module.js&#x27;</span><span class="token punctuation">;</span>
<span class="token comment">// import &quot;bindings&quot; to exports from another module</span>
<span class="token comment">// these bindings are live. The values are not copied,</span>
<span class="token comment">// instead accessing &quot;variable&quot; will get the current value</span>
<span class="token comment">// in the imported module</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> module <span class="token keyword">from</span> <span class="token string">&#x27;./module.js&#x27;</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// import the &quot;namespace object&quot; which contains all exports</span>

<span class="token keyword">import</span> theDefaultValue <span class="token keyword">from</span> <span class="token string">&#x27;./module.js&#x27;</span><span class="token punctuation">;</span>
<span class="token comment">// shortcut to import the &quot;default&quot; export</span></code></pre>
<h2><span id="flagging-modules-as-esm"></span>Flagging modules as ESM<a href="#flagging-modules-as-esm" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>By default webpack will automatically detect whether a file is an ESM or a different module system.</p>
<p>Node.js established a way of explicitly setting the module type of files by using a property in the <code>package.json</code>.
Setting <code>&quot;type&quot;: &quot;module&quot;</code> in a package.json does force all files below this package.json to be ECMAScript Modules.
Setting <code>&quot;type&quot;: &quot;commonjs&quot;</code> will instead force them to be CommonJS Modules.</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span>
<span class="token punctuation">}</span></code></pre>
<p>In addition to that, files can set the module type by using <code>.mjs</code> or <code>.cjs</code> extension. <code>.mjs</code> will force them to be ESM, <code>.cjs</code> force them to be CommonJs.</p>
<p>In DataURIs using the <code>text/javascript</code> or <code>application/javascript</code> mime type will also force module type to ESM.</p>
<p>In addition to the module format, flagging modules as ESM also affect the resolving logic, interop logic and the available symbols in modules.</p>
<p>Imports in ESM are resolved more strictly. Relative requests must include a filename and file extension (e.g. <code>*.js</code> or <code>*.mjs</code>) unless you have the behaviour disabled with <a href="/configuration/module/#resolvefullyspecified"><code>fullySpecified=false</code></a>.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Requests to packages e.g. <code>import &quot;lodash&quot;</code> are still supported.</p></aside>
<p>Only the &quot;default&quot; export can be imported from non-ESM. Named exports are not available.</p>
<p>CommonJs Syntax is not available: <code>require</code>, <code>module</code>, <code>exports</code>, <code>__filename</code>, <code>__dirname</code>.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>HMR can be used with <a href="/api/module-variables/#importmetawebpackhot"><code>import.meta.webpackHot</code></a> instead of <a href="/api/module-variables/#modulehot-webpack-specific"><code>module.hot</code></a>.</p></aside>
<h1><span id="shimming"></span>Shimming<a href="#shimming" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>The <code>webpack</code> compiler can understand modules written as ES2015 modules, CommonJS or AMD. However, some third party libraries may expect global dependencies (e.g. <code>$</code> for <code>jQuery</code>). The libraries might also create globals which need to be exported. These &quot;broken modules&quot; are one instance where <em>shimming</em> comes into play.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p><strong>We don&#x27;t recommend using globals!</strong> The whole concept behind webpack is to allow more modular front-end development. This means writing isolated modules that are well contained and do not rely on hidden dependencies (e.g. globals). Please use these features only when necessary.</p></aside>
<p>Another instance where <em>shimming</em> can be useful is when you want to <a href="https://en.wikipedia.org/wiki/Polyfill_%28programming%29">polyfill</a> browser functionality to support more users. In this case, you may only want to deliver those polyfills to the browsers that need patching (i.e. load them on demand).</p>
<p>The following article will walk through both of these use cases.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>For simplicity, this guide stems from the examples in <a href="/guides/getting-started">Getting Started</a>. Please make sure you are familiar with the setup there before moving on.</p></aside>
<h2><span id="shimming-globals"></span>Shimming Globals<a href="#shimming-globals" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Let&#x27;s start with the first use case of shimming global variables. Before we do anything let&#x27;s take another look at our project:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- package-lock.json
|- webpack.config.js
|- /dist
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- index.html
</span></span>|- /src
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- index.js
</span></span>|- /node_modules</code></pre>
<p>Remember that <code>lodash</code> package we were using? For demonstration purposes, let&#x27;s say we wanted to instead provide this as a global throughout our application. To do this, we can use <code>ProvidePlugin</code>.</p>
<p>The <a href="/plugins/provide-plugin"><code>ProvidePlugin</code></a> makes a package available as a variable in every module compiled through webpack. If webpack sees that variable used, it will include the given package in the final bundle. Let&#x27;s go ahead by removing the <code>import</code> statement for <code>lodash</code> and instead provide it via the plugin:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">import _ from &#x27;lodash&#x27;;
</span><span class="token prefix deleted">-</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  // Lodash, now imported by this script
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());</span></span></code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">const webpack = require(&#x27;webpack&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;main.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  plugins: [
</span><span class="token prefix inserted">+</span><span class="token line">    new webpack.ProvidePlugin({
</span><span class="token prefix inserted">+</span><span class="token line">      _: &#x27;lodash&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">    }),
</span><span class="token prefix inserted">+</span><span class="token line">  ],
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>What we&#x27;ve essentially done here is tell webpack...</p>
<blockquote>
<p>If you encounter at least one instance of the variable <code>_</code>, include the <code>lodash</code> package and provide it to the modules that need it.</p>
</blockquote>
<p>If we run a build, we should still see the same output:</p>
<pre><code class="hljs language-bash">$ <span class="token function">npm</span> run build

<span class="token punctuation">..</span>

<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Compilation finished
asset main.js <span class="token number">69.1</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span> <span class="token number">1</span> related asset
runtime modules <span class="token number">344</span> bytes <span class="token number">2</span> modules
cacheable modules <span class="token number">530</span> KiB
  ./src/index.js <span class="token number">191</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./node_modules/lodash/lodash.js <span class="token number">530</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.4</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">2910</span> ms</code></pre>
<p>We can also use the <code>ProvidePlugin</code> to expose a single export of a module by configuring it with an &quot;array path&quot; (e.g. <code>[module, child, ...children?]</code>). So let&#x27;s imagine we only wanted to provide the <code>join</code> method from <code>lodash</code> wherever it&#x27;s invoked:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  element.innerHTML = join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());</span></span></code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">const webpack = require(&#x27;webpack&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;main.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">    new webpack.ProvidePlugin({
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">      _: &#x27;lodash&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      join: [&#x27;lodash&#x27;, &#x27;join&#x27;],
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    }),
</span><span class="token prefix unchanged"> </span><span class="token line">  ],
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>This would go nicely with <a href="/guides/tree-shaking">Tree Shaking</a> as the rest of the <code>lodash</code> library should get dropped.</p>
<h2><span id="granular-shimming"></span>Granular Shimming<a href="#granular-shimming" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Some legacy modules rely on <code>this</code> being the <code>window</code> object. Let&#x27;s update our <code>index.js</code> so this is the case:</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  element.innerHTML = join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  // Assume we are in the context of `window`
</span><span class="token prefix inserted">+</span><span class="token line">  this.alert(&quot;Hmmm, this probably isn&#x27;t a great idea...&quot;);
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());</span></span></code></pre>
<p>This becomes a problem when the module is executed in a CommonJS context where <code>this</code> is equal to <code>module.exports</code>. In this case you can override <code>this</code> using the <a href="/loaders/imports-loader/"><code>imports-loader</code></a>:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">const webpack = require(&#x27;webpack&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;main.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  module: {
</span><span class="token prefix inserted">+</span><span class="token line">    rules: [
</span><span class="token prefix inserted">+</span><span class="token line">      {
</span><span class="token prefix inserted">+</span><span class="token line">        test: require.resolve(&#x27;./src/index.js&#x27;),
</span><span class="token prefix inserted">+</span><span class="token line">        use: &#x27;imports-loader?wrapper=window&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">      },
</span><span class="token prefix inserted">+</span><span class="token line">    ],
</span><span class="token prefix inserted">+</span><span class="token line">  },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">    new webpack.ProvidePlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">      join: [&#x27;lodash&#x27;, &#x27;join&#x27;],
</span><span class="token prefix unchanged"> </span><span class="token line">    }),
</span><span class="token prefix unchanged"> </span><span class="token line">  ],
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<h2><span id="global-exports"></span>Global Exports<a href="#global-exports" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Let&#x27;s say a library creates a global variable that it expects its consumers to use. We can add a small module to our setup to demonstrate this:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- webpack.config.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   |- globals.js
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules</span></span></code></pre>
<p><strong>src/globals.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token string">&#x27;blah.txt&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> helpers <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">test</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;test something&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">parse</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;parse something&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Now, while you&#x27;d likely never do this in your own source code, you may encounter a dated library you&#x27;d like to use that contains similar code to what&#x27;s shown above. In this case, we can use <a href="/loaders/exports-loader/"><code>exports-loader</code></a>, to export that global variable as a normal module export. For instance, in order to export <code>file</code> as <code>file</code> and <code>helpers.parse</code> as <code>parse</code>:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">const webpack = require(&#x27;webpack&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span><span class="token prefix unchanged"> </span><span class="token line">    filename: &#x27;main.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  module: {
</span><span class="token prefix unchanged"> </span><span class="token line">    rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: require.resolve(&#x27;./src/index.js&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">        use: &#x27;imports-loader?wrapper=window&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      {
</span><span class="token prefix inserted">+</span><span class="token line">        test: require.resolve(&#x27;./src/globals.js&#x27;),
</span><span class="token prefix inserted">+</span><span class="token line">        use:
</span><span class="token prefix inserted">+</span><span class="token line">          &#x27;exports-loader?type=commonjs&amp;exports=file,multiple|helpers.parse|parse&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">      },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    ],
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">    new webpack.ProvidePlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">      join: [&#x27;lodash&#x27;, &#x27;join&#x27;],
</span><span class="token prefix unchanged"> </span><span class="token line">    }),
</span><span class="token prefix unchanged"> </span><span class="token line">  ],
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>Now from within our entry script (i.e. <code>src/index.js</code>), we could use <code>const { file, parse } = require(&#x27;./globals.js&#x27;);</code> and all should work smoothly.</p>
<h2><span id="loading-polyfills"></span>Loading Polyfills<a href="#loading-polyfills" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Almost everything we&#x27;ve discussed thus far has been in relation to handling legacy packages. Let&#x27;s move on to our second topic: <strong>polyfills</strong>.</p>
<p>There&#x27;s a lot of ways to load polyfills. For example, to include the <a href="https://babeljs.io/docs/en/babel-polyfill/"><code>babel-polyfill</code></a> we might:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save babel-polyfill</code></pre>
<p>and <code>import</code> it so as to include it in our main bundle:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import &#x27;babel-polyfill&#x27;;
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  element.innerHTML = join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  // Assume we are in the context of `window`
</span><span class="token prefix unchanged"> </span><span class="token line">  this.alert(&quot;Hmmm, this probably isn&#x27;t a great idea...&quot;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());</span></span></code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Note that we aren&#x27;t binding the <code>import</code> to a variable. This is because polyfills run on their own, prior to the rest of the code base, allowing us to then assume certain native functionality exists.</p></aside>
<p>Note that this approach prioritizes correctness over bundle size. To be safe and robust, polyfills/shims must run <strong>before all other code</strong>, and thus either need to load synchronously, or, all app code needs to load after all polyfills/shims load.
There are many misconceptions in the community, as well, that modern browsers &quot;don&#x27;t need&quot; polyfills, or that polyfills/shims merely serve to add missing features - in fact, they often <em>repair broken implementations</em>, even in the most modern of browsers.
The best practice thus remains to unconditionally and synchronously load all polyfills/shims, despite the bundle size cost this incurs.</p>
<p>If you feel that you have mitigated these concerns and wish to incur the risk of brokenness, here&#x27;s one way you might do it:
Let&#x27;s move our <code>import</code> to a new file and add the <a href="https://github.com/github/fetch"><code>whatwg-fetch</code></a> polyfill:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save whatwg-fetch</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">import &#x27;babel-polyfill&#x27;;
</span><span class="token prefix deleted">-</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  element.innerHTML = join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  // Assume we are in the context of `window`
</span><span class="token prefix unchanged"> </span><span class="token line">  this.alert(&quot;Hmmm, this probably isn&#x27;t a great idea...&quot;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());</span></span></code></pre>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- webpack.config.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span><span class="token prefix unchanged"> </span><span class="token line">   |- globals.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   |- polyfills.js
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules</span></span></code></pre>
<p><strong>src/polyfills.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token string">&#x27;babel-polyfill&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#x27;whatwg-fetch&#x27;</span><span class="token punctuation">;</span></code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line">const webpack = require(&#x27;webpack&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  entry: &#x27;./src/index.js&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  entry: {
</span><span class="token prefix inserted">+</span><span class="token line">    polyfills: &#x27;./src/polyfills&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">    index: &#x27;./src/index.js&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">  },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  output: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    filename: &#x27;main.js&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    filename: &#x27;[name].bundle.js&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  module: {
</span><span class="token prefix unchanged"> </span><span class="token line">    rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: require.resolve(&#x27;./src/index.js&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">        use: &#x27;imports-loader?wrapper=window&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span><span class="token prefix unchanged"> </span><span class="token line">      {
</span><span class="token prefix unchanged"> </span><span class="token line">        test: require.resolve(&#x27;./src/globals.js&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">        use:
</span><span class="token prefix unchanged"> </span><span class="token line">          &#x27;exports-loader?type=commonjs&amp;exports[]=file&amp;exports[]=multiple|helpers.parse|parse&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">      },
</span><span class="token prefix unchanged"> </span><span class="token line">    ],
</span><span class="token prefix unchanged"> </span><span class="token line">  },
</span><span class="token prefix unchanged"> </span><span class="token line">  plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">    new webpack.ProvidePlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">      join: [&#x27;lodash&#x27;, &#x27;join&#x27;],
</span><span class="token prefix unchanged"> </span><span class="token line">    }),
</span><span class="token prefix unchanged"> </span><span class="token line">  ],
</span><span class="token prefix unchanged"> </span><span class="token line">};</span></span></code></pre>
<p>With that in place, we can add the logic to conditionally load our new <code>polyfills.bundle.js</code> file. How you make this decision depends on the technologies and browsers you need to support. We&#x27;ll do some testing to determine whether our polyfills are needed:</p>
<p><strong>dist/index.html</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">&lt;!DOCTYPE html&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">&lt;html&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">  &lt;head&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">    &lt;meta charset=&quot;utf-8&quot; /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">    &lt;title&gt;Getting Started&lt;/title&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;script&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      const modernBrowser = &#x27;fetch&#x27; in window &amp;&amp; &#x27;assign&#x27; in Object;
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">      if (!modernBrowser) {
</span><span class="token prefix inserted">+</span><span class="token line">        const scriptElement = document.createElement(&#x27;script&#x27;);
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">        scriptElement.async = false;
</span><span class="token prefix inserted">+</span><span class="token line">        scriptElement.src = &#x27;/polyfills.bundle.js&#x27;;
</span><span class="token prefix inserted">+</span><span class="token line">        document.head.appendChild(scriptElement);
</span><span class="token prefix inserted">+</span><span class="token line">      }
</span><span class="token prefix inserted">+</span><span class="token line">    &lt;/script&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  &lt;/head&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">  &lt;body&gt;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    &lt;script src=&quot;main.js&quot;&gt;&lt;/script&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;script src=&quot;index.bundle.js&quot;&gt;&lt;/script&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  &lt;/body&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">&lt;/html&gt;</span></span></code></pre>
<p>Now we can <code>fetch</code> some data within our entry script:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">  const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  element.innerHTML = join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  // Assume we are in the context of `window`
</span><span class="token prefix unchanged"> </span><span class="token line">  this.alert(&quot;Hmmm, this probably isn&#x27;t a great idea...&quot;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  return element;
</span><span class="token prefix unchanged"> </span><span class="token line">}
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">document.body.appendChild(component());
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">fetch(&#x27;https://jsonplaceholder.typicode.com/users&#x27;)
</span><span class="token prefix inserted">+</span><span class="token line">  .then((response) =&gt; response.json())
</span><span class="token prefix inserted">+</span><span class="token line">  .then((json) =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">    console.log(
</span><span class="token prefix inserted">+</span><span class="token line">      &quot;We retrieved some data! AND we&#x27;re confident it will work on a variety of browser distributions.&quot;
</span><span class="token prefix inserted">+</span><span class="token line">    );
</span><span class="token prefix inserted">+</span><span class="token line">    console.log(json);
</span><span class="token prefix inserted">+</span><span class="token line">  })
</span><span class="token prefix inserted">+</span><span class="token line">  .catch((error) =&gt;
</span><span class="token prefix inserted">+</span><span class="token line">    console.error(&#x27;Something went wrong when fetching this data: &#x27;, error)
</span><span class="token prefix inserted">+</span><span class="token line">  );</span></span></code></pre>
<p>If we run our build, another <code>polyfills.bundle.js</code> file will be emitted and everything should still run smoothly in the browser. Note that this set up could likely be improved upon but it should give you a good idea of how you can provide polyfills only to the users that actually need them.</p>
<h2><span id="further-optimizations"></span>Further Optimizations<a href="#further-optimizations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The <code>babel-preset-env</code> package uses <a href="https://github.com/browserslist/browserslist">browserslist</a> to transpile only what is not supported in your browsers matrix. This preset comes with the <a href="https://babeljs.io/docs/en/babel-preset-env#usebuiltins"><code>useBuiltIns</code></a> option, <code>false</code> by default, which converts your global <code>babel-polyfill</code> import to a more granular feature by feature <code>import</code> pattern:</p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token string">&#x27;core-js/modules/es7.string.pad-start&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#x27;core-js/modules/es7.string.pad-end&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#x27;core-js/modules/web.timers&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#x27;core-js/modules/web.immediate&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#x27;core-js/modules/web.dom.iterable&#x27;</span><span class="token punctuation">;</span></code></pre>
<p>See <a href="https://babeljs.io/docs/en/babel-preset-env">the babel-preset-env documentation</a> for more information.</p>
<h2><span id="node-built-ins"></span>Node Built-Ins<a href="#node-built-ins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Node built-ins, like <code>process</code>, can be polyfilled right directly from your configuration file without the use of any special loaders or plugins. See the <a href="/configuration/node">node configuration page</a> for more information and examples.</p>
<h2><span id="other-utilities"></span>Other Utilities<a href="#other-utilities" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>There are a few other tools that can help when dealing with legacy modules.</p>
<p>When there is no AMD/CommonJS version of the module and you want to include the <code>dist</code>, you can flag this module in <a href="/configuration/module/#modulenoparse"><code>noParse</code></a>. This will cause webpack to include the module without parsing it or resolving <code>require()</code> and <code>import</code> statements. This practice is also used to improve the build performance.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>Any feature requiring the AST, like the <code>ProvidePlugin</code>, will not work.</p></aside>
<p>Lastly, there are some modules that support multiple <a href="/concepts/modules">module styles</a>; e.g. a combination of AMD, CommonJS, and legacy. In most of these cases, they first check for <code>define</code> and then use some quirky code to export properties. In these cases, it could help to force the CommonJS path by setting <code>additionalCode=var%20define%20=%20false;</code> via the <a href="/loaders/imports-loader/"><code>imports-loader</code></a>.</p>
<h1><span id="typescript"></span>TypeScript<a href="#typescript" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>This guide stems from the <a href="/guides/getting-started/"><em>Getting Started</em></a> guide.</p></aside>
<p><a href="https://www.typescriptlang.org">TypeScript</a> is a typed superset of JavaScript that compiles to plain JavaScript. In this guide we will learn how to integrate TypeScript with webpack.</p>
<h2><span id="basic-setup"></span>Basic Setup<a href="#basic-setup" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>First install the TypeScript compiler and loader by running:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev typescript ts-loader</code></pre>
<p>Now we&#x27;ll modify the directory structure &amp; the configuration files:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package-lock.json
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- tsconfig.json
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- webpack.config.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line">   |- bundle.js
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.html
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   |- index.ts
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules</span></span></code></pre>
<p><strong>tsconfig.json</strong></p>
<p>Let&#x27;s set up a configuration to support JSX and compile TypeScript down to ES5...</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist/&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es6&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;allowJs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>See <a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html">TypeScript&#x27;s documentation</a> to learn more about <code>tsconfig.json</code> configuration options.</p>
<p>To learn more about webpack configuration, see the <a href="/concepts/configuration/">configuration concepts</a>.</p>
<p>Now let&#x27;s configure webpack to handle TypeScript:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">&#x27;./src/index.ts&#x27;</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token string">&#x27;ts-loader&#x27;</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;.tsx&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;.ts&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;.js&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;bundle.js&#x27;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;dist&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>This will direct webpack to <em>enter</em> through <code>./index.ts</code>, <em>load</em> all <code>.ts</code> and <code>.tsx</code> files through the <code>ts-loader</code>, and <em>output</em> a <code>bundle.js</code> file in our current directory.</p>
<p>Now lets change the import of <code>lodash</code> in our <code>./index.ts</code> due to the fact that there is no default export present in <code>lodash</code> definitions.</p>
<p><strong>./index.ts</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import _ from &#x27;lodash&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import * as _ from &#x27;lodash&#x27;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> function component() {
</span><span class="token prefix unchanged"> </span><span class="token line">   const element = document.createElement(&#x27;div&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   element.innerHTML = _.join([&#x27;Hello&#x27;, &#x27;webpack&#x27;], &#x27; &#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return element;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> document.body.appendChild(component());</span></span></code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>To make imports do this by default and keep <code>import _ from &#x27;lodash&#x27;;</code> syntax in TypeScript, set <code>&quot;allowSyntheticDefaultImports&quot; : true</code> and <code>&quot;esModuleInterop&quot; : true</code> in your <strong>tsconfig.json</strong> file. This is related to TypeScript configuration and mentioned in our guide only for your information.</p></aside>
<h2><span id="ways-to-use-typescript-in-webpackconfigts"></span>Ways to Use TypeScript in <code>webpack.config.ts</code><a href="#ways-to-use-typescript-in-webpackconfigts" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>There are 5 ways to use TypeScript in <code>webpack.config.ts</code>:</p>
<ol>
<li>
<p><strong>Using webpack with TypeScript config:</strong></p>
<pre><code class="hljs language-bash">webpack -c ./webpack.config.ts</code></pre>
<p>(Not all things are supported due to limitations of <code>rechoir</code> and <code>interpret</code>.)</p>
</li>
<li>
<p><strong>Using custom <code>--import</code> for Node.js:</strong></p>
<pre><code class="hljs language-bash"><span class="token assign-left variable">NODE_OPTIONS</span><span class="token operator">=</span><span class="token string">&#x27;--import tsx&#x27;</span>  webpack --disable-interpret -c ./webpack.config.ts</code></pre>
</li>
<li>
<p><strong>Using built-in TypeScript module for Node.js v22.7.0 ≥ YOUR NODE.JS VERSION &lt; v23.6.0:</strong></p>
<pre><code class="hljs language-bash"><span class="token assign-left variable">NODE_OPTIONS</span><span class="token operator">=</span><span class="token string">&#x27;--experimental-strip-types&#x27;</span> webpack --disable-interpret -c ./webpack.config.ts</code></pre>
</li>
<li>
<p><strong>Using built-in TypeScript module for Node.js ≥ v22.6.0:</strong></p>
<pre><code class="hljs language-bash">webpack --disable-interpret -c ./webpack.config.ts</code></pre>
</li>
<li>
<p><strong>Using a tsx for Node.js ≥ v22.6.0:</strong></p>
<pre><code class="hljs language-bash"><span class="token assign-left variable">NODE_OPTIONS</span><span class="token operator">=</span><span class="token string">&#x27;--no-experimental-strip-types --import tsx&#x27;</span> webpack --disable-interpret -c ./webpack.config.ts</code></pre>
</li>
</ol>
<h2><span id="loader"></span>Loader<a href="#loader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p><a href="https://github.com/TypeStrong/ts-loader"><code>ts-loader</code></a></p>
<p>We use <code>ts-loader</code> in this guide as it makes enabling additional webpack features, such as importing other web assets, a bit easier.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p><code>ts-loader</code> uses <code>tsc</code>, the TypeScript compiler, and relies on your <code>tsconfig.json</code> configuration. Make sure to avoid setting <a href="https://www.typescriptlang.org/tsconfig#module"><code>module</code></a> to &quot;CommonJS&quot;, or webpack won&#x27;t be able to <a href="/guides/tree-shaking">tree-shake your code</a>.</p></aside>
<p>Note that if you&#x27;re already using <a href="https://github.com/babel/babel-loader"><code>babel-loader</code></a> to transpile your code, you can use <a href="https://babeljs.io/docs/en/babel-preset-typescript"><code>@babel/preset-typescript</code></a> and let Babel handle both your JavaScript and TypeScript files instead of using an additional loader. Keep in mind that, contrary to <code>ts-loader</code>, the underlying <a href="https://babeljs.io/docs/en/babel-plugin-transform-typescript"><code>@babel/plugin-transform-typescript</code></a> plugin does not perform any type checking.</p>
<h2><span id="source-maps"></span>Source Maps<a href="#source-maps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>To learn more about source maps, see the <a href="/guides/development">development guide</a>.</p>
<p>To enable source maps, we must configure TypeScript to output inline source maps to our compiled JavaScript files. The following line must be added to our TypeScript configuration:</p>
<p><strong>tsconfig.json</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> {
</span><span class="token prefix unchanged"> </span><span class="token line">   &quot;compilerOptions&quot;: {
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;outDir&quot;: &quot;./dist/&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     &quot;sourceMap&quot;: true,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &quot;noImplicitAny&quot;: true,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;module&quot;: &quot;commonjs&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;target&quot;: &quot;es5&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;jsx&quot;: &quot;react&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;allowJs&quot;: true,
</span><span class="token prefix unchanged"> </span><span class="token line">     &quot;moduleResolution&quot;: &quot;node&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<p>Now we need to tell webpack to extract these source maps and include in our final bundle:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(&#x27;path&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: &#x27;./src/index.ts&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   devtool: &#x27;inline-source-map&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   module: {
</span><span class="token prefix unchanged"> </span><span class="token line">     rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">       {
</span><span class="token prefix unchanged"> </span><span class="token line">         test: /\.tsx?$/,
</span><span class="token prefix unchanged"> </span><span class="token line">         use: &#x27;ts-loader&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">         exclude: /node_modules/,
</span><span class="token prefix unchanged"> </span><span class="token line">       },
</span><span class="token prefix unchanged"> </span><span class="token line">     ],
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   resolve: {
</span><span class="token prefix unchanged"> </span><span class="token line">     extensions: [ &#x27;.tsx&#x27;, &#x27;.ts&#x27;, &#x27;.js&#x27; ],
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">     filename: &#x27;bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre>
<p>See the <a href="/configuration/devtool/">devtool documentation</a> for more information.</p>
<h2><span id="client-types"></span>Client types<a href="#client-types" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>It&#x27;s possible to use webpack specific features in your TypeScript code, such as <a href="/api/module-variables/#importmetawebpack"><code>import.meta.webpack</code></a>. And webpack provides types for them as well, add a TypeScript <a href="https://www.typescriptlang.org/docs/handbook/triple-slash-directives.html#-reference-types-"><code>reference</code></a> directive to declare it:</p>
<pre><code class="hljs language-ts"><span class="token comment">/// &lt;reference types=&quot;webpack/module&quot; /&gt;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>webpack<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// without reference declared above, TypeScript will throw an error</span></code></pre>
<h2><span id="using-third-party-libraries"></span>Using Third Party Libraries<a href="#using-third-party-libraries" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>When installing third party libraries from npm, it is important to remember to install the typing definition for that library.</p>
<p>For example, if we want to install lodash we can run the following command to get the typings for it:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev @types/lodash</code></pre>
<p>If the npm package already includes its declaration typings in the package bundle, downloading the corresponding <code>@types</code> package is not needed. For more information see the <a href="https://github.blog/changelog/2020-12-16-npm-displays-packages-with-bundled-typescript-declarations/">TypeScript changelog blog</a>.</p>
<h2><span id="importing-other-assets"></span>Importing Other Assets<a href="#importing-other-assets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>To use non-code assets with TypeScript, we need to defer the type for these imports. This requires a <code>custom.d.ts</code> file which signifies custom definitions for TypeScript in our project. Let&#x27;s set up a declaration for <code>.svg</code> files:</p>
<p><strong>custom.d.ts</strong></p>
<pre><code class="hljs language-typescript"><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&#x27;*.svg&#x27;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> content<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Here we declare a new module for SVGs by specifying any import that ends in <code>.svg</code> and defining the module&#x27;s <code>content</code> as <code>any</code>. We could be more explicit about it being a url by defining the type as string. The same concept applies to other assets including CSS, SCSS, JSON and more.</p>
<h2><span id="build-performance"></span>Build Performance<a href="#build-performance" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>This may degrade build performance.</p></aside>
<p>See the <a href="/guides/build-performance/">Build Performance</a> guide on build tooling.</p>
<h1><span id="web-workers"></span>Web Workers<a href="#web-workers" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>As of webpack 5, you can use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers">Web Workers</a> without <a href="https://github.com/webpack-contrib/worker-loader"><code>worker-loader</code></a>.</p>
<h2><span id="syntax"></span>Syntax<a href="#syntax" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#x27;./worker.js&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre><code class="hljs language-js"><span class="token comment">// or customize the chunk name with magic comments</span>
<span class="token comment">// see https://webpack.js.org/api/module-methods/#magic-comments</span>
<span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span>
  <span class="token comment">/* webpackChunkName: &quot;foo-worker&quot; */</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#x27;./worker.js&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The syntax was chosen to allow running code without bundler, it is also available in native ECMAScript modules in the browser.</p>
<p>Note that while the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Worker/Worker"><code>Worker</code> API</a> suggests that <code>Worker</code> constructor would accept a string representing the URL of the script, in webpack 5 you can only use <code>URL</code> instead.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>Using a variable in the <code>Worker</code> constructor is not supported by webpack. For example, the following code will not work: <code>const url = new URL(&#x27;./path/to/worker.ts&#x27;, import.meta.url); const worker = new Worker(url);</code>. This is because webpack cannot analyse the syntax statically. It is important to be aware of this limitation when using <code>Worker</code> syntax with webpack.</p></aside>
<h2><span id="example"></span>Example<a href="#example" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#x27;./deep-thought.js&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  question<span class="token operator">:</span>
    <span class="token string">&#x27;The Answer to the Ultimate Question of Life, The Universe, and Everything.&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data<span class="token operator">:</span> <span class="token punctuation">{</span> answer <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><strong>src/deep-thought.js</strong></p>
<pre><code class="hljs language-js">self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data<span class="token operator">:</span> <span class="token punctuation">{</span> question <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    answer<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2><span id="nodejs"></span>Node.js<a href="#nodejs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Similar syntax is supported in Node.js (&gt;= 12.17.0):</p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> Worker <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;worker_threads&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#x27;./worker.js&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Note that this is only available in ESM. <code>Worker</code> in CommonJS syntax is not supported by either webpack or Node.js.</p>
<h1><span id="progressive-web-application"></span>Progressive Web Application<a href="#progressive-web-application" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>This guide extends on code examples found in the <a href="/guides/output-management">Output Management</a> guide.</p></aside>
<p>Progressive Web Applications (or PWAs) are web apps that deliver an experience similar to native applications. There are many things that can contribute to that. Of these, the most significant is the ability for an app to be able to function when <strong>offline</strong>. This is achieved through the use of a web technology called <a href="https://developers.google.com/web/fundamentals/primers/service-workers/">Service Workers</a>.</p>
<p>This section will focus on adding an offline experience to our app. We&#x27;ll achieve this using a Google project called <a href="https://github.com/GoogleChrome/workbox">Workbox</a> which provides tools that help make offline support for web apps easier to setup.</p>
<h2><span id="we-dont-work-offline-now"></span>We Don&#x27;t Work Offline Now<a href="#we-dont-work-offline-now" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>So far, we&#x27;ve been viewing the output by going directly to the local file system. Typically though, a real user accesses a web app over a network; their browser talking to a <strong>server</strong> which will serve up the required assets (e.g. <code>.html</code>, <code>.js</code>, and <code>.css</code> files).</p>
<p>So let&#x27;s test what the current experience is like using a server with more basic features. Let&#x27;s use the <a href="https://www.npmjs.com/package/http-server">http-server</a> package: <code>npm install http-server --save-dev</code>. We&#x27;ll also amend the <code>scripts</code> section of our <code>package.json</code> to add in a <code>start</code> script:</p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff">{
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ...
</span><span class="token prefix unchanged"> </span><span class="token line"> &quot;scripts&quot;: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    &quot;build&quot;: &quot;webpack&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &quot;build&quot;: &quot;webpack&quot;,
</span><span class="token prefix inserted">+</span><span class="token line">    &quot;start&quot;: &quot;http-server dist&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> ...
</span></span>}</code></pre>
<p>Note: <a href="/configuration/dev-server/">webpack DevServer</a> writes in-memory by default. We&#x27;ll need to enable <a href="/configuration/dev-server/#devserverdevmiddleware">devserverdevmiddleware.writeToDisk</a> option in order for http-server to be able to serve files from <code>./dist</code> directory.</p>
<p>If you haven&#x27;t previously done so, run the command <code>npm run build</code> to build your project. Then run the command <code>npm start</code>. This should produce the following output:</p>
<pre><code class="hljs language-bash"><span class="token operator">&gt;</span> http-server dist

Starting up http-server, serving dist
Available on:
  http://xx.x.x.x:8080
  http://127.0.0.1:8080
  http://xxx.xxx.x.x:8080
Hit CTRL-C to stop the server</code></pre>
<p>If you open your browser to <code>http://localhost:8080</code> (i.e. <code>http://127.0.0.1</code>) you should see your webpack application being served from the <code>dist</code> directory. If you stop the server and refresh, the webpack application is no longer available.</p>
<p>This is what we aim to change. Once we reach the end of this module we should be able to stop the server, hit refresh and still see our application.</p>
<h2><span id="adding-workbox"></span>Adding Workbox<a href="#adding-workbox" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Let&#x27;s add the Workbox webpack plugin and adjust the <code>webpack.config.js</code> file:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> workbox-webpack-plugin --save-dev</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require(&#x27;path&#x27;);
</span><span class="token prefix unchanged"> </span><span class="token line"> const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const WorkboxPlugin = require(&#x27;workbox-webpack-plugin&#x27;);
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">     app: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     print: &#x27;./src/print.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">     new HtmlWebpackPlugin({
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       title: &#x27;Output Management&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       title: &#x27;Progressive Web Application&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }),
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     new WorkboxPlugin.GenerateSW({
</span><span class="token prefix inserted">+</span><span class="token line">       // these options encourage the ServiceWorkers to get in there fast
</span><span class="token prefix inserted">+</span><span class="token line">       // and not allow any straggling &quot;old&quot; SWs to hang around
</span><span class="token prefix inserted">+</span><span class="token line">       clientsClaim: true,
</span><span class="token prefix inserted">+</span><span class="token line">       skipWaiting: true,
</span><span class="token prefix inserted">+</span><span class="token line">     }),
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ],
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">     filename: &#x27;[name].bundle.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, &#x27;dist&#x27;),
</span><span class="token prefix unchanged"> </span><span class="token line">     clean: true,
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line"> };</span></span></code></pre>
<p>With that in place, let&#x27;s see what happens when we do an <code>npm run build</code>:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                  Asset       Size  Chunks                    Chunk Names
          app.bundle.js     <span class="token number">545</span> kB    <span class="token number">0</span>, <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  app
        print.bundle.js    <span class="token number">2.74</span> kB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         print
             index.html  <span class="token number">254</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
precache-manifest.b5ca1c555e832d6fbf9462efd29d27eb.js  <span class="token number">268</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
      service-worker.js       <span class="token number">1</span> kB          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<p>As you can see, we now have 2 extra files being generated; <code>service-worker.js</code> and the more verbose <code>precache-manifest.b5ca1c555e832d6fbf9462efd29d27eb.js</code>. <code>service-worker.js</code> is the Service Worker file and <code>precache-manifest.b5ca1c555e832d6fbf9462efd29d27eb.js</code> is a file that <code>service-worker.js</code> requires so it can run. Your own generated files will likely be different; but you should have a <code>service-worker.js</code> file there.</p>
<p>So we&#x27;re now at the happy point of having produced a Service Worker. What&#x27;s next?</p>
<h2><span id="registering-our-service-worker"></span>Registering Our Service Worker<a href="#registering-our-service-worker" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Let&#x27;s allow our Service Worker to come out and play by registering it. We&#x27;ll do that by adding the registration code below:</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> import _ from &#x27;lodash&#x27;;
</span><span class="token prefix unchanged"> </span><span class="token line"> import printMe from &#x27;./print.js&#x27;;
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> if (&#x27;serviceWorker&#x27; in navigator) {
</span><span class="token prefix inserted">+</span><span class="token line">   window.addEventListener(&#x27;load&#x27;, () =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">     navigator.serviceWorker.register(&#x27;/service-worker.js&#x27;).then(registration =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">       console.log(&#x27;SW registered: &#x27;, registration);
</span><span class="token prefix inserted">+</span><span class="token line">     }).catch(registrationError =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">       console.log(&#x27;SW registration failed: &#x27;, registrationError);
</span><span class="token prefix inserted">+</span><span class="token line">     });
</span><span class="token prefix inserted">+</span><span class="token line">   });
</span><span class="token prefix inserted">+</span><span class="token line"> }</span></span></code></pre>
<p>Once more <code>npm run build</code> to build a version of the app including the registration code. Then serve it with <code>npm start</code>. Navigate to <code>http://localhost:8080</code> and take a look at the console. Somewhere in there you should see:</p>
<pre><code class="hljs language-bash">SW registered</code></pre>
<p>Now to test it. Stop your server and refresh your page. If your browser supports Service Workers then you should still be looking at your application. However, it has been served up by your Service Worker and <strong>not</strong> by the server.</p>
<h2><span id="conclusion"></span>Conclusion<a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>You have built an offline app using the Workbox project. You&#x27;ve started the journey of turning your web app into a PWA. You may now want to think about taking things further. A good resource to help you with that can be found <a href="https://web.dev/progressive-web-apps/">here</a>.</p>
<h1><span id="public-path"></span>Public Path<a href="#public-path" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>The <a href="/configuration/output/#outputpublicpath"><code>publicPath</code></a> configuration option can be quite useful in a variety of scenarios. It allows you to specify the base path for all the assets within your application.</p>
<h2><span id="use-cases"></span>Use Cases<a href="#use-cases" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>There are a few use cases in real applications where this feature becomes especially neat. Essentially, every file emitted to your <code>output.path</code> directory will be referenced from the <code>output.publicPath</code> location. This includes child chunks (created via <a href="/guides/code-splitting/">code splitting</a>) and any other assets (e.g. images, fonts, etc.) that are a part of your dependency graph.</p>
<h3><span id="environment-based"></span>Environment Based<a href="#environment-based" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>In development for example, we might have an <code>assets/</code> folder that lives on the same level of our index page. This is fine, but what if we wanted to host all these static assets on a CDN in production?</p>
<p>To approach this problem you can easily use a good old environment variable. Let&#x27;s say we have a variable <code>ASSET_PATH</code>:</p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">;</span>

<span class="token comment">// Try the environment variable, otherwise use root</span>
<span class="token keyword">const</span> <span class="token constant">ASSET_PATH</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ASSET_PATH</span> <span class="token operator">||</span> <span class="token string">&#x27;/&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> <span class="token constant">ASSET_PATH</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// This makes it possible for us to safely use env vars on our code</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string">&#x27;process.env.ASSET_PATH&#x27;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token constant">ASSET_PATH</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3><span id="on-the-fly"></span>On The Fly<a href="#on-the-fly" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Another possible use case is to set the <code>publicPath</code> on the fly. Webpack exposes a global variable called <code>__webpack_public_path__</code> that allows you to do that. In your application&#x27;s entry point, you can do this:</p>
<pre><code class="hljs language-js">__webpack_public_path__ <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ASSET_PATH</span><span class="token punctuation">;</span></code></pre>
<p>That&#x27;s all you need. Since we&#x27;re already using the <code>DefinePlugin</code> on our
configuration, <code>process.env.ASSET_PATH</code> will always be defined so we can safely
do that.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>Be aware that if you use ES6 module imports in your entry file the <code>__webpack_public_path__</code> assignment will be done after the imports. In such cases, you&#x27;ll have to move the public path assignment to its own dedicated module and then import it on top of your entry.js:</p></aside>
<pre><code class="hljs language-js"><span class="token comment">// entry.js</span>
<span class="token keyword">import</span> <span class="token string">&#x27;./public-path&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#x27;./app&#x27;</span><span class="token punctuation">;</span></code></pre>
<h3><span id="automatic-publicpath"></span>Automatic publicPath<a href="#automatic-publicpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>There are chances that you don&#x27;t know what the publicPath will be in advance, and webpack can handle it automatically for you by determining the public path from variables like <a href="/api/module-variables/#importmetaurl"><code>import.meta.url</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/currentScript"><code>document.currentScript</code></a>, <code>script.src</code> or <code>self.location</code>. What you need is to set <a href="/configuration/output/#outputpublicpath"><code>output.publicPath</code></a> to <code>&#x27;auto&#x27;</code>:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#x27;auto&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Note that in cases where <code>document.currentScript</code> is not supported, e.g., IE browser, you will have to include a polyfill like <a href="https://github.com/amiller-gh/currentScript-polyfill"><code>currentScript Polyfill</code></a>.</p>
<h1><span id="integrations"></span>Integrations<a href="#integrations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>Let&#x27;s start by clearing up a common misconception. Webpack is a module bundler like <a href="http://browserify.org/">Browserify</a> or <a href="https://brunch.io/">Brunch</a>. It is <em>not a task runner</em> like <a href="https://www.gnu.org/software/make/">Make</a>, <a href="https://gruntjs.com/">Grunt</a>, or <a href="https://gulpjs.com/">Gulp</a>. Task runners handle automation of common development tasks such as linting, building, or testing your project. Compared to bundlers, task runners have a higher level focus. You can still benefit from their higher level tooling while leaving the problem of bundling to webpack.</p>
<p>Bundlers help you get your JavaScript and stylesheets ready for deployment, transforming them into a format that&#x27;s suitable for the browser. For example, JavaScript can be <a href="/plugins/terser-webpack-plugin/">minified</a> or <a href="/guides/code-splitting">split into chunks</a> and <a href="/guides/lazy-loading">lazy-loaded</a> to improve performance. Bundling is one of the most important challenges in web development, and solving it well can remove a lot of pain from the process.</p>
<p>The good news is that, while there is some overlap, task runners and bundlers can play well together if approached in the right way. This guide provides a high-level overview of how webpack can be integrated into some of the more popular task runners.</p>
<h2><span id="npm-scripts"></span>NPM Scripts<a href="#npm-scripts" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Often webpack users use npm <a href="https://docs.npmjs.com/misc/scripts"><code>scripts</code></a> as their task runner. This is a good starting point. Cross-platform support can become a problem, but there are several workarounds for that. Many, if not most users, get by with npm <code>scripts</code> and various levels of webpack configuration and tooling.</p>
<p>So while webpack&#x27;s core focus is bundling, there are a variety of extensions that can enable you to use it for jobs typical of a task runner. Integrating a separate tool adds complexity, so be sure to weigh the pros and cons before going forward.</p>
<h2><span id="grunt"></span>Grunt<a href="#grunt" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>For those using Grunt, we recommend the <a href="https://www.npmjs.com/package/grunt-webpack"><code>grunt-webpack</code></a> package. With <code>grunt-webpack</code> you can run webpack or <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> as a task, get access to stats within <a href="https://gruntjs.com/api/grunt.template">template tags</a>, split development and production configurations and more. Start by installing <code>grunt-webpack</code> as well as <code>webpack</code> itself if you haven&#x27;t already:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev grunt-webpack webpack</code></pre>
<p>Then register a configuration and load the task:</p>
<p><strong>Gruntfile.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> webpackConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./webpack.config.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    webpack<span class="token operator">:</span> <span class="token punctuation">{</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        stats<span class="token operator">:</span> <span class="token operator">!</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">||</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#x27;development&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      prod<span class="token operator">:</span> webpackConfig<span class="token punctuation">,</span>
      dev<span class="token operator">:</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span> watch<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> webpackConfig<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">&#x27;grunt-webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>For more information, please visit the <a href="https://github.com/webpack-contrib/grunt-webpack">repository</a>.</p>
<h2><span id="gulp"></span>Gulp<a href="#gulp" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Gulp is also a fairly straightforward integration with the help of the <a href="https://github.com/shama/webpack-stream"><code>webpack-stream</code></a> package (a.k.a. <code>gulp-webpack</code>). In this case, it is unnecessary to install <code>webpack</code> separately as it is a direct dependency of <code>webpack-stream</code>:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-stream</code></pre>
<p>You can <code>require(&#x27;webpack-stream&#x27;)</code> instead of <code>webpack</code> and optionally pass it an configuration:</p>
<p><strong>gulpfile.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;gulp&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack-stream&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#x27;default&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp
    <span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&#x27;src/entry.js&#x27;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
      <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// Any configuration options...</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&#x27;dist/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>For more information, please visit the <a href="https://github.com/shama/webpack-stream">repository</a>.</p>
<h2><span id="mocha"></span>Mocha<a href="#mocha" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The <a href="https://github.com/zinserjan/mocha-webpack"><code>mocha-webpack</code></a> utility can be used for a clean integration with Mocha. The repository offers more details on the pros and cons but essentially <code>mocha-webpack</code> is a simple wrapper that provides almost the same CLI as Mocha itself and provides various webpack functionality like an improved watch mode and improved path resolution. Here is a small example of how you would install it and use it to run a test suite (found within <code>./test</code>):</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack mocha mocha-webpack
mocha-webpack <span class="token string">&#x27;test/**/*.js&#x27;</span></code></pre>
<p>For more information, please visit the <a href="https://github.com/zinserjan/mocha-webpack">repository</a>.</p>
<h2><span id="karma"></span>Karma<a href="#karma" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The <a href="https://github.com/webpack-contrib/karma-webpack"><code>karma-webpack</code></a> package allows you to use webpack to pre-process files in <a href="https://karma-runner.github.io/1.0/index.html">Karma</a>.</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack karma karma-webpack</code></pre>
<p><strong>karma.conf.js</strong></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  config<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    frameworks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    files<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token string">&#x27;test/*_test.js&#x27;</span><span class="token punctuation">,</span> watched<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token string">&#x27;test/**/*_test.js&#x27;</span><span class="token punctuation">,</span> watched<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    preprocessors<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;test/*_test.js&#x27;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;test/**/*_test.js&#x27;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    webpack<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// Any custom webpack configuration...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;karma-webpack&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>For more information, please visit the <a href="https://github.com/webpack-contrib/karma-webpack">repository</a>.</p>
<h1><span id="advanced-entry"></span>Advanced entry<a href="#advanced-entry" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<h2><span id="multiple-file-types-per-entry"></span>Multiple file types per entry<a href="#multiple-file-types-per-entry" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>It is possible to provide different types of files when using an array of values for <a href="/configuration/entry-context/#entry">entry</a> to achieve separate bundles for CSS and JavaScript (and other) files in applications that are not using <code>import</code> for styles in JavaScript (pre Single Page Applications or different reasons).</p>
<p>Let&#x27;s make an example. We have a PHP application with two page types: home and account. The home page has different layout and non-sharable JavaScript with the rest of the application (account page). We want to output <code>home.js</code> and <code>home.css</code> from our application files for the home page and <code>account.js</code> and <code>account.css</code> for account page.</p>
<p><strong>home.js</strong></p>
<pre><code class="hljs language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;home page type&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>home.scss</strong></p>
<pre><code class="hljs language-scss"><span class="token comment">// home page individual styles</span></code></pre>
<p><strong>account.js</strong></p>
<pre><code class="hljs language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;account page type&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>account.scss</strong></p>
<pre><code class="hljs language-scss"><span class="token comment">// account page individual styles</span></code></pre>
<p>We will use <a href="/plugins/mini-css-extract-plugin/"><code>MiniCssExtractPlugin</code></a> in <code>production</code> mode for css as a best practice.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;mini-css-extract-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    home<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;./home.js&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;./home.scss&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    account<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;./account.js&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;./account.scss&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;[name].js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// fallback to style-loader in development</span>
          process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&#x27;production&#x27;</span>
            <span class="token operator">?</span> <span class="token string">&#x27;style-loader&#x27;</span>
            <span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">&#x27;css-loader&#x27;</span><span class="token punctuation">,</span>
          <span class="token string">&#x27;sass-loader&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;[name].css&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Running webpack with above configuration will output into <code>./dist</code> as we did not specify different output path. <code>./dist</code> directory will now contain four files:</p>
<ul>
<li>home.js</li>
<li>home.css</li>
<li>account.js</li>
<li>account.css</li>
</ul>
<h1><span id="asset-modules"></span>Asset Modules<a href="#asset-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>Asset Modules allow one to use asset files (fonts, icons, etc) without configuring additional loaders.</p>
<p>Prior to webpack 5 it was common to use:</p>
<ul>
<li><a href="https://v4.webpack.js.org/loaders/raw-loader/"><code>raw-loader</code></a> to import a file as a string</li>
<li><a href="https://v4.webpack.js.org/loaders/url-loader/"><code>url-loader</code></a> to inline a file into the bundle as a data URI</li>
<li><a href="https://v4.webpack.js.org/loaders/file-loader/"><code>file-loader</code></a> to emit a file into the output directory</li>
</ul>
<p>Asset Modules types replace all of these loaders by adding 4 new module types:</p>
<ul>
<li><code>asset/resource</code> emits a separate file and exports the URL. Previously achievable by using <code>file-loader</code>.</li>
<li><code>asset/inline</code> exports a data URI of the asset. Previously achievable by using <code>url-loader</code>.</li>
<li><code>asset/source</code> exports the source code of the asset. Previously achievable by using <code>raw-loader</code>.</li>
<li><code>asset</code> automatically chooses between exporting a data URI and emitting a separate file. Previously achievable by using <code>url-loader</code> with asset size limit.</li>
</ul>
<p>When using the old assets loaders (i.e. <code>file-loader</code>/<code>url-loader</code>/<code>raw-loader</code>) along with Asset Modules in webpack 5, you might want to stop Asset Modules from processing your assets again as that would result in asset duplication. This can be done by setting the asset&#x27;s module type to <code>&#x27;javascript/auto&#x27;</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">  rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\.(png|jpg|gif)$/i,
</span><span class="token prefix unchanged"> </span><span class="token line">       use: [
</span><span class="token prefix unchanged"> </span><span class="token line">         {
</span><span class="token prefix unchanged"> </span><span class="token line">           loader: &#x27;url-loader&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">           options: {
</span><span class="token prefix unchanged"> </span><span class="token line">             limit: 8192,
</span><span class="token prefix unchanged"> </span><span class="token line">           }
</span><span class="token prefix unchanged"> </span><span class="token line">         },
</span><span class="token prefix unchanged"> </span><span class="token line">       ],
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       type: &#x27;javascript/auto&#x27;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     },
</span><span class="token prefix unchanged"> </span><span class="token line">  ]
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span>}</code></pre>
<p>To exclude assets that came from new URL calls from the asset loaders add <code>dependency: { not: [&#x27;url&#x27;] }</code> to the loader configuration.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\.(png|jpg|gif)$/i,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       dependency: { not: [&#x27;url&#x27;] },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       use: [
</span><span class="token prefix unchanged"> </span><span class="token line">         {
</span><span class="token prefix unchanged"> </span><span class="token line">           loader: &#x27;url-loader&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">           options: {
</span><span class="token prefix unchanged"> </span><span class="token line">             limit: 8192,
</span><span class="token prefix unchanged"> </span><span class="token line">           },
</span><span class="token prefix unchanged"> </span><span class="token line">         },
</span><span class="token prefix unchanged"> </span><span class="token line">       ],
</span><span class="token prefix unchanged"> </span><span class="token line">     },
</span><span class="token prefix unchanged"> </span><span class="token line">   ],
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}</code></pre>
<h2><span id="public-path"></span>Public Path<a href="#public-path" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>By default, under the hood, the <code>asset</code> type does <code>__webpack_public_path__ + import.meta</code>. This means that setting the <code>output.publicPath</code> in your config will allow you to override the URL from which the <code>asset</code> loads.</p>
<h3><span id="on-the-fly-override"></span>On The Fly Override<a href="#on-the-fly-override" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>If you set the <code>__webpack_public_path__</code> in code, the way you need to achieve it so as not to break the <code>asset</code> loading logic is to make sure you run it as the first code in your app and not use a function to do so. An example of this would be having a file called <code>publicPath.js</code> with contents</p>
<pre><code class="hljs language-javascript">__webpack_public_path__ <span class="token operator">=</span> <span class="token string">&#x27;https://cdn.url.com&#x27;</span><span class="token punctuation">;</span></code></pre>
<p>And then in your <code>webpack.config.js</code> updating your <code>entry</code> field to look like</p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;./publicPath.js&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;./App.js&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Alternatively, you can do the following in your <code>App.js</code> without modifying your webpack config. The only downside is you have to enforce ordering here and that can collide with some linting tools.</p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token string">&#x27;./publicPath.js&#x27;</span><span class="token punctuation">;</span></code></pre>
<h2><span id="resource-assets"></span>Resource assets<a href="#resource-assets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require(&#x27;path&#x27;);

module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line"> output: {
</span><span class="token prefix unchanged"> </span><span class="token line">   filename: &#x27;main.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, &#x27;dist&#x27;)
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> module: {
</span><span class="token prefix inserted">+</span><span class="token line">   rules: [
</span><span class="token prefix inserted">+</span><span class="token line">     {
</span><span class="token prefix inserted">+</span><span class="token line">       test: /\.png/,
</span><span class="token prefix inserted">+</span><span class="token line">       type: &#x27;asset/resource&#x27;
</span><span class="token prefix inserted">+</span><span class="token line">     }
</span><span class="token prefix inserted">+</span><span class="token line">   ]
</span><span class="token prefix inserted">+</span><span class="token line"> },
</span></span>};</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> mainImage <span class="token keyword">from</span> <span class="token string">&#x27;./images/main.png&#x27;</span><span class="token punctuation">;</span>

img<span class="token punctuation">.</span>src <span class="token operator">=</span> mainImage<span class="token punctuation">;</span> <span class="token comment">// &#x27;/dist/151cfcfa1bd74779aadb.png&#x27;</span></code></pre>
<p>All <code>.png</code> files will be emitted to the output directory and their paths will be injected into the bundles, besides, you can customize <a href="/configuration/module/#rulegeneratoroutputpath"><code>outputPath</code></a> and <a href="/configuration/module/#rulegeneratorpublicpath"><code>publicPath</code></a> for them.</p>
<h3><span id="custom-output-filename"></span>Custom output filename<a href="#custom-output-filename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>By default, <code>asset/resource</code> modules are emitting with <code>[hash][ext][query]</code> filename into output directory.</p>
<p>You can modify this template by setting <a href="/configuration/output/#outputassetmodulefilename"><code>output.assetModuleFilename</code></a> in your webpack configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require(&#x27;path&#x27;);

module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line"> output: {
</span><span class="token prefix unchanged"> </span><span class="token line">   filename: &#x27;main.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, &#x27;dist&#x27;),
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   assetModuleFilename: &#x27;images/[hash][ext][query]&#x27;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\.png/,
</span><span class="token prefix unchanged"> </span><span class="token line">       type: &#x27;asset/resource&#x27;
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span>};</code></pre>
<p>Another case to customize output filename is to emit some kind of assets to a specified directory:</p>
<pre><code class="hljs language-diff">const path = require(&#x27;path&#x27;);

module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line"> output: {
</span><span class="token prefix unchanged"> </span><span class="token line">   filename: &#x27;main.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, &#x27;dist&#x27;),
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   assetModuleFilename: &#x27;images/[hash][ext][query]&#x27;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\.png/,
</span><span class="token prefix unchanged"> </span><span class="token line">       type: &#x27;asset/resource&#x27;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     }
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     },
</span><span class="token prefix inserted">+</span><span class="token line">     {
</span><span class="token prefix inserted">+</span><span class="token line">       test: /\.html/,
</span><span class="token prefix inserted">+</span><span class="token line">       type: &#x27;asset/resource&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">       generator: {
</span><span class="token prefix inserted">+</span><span class="token line">         filename: &#x27;static/[hash][ext][query]&#x27;
</span><span class="token prefix inserted">+</span><span class="token line">       }
</span><span class="token prefix inserted">+</span><span class="token line">     }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span>};</code></pre>
<p>With this configuration all the <code>html</code> files will be emitted into a <code>static</code> directory within the output directory.</p>
<p><code>Rule.generator.filename</code> is the same as <a href="/configuration/output/#outputassetmodulefilename"><code>output.assetModuleFilename</code></a> and works only with <code>asset</code> and <code>asset/resource</code> module types.</p>
<h2><span id="inlining-assets"></span>Inlining assets<a href="#inlining-assets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require(&#x27;path&#x27;);

module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line"> output: {
</span><span class="token prefix unchanged"> </span><span class="token line">   filename: &#x27;main.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, &#x27;dist&#x27;),
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   assetModuleFilename: &#x27;images/[hash][ext][query]&#x27;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       test: /\.png/,
</span><span class="token prefix deleted">-</span><span class="token line">       type: &#x27;asset/resource&#x27;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       test: /\.svg/,
</span><span class="token prefix inserted">+</span><span class="token line">       type: &#x27;asset/inline&#x27;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     }
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     {
</span><span class="token prefix deleted">-</span><span class="token line">       test: /\.html/,
</span><span class="token prefix deleted">-</span><span class="token line">       type: &#x27;asset/resource&#x27;,
</span><span class="token prefix deleted">-</span><span class="token line">       generator: {
</span><span class="token prefix deleted">-</span><span class="token line">         filename: &#x27;static/[hash][ext][query]&#x27;
</span><span class="token prefix deleted">-</span><span class="token line">       }
</span><span class="token prefix deleted">-</span><span class="token line">     }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>};</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import mainImage from &#x27;./images/main.png&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import metroMap from &#x27;./images/metro.svg&#x27;;
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> img.src = mainImage; // &#x27;/dist/151cfcfa1bd74779aadb.png&#x27;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> block.style.background = `url(${metroMap})`; // url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDo...vc3ZnPgo=)</span></span></code></pre>
<p>All <code>.svg</code> files will be injected into the bundles as data URI.</p>
<h3><span id="custom-data-uri-generator"></span>Custom data URI generator<a href="#custom-data-uri-generator" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>By default, data URI emitted by webpack represents file contents encoded by using Base64 algorithm.</p>
<p>If you want to use a custom encoding algorithm, you may specify a custom function to encode a file content:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require(&#x27;path&#x27;);
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const svgToMiniDataURI = require(&#x27;mini-svg-data-uri&#x27;);
</span></span>
module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line"> output: {
</span><span class="token prefix unchanged"> </span><span class="token line">   filename: &#x27;main.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, &#x27;dist&#x27;)
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\.svg/,
</span><span class="token prefix unchanged"> </span><span class="token line">       type: &#x27;asset/inline&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       generator: {
</span><span class="token prefix inserted">+</span><span class="token line">         dataUrl: content =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">           content = content.toString();
</span><span class="token prefix inserted">+</span><span class="token line">           return svgToMiniDataURI(content);
</span><span class="token prefix inserted">+</span><span class="token line">         }
</span><span class="token prefix inserted">+</span><span class="token line">       }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span>};</code></pre>
<p>Now all <code>.svg</code> files will be encoded by <code>mini-svg-data-uri</code> package.</p>
<h2><span id="source-assets"></span>Source assets<a href="#source-assets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require(&#x27;path&#x27;);
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> const svgToMiniDataURI = require(&#x27;mini-svg-data-uri&#x27;);
</span></span>
module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line"> output: {
</span><span class="token prefix unchanged"> </span><span class="token line">   filename: &#x27;main.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, &#x27;dist&#x27;)
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       test: /\.svg/,
</span><span class="token prefix deleted">-</span><span class="token line">       type: &#x27;asset/inline&#x27;,
</span><span class="token prefix deleted">-</span><span class="token line">       generator: {
</span><span class="token prefix deleted">-</span><span class="token line">         dataUrl: content =&gt; {
</span><span class="token prefix deleted">-</span><span class="token line">           content = content.toString();
</span><span class="token prefix deleted">-</span><span class="token line">           return svgToMiniDataURI(content);
</span><span class="token prefix deleted">-</span><span class="token line">         }
</span><span class="token prefix deleted">-</span><span class="token line">       }
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       test: /\.txt/,
</span><span class="token prefix inserted">+</span><span class="token line">       type: &#x27;asset/source&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span>};</code></pre>
<p><strong>src/example.txt</strong></p>
<pre><code class="hljs language-text">Hello world
</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import metroMap from &#x27;./images/metro.svg&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import exampleText from &#x27;./example.txt&#x27;;
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> block.style.background = `url(${metroMap}); // url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDo...vc3ZnPgo=)
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> block.textContent = exampleText; // &#x27;Hello world&#x27;</span></span></code></pre>
<p>All <code>.txt</code> files will be injected into the bundles as is.</p>
<h2><span id="url-assets"></span>URL assets<a href="#url-assets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>When using <code>new URL(&#x27;./path/to/asset&#x27;, import.meta.url)</code>, webpack creates an asset module too.</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> logo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#x27;./logo.svg&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Depending on the <a href="/configuration/target/"><code>target</code></a> in your configuration, webpack would compile the above code into a different result:</p>
<pre><code class="hljs language-js"><span class="token comment">// target: web</span>
<span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>
  __webpack_public_path__ <span class="token operator">+</span> <span class="token string">&#x27;logo.svg&#x27;</span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>baseURI <span class="token operator">||</span> self<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// target: webworker</span>
<span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>__webpack_public_path__ <span class="token operator">+</span> <span class="token string">&#x27;logo.svg&#x27;</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// target: node, node-webkit, nwjs, electron-main, electron-renderer, electron-preload, async-node</span>
<span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>
  __webpack_public_path__ <span class="token operator">+</span> <span class="token string">&#x27;logo.svg&#x27;</span><span class="token punctuation">,</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;url&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pathToFileUrl</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>As of webpack 5.38.0, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs">Data URLs</a> are supported in <code>new URL()</code> as well:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#x27;data:,&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span>href <span class="token operator">===</span> <span class="token string">&#x27;data:,&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span>protocol <span class="token operator">===</span> <span class="token string">&#x27;data:&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span>pathname <span class="token operator">===</span> <span class="token string">&#x27;,&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2><span id="general-asset-type"></span>General asset type<a href="#general-asset-type" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require(&#x27;path&#x27;);

module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line"> output: {
</span><span class="token prefix unchanged"> </span><span class="token line">   filename: &#x27;main.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, &#x27;dist&#x27;)
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       test: /\.txt/,
</span><span class="token prefix inserted">+</span><span class="token line">       type: &#x27;asset&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span>};</code></pre>
<p>Now webpack will automatically choose between <code>resource</code> and <code>inline</code> by following a default condition: a file with size less than 8kb will be treated as a <code>inline</code> module type and <code>resource</code> module type otherwise.</p>
<p>You can change this condition by setting a <a href="/configuration/module/#ruleparserdataurlcondition"><code>Rule.parser.dataUrlCondition.maxSize</code></a> option on the module rule level of your webpack configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require(&#x27;path&#x27;);

module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> entry: &#x27;./src/index.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line"> output: {
</span><span class="token prefix unchanged"> </span><span class="token line">   filename: &#x27;main.js&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   path: path.resolve(__dirname, &#x27;dist&#x27;)
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\.txt/,
</span><span class="token prefix unchanged"> </span><span class="token line">       type: &#x27;asset&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       parser: {
</span><span class="token prefix inserted">+</span><span class="token line">         dataUrlCondition: {
</span><span class="token prefix inserted">+</span><span class="token line">           maxSize: 4 * 1024 // 4kb
</span><span class="token prefix inserted">+</span><span class="token line">         }
</span><span class="token prefix inserted">+</span><span class="token line">       }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span>};</code></pre>
<p>Also you can <a href="/configuration/module/#ruleparserdataurlcondition">specify a function</a> to decide to inlining a module or not.</p>
<h2><span id="replacing-inline-loader-syntax"></span>Replacing Inline Loader Syntax<a href="#replacing-inline-loader-syntax" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Before Asset Modules and Webpack 5, it was possible to use <a href="https://webpack.js.org/concepts/loaders/#inline">inline syntax</a> with the legacy loaders mentioned above.</p>
<p>It is now recommended to remove all inline loader syntax and use a resourceQuery condition to mimic the functionality of the inline syntax.</p>
<p>For example, in the case of replacing <code>raw-loader</code> with <code>asset/source</code> type:</p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import myModule from &#x27;raw-loader!my-module&#x27;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import myModule from &#x27;my-module?raw&#x27;;</span></span></code></pre>
<p>and in the webpack configuration:</p>
<pre><code class="hljs language-diff">module: {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">   // ...
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     {
</span><span class="token prefix inserted">+</span><span class="token line">       resourceQuery: /raw/,
</span><span class="token prefix inserted">+</span><span class="token line">       type: &#x27;asset/source&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">     }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> },</span></span></code></pre>
<p>and if you&#x27;d like to exclude raw assets from being processed by other loaders, use a negative condition:</p>
<pre><code class="hljs language-diff">module: {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">   // ...
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     {
</span><span class="token prefix inserted">+</span><span class="token line">       test: /\.m?js$/,
</span><span class="token prefix inserted">+</span><span class="token line">       resourceQuery: { not: [/raw/] },
</span><span class="token prefix inserted">+</span><span class="token line">       use: [ ... ]
</span><span class="token prefix inserted">+</span><span class="token line">     },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       resourceQuery: /raw/,
</span><span class="token prefix unchanged"> </span><span class="token line">       type: &#x27;asset/source&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> },</span></span></code></pre>
<p>or a <code>oneOf</code> list of rules. Here only the first matching rule will be applied:</p>
<pre><code class="hljs language-diff">module: {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">   // ...
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     { oneOf: [
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       {
</span><span class="token prefix unchanged"> </span><span class="token line">         resourceQuery: /raw/,
</span><span class="token prefix unchanged"> </span><span class="token line">         type: &#x27;asset/source&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">       },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       {
</span><span class="token prefix inserted">+</span><span class="token line">         test: /\.m?js$/,
</span><span class="token prefix inserted">+</span><span class="token line">         use: [ ... ]
</span><span class="token prefix inserted">+</span><span class="token line">       },
</span><span class="token prefix inserted">+</span><span class="token line">     ] }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> },</span></span></code></pre>
<h2><span id="disable-emitting-assets"></span>Disable emitting assets<a href="#disable-emitting-assets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>For use cases like Server side rendering, you might want to disable emitting assets, which is feasible with <a href="/configuration/module/#rulegeneratoremit"><code>emit</code></a> option under <code>Rule.generator</code>:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.png$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset/resource&#x27;</span><span class="token punctuation">,</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          emit<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h1><span id="package-exports"></span>Package exports<a href="#package-exports" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>The <code>exports</code> field in the <code>package.json</code> of a package allows to declare
which module should be used when using module requests like <code>import &quot;package&quot;</code> or <code>import &quot;package/sub/path&quot;</code>.
It replaces the default implementation that returns <code>main</code> field resp. <code>index.js</code> files for <code>&quot;package&quot;</code> and
the file system lookup for <code>&quot;package/sub/path&quot;</code>.</p>
<p>When the <code>exports</code> field is specified, only these module requests are available.
Any other requests will lead to a ModuleNotFound Error.</p>
<h2><span id="general-syntax"></span>General syntax<a href="#general-syntax" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>In general the <code>exports</code> field should contain an object
where each properties specifies a sub path of the module request.
For the examples above the following properties could be used:
<code>&quot;.&quot;</code> for <code>import &quot;package&quot;</code> and <code>&quot;./sub/path&quot;</code> for <code>import &quot;package/sub/path&quot;</code>.
Properties ending with a <code>/</code> will forward a request with this prefix to the old file system lookup algorithm.
For properties ending with <code>*</code>, <code>*</code> may take any value and any <code>*</code> in the property value is replaced with the taken value.</p>
<p>An example:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;.&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./main.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./sub/path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./secondary.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./prefix/&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./directory/&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./prefix/deep/&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./other-directory/&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./other-prefix/*&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./yet-another/*/*.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<table><thead><tr><th>Module request</th><th>Result</th></tr></thead><tbody><tr><td data-th="Module request"><span><code>package</code></span></td><td data-th="Result"><span><code>.../package/main.js</code></span></td></tr><tr><td data-th="Module request"><span><code>package/sub/path</code></span></td><td data-th="Result"><span><code>.../package/secondary.js</code></span></td></tr><tr><td data-th="Module request"><span><code>package/prefix/some/file.js</code></span></td><td data-th="Result"><span><code>.../package/directory/some/file.js</code></span></td></tr><tr><td data-th="Module request"><span><code>package/prefix/deep/file.js</code></span></td><td data-th="Result"><span><code>.../package/other-directory/file.js</code></span></td></tr><tr><td data-th="Module request"><span><code>package/other-prefix/deep/file.js</code></span></td><td data-th="Result"><span><code>.../package/yet-another/deep/file/deep/file.js</code></span></td></tr><tr><td data-th="Module request"><span><code>package/main.js</code></span></td><td data-th="Result"><span>Error</span></td></tr></tbody></table>
<h2><span id="alternatives"></span>Alternatives<a href="#alternatives" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Instead of providing a single result, the package author may provide a list of results.
In such a scenario this list is tried in order and the first valid result will be used.</p>
<p>Note: Only the first valid result will be used, not all valid results.</p>
<p>Example:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;./things/&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./good-things/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./bad-things/&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Here <code>package/things/apple</code> might be found in <code>.../package/good-things/apple</code> or in <code>.../package/bad-things/apple</code>.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6><p>As of version 5.94.0, webpack&#x27;s behavior has been updated to align with Node&#x27;s behavior. It now selects the first valid path without attempting further resolutions and throws an error if the path cannot be resolved.</p></aside>
<p>For example, given the following configuration:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;.&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;-bad-specifier-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./non-existent.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./existent.js&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Webpack 5.94.0+ will now throw an error since <code>non-existent.js</code> is not found while the previous behavior would have resolved to <code>existent.js</code>.</p>
<h2><span id="conditional-syntax"></span>Conditional syntax<a href="#conditional-syntax" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Instead of providing results directly in the <code>exports</code> field,
the package author may let the module system choose one based on conditions about the environment.</p>
<p>In this case an object mapping conditions to results should be used.
Conditions are tried in object order.
Conditions that contain invalid results are skipped.
Conditions might be nested to create a logical AND.
The last condition in the object might be the special <code>&quot;default&quot;</code> condition,
which is always matched.</p>
<p>Example:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;.&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;red&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./stop.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;yellow&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./stop.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;green&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;free&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./drive.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wait.js&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./drive-carefully.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>This translates to something like:</p>
<pre><code class="hljs language-ts"><span class="token keyword">if</span> <span class="token punctuation">(</span>red <span class="token operator">&amp;&amp;</span> <span class="token function">valid</span><span class="token punctuation">(</span><span class="token string">&#x27;./stop.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#x27;./stop.js&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>yellow <span class="token operator">&amp;&amp;</span> <span class="token function">valid</span><span class="token punctuation">(</span><span class="token string">&#x27;./stop.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#x27;./stop.js&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>green<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>free <span class="token operator">&amp;&amp;</span> <span class="token function">valid</span><span class="token punctuation">(</span><span class="token string">&#x27;./drive.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#x27;./drive.js&#x27;</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">valid</span><span class="token punctuation">(</span><span class="token string">&#x27;./wait.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#x27;./wait.js&#x27;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">valid</span><span class="token punctuation">(</span><span class="token string">&#x27;./drive-carefully.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#x27;./drive-carefully.js&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ModuleNotFoundError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The available conditions vary depending on the module system and tool used.</p>
<h2><span id="abbreviation"></span>Abbreviation<a href="#abbreviation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>When only a single entry (<code>&quot;.&quot;</code>) into the package should be supported the <code>{ &quot;.&quot;: ... }</code> object nesting can be omitted:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.mjs&quot;</span>
<span class="token punctuation">}</span></code></pre>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;red&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./stop.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;green&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./drive.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2><span id="notes-about-ordering"></span>Notes about ordering<a href="#notes-about-ordering" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>In an object where each key is a condition, order of properties is significant. Conditions are handled in the order they are specified.</p>
<p>Example: <code>{ &quot;red&quot;: &quot;./stop.js&quot;, &quot;green&quot;: &quot;./drive.js&quot; }</code> != <code>{ &quot;green&quot;: &quot;./drive.js&quot;, &quot;red&quot;: &quot;./stop.js&quot; }</code> (when both <code>red</code> and <code>green</code> conditions are set, first property will be used)</p>
<p>In an object where each key is a subpath, order of properties (subpaths) is not significant. More specific paths are preferred over less specific ones.</p>
<p>Example: <code>{ &quot;./a/&quot;: &quot;./x/&quot;, &quot;./a/b/&quot;: &quot;./y/&quot;, &quot;./a/b/c&quot;: &quot;./z&quot; }</code> == <code>{ &quot;./a/b/c&quot;: &quot;./z&quot;, &quot;./a/b/&quot;: &quot;./y/&quot;, &quot;./a/&quot;: &quot;./x/&quot; }</code> (order will always be: <code>./a/b/c</code> &gt; <code>./a/b/</code> &gt; <code>./a/</code>)</p>
<p><code>exports</code> field is preferred over other package entry fields like <code>main</code>, <code>module</code>, <code>browser</code> or custom ones.</p>
<h2><span id="support"></span>Support<a href="#support" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<table><thead><tr><th>Feature</th><th>Supported by</th></tr></thead><tbody><tr><td data-th="Feature"><span><code>&quot;.&quot;</code> property</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr</span></td></tr><tr><td data-th="Feature"><span>normal property</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr</span></td></tr><tr><td data-th="Feature"><span>property ending with <code>/</code></span></td><td data-th="Supported by"><span><del>Node.js<sup>(1)</sup></del>, webpack, rollup, esinstall<sup>(2)</sup>, wmr<sup>(3)</sup></span></td></tr><tr><td data-th="Feature"><span>property ending with <code>*</code></span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall</span></td></tr><tr><td data-th="Feature"><span>Alternatives</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, <strike>esinstall</strike><sup>(4)</sup></span></td></tr><tr><td data-th="Feature"><span>Abbreviation only path</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr</span></td></tr><tr><td data-th="Feature"><span>Abbreviation only conditions</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr</span></td></tr><tr><td data-th="Feature"><span>Conditional syntax</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr</span></td></tr><tr><td data-th="Feature"><span>Nested conditional syntax</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, wmr<sup>(5)</sup></span></td></tr><tr><td data-th="Feature"><span>Conditions Order</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, wmr<sup>(6)</sup></span></td></tr><tr><td data-th="Feature"><span><code>&quot;default&quot;</code> condition</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr</span></td></tr><tr><td data-th="Feature"><span>Path Order</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup</span></td></tr><tr><td data-th="Feature"><span>Error when not mapped</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr<sup>(7)</sup></span></td></tr><tr><td data-th="Feature"><span>Error when mixing conditions and paths</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup</span></td></tr></tbody></table>
<p>(1) Removed in Node.js 17. Use <code>*</code> instead.</p>
<p>(2) <code>&quot;./&quot;</code> is intentionally ignored as key.</p>
<p>(3) The property value is ignored and property key is used as target. Effectively only allowing mappings with key and value are identical.</p>
<p>(4) The syntax is supported, but always the first entry is used, which makes it unusable for any practical use case.</p>
<p>(5) Fallback to alternative sibling parent conditions is handling incorrectly.</p>
<p>(6) For the <code>require</code> condition object order is handled incorrectly. This is intentionally as wmr doesn&#x27;t differ between referencing syntax.</p>
<p>(7) When using <code>&quot;exports&quot;: &quot;./file.js&quot;</code> abbreviation, any request e. g. <code>package/not-existing</code> will resolve to that. When not using the abbreviation, direct file access e. g. <code>package/file.js</code> will not lead to an error.</p>
<h2><span id="conditions"></span>Conditions<a href="#conditions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<h3><span id="reference-syntax"></span>Reference syntax<a href="#reference-syntax" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>One of these conditions is set depending on the syntax used to reference the module:</p>
<table><thead><tr><th>Condition</th><th>Description</th><th>Supported by</th></tr></thead><tbody><tr><td data-th="Condition"><span><code>import</code></span></td><td data-th="Description"><span>Request is issued from ESM syntax or similar.</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall<sup>(1)</sup>, wmr<sup>(1)</sup></span></td></tr><tr><td data-th="Condition"><span><code>require</code></span></td><td data-th="Description"><span>Request is issued from CommonJs/AMD syntax or similar.</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall<sup>(1)</sup>, wmr<sup>(1)</sup></span></td></tr><tr><td data-th="Condition"><span><code>style</code></span></td><td data-th="Description"><span>Request is issued from a stylesheet reference.</span></td><td data-th="Supported by"><span>-</span></td></tr><tr><td data-th="Condition"><span><code>sass</code></span></td><td data-th="Description"><span>Request is issued from a sass stylesheet reference.</span></td><td data-th="Supported by"><span>-</span></td></tr><tr><td data-th="Condition"><span><code>asset</code></span></td><td data-th="Description"><span>Request is issued from a asset reference.</span></td><td data-th="Supported by"><span>-</span></td></tr><tr><td data-th="Condition"><span><code>script</code></span></td><td data-th="Description"><span>Request is issued from a normal script tag without module system.</span></td><td data-th="Supported by"><span>-</span></td></tr></tbody></table>
<p>These conditions might also be set additionally:</p>
<table><thead><tr><th>Condition</th><th>Description</th><th>Supported by</th></tr></thead><tbody><tr><td data-th="Condition"><span><code>module</code></span></td><td data-th="Description"><span>All module syntax that allows to reference javascript supports ESM.<br/>(only combined with <code>import</code> or <code>require</code>)</span></td><td data-th="Supported by"><span>webpack, rollup, wmr</span></td></tr><tr><td data-th="Condition"><span><code>esmodules</code></span></td><td data-th="Description"><span>Always set by supported tools.</span></td><td data-th="Supported by"><span>wmr</span></td></tr><tr><td data-th="Condition"><span><code>types</code></span></td><td data-th="Description"><span>Request is issued from typescript that is interested in type declarations.</span></td><td data-th="Supported by"><span>-</span></td></tr></tbody></table>
<p>(1) <code>import</code> and <code>require</code> are both set independent of referencing syntax. <code>require</code> has always lower priority.</p>
<h4><span id="import"></span>import<a href="#import" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<p>The following syntax will set the <code>import</code> condition:</p>
<ul>
<li>ESM <code>import</code> declarations in ESM</li>
<li>JS <code>import()</code> expression</li>
<li>HTML <code>&lt;script type=&quot;module&quot;&gt;</code> in HTML</li>
<li>HTML <code>&lt;link rel=&quot;preload/prefetch&quot;&gt;</code> in HTML</li>
<li>JS <code>new Worker(..., { type: &quot;module&quot; })</code></li>
<li>WASM <code>import</code> section</li>
<li>ESM HMR (webpack) <code>import.hot.accept/decline([...])</code></li>
<li>JS <code>Worklet.addModule</code></li>
<li>Using javascript as entrypoint</li>
</ul>
<h4><span id="require"></span>require<a href="#require" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<p>The following syntax will set the <code>require</code> condition:</p>
<ul>
<li>CommonJs <code>require(...)</code></li>
<li>AMD <code>define()</code></li>
<li>AMD <code>require([...])</code></li>
<li>CommonJs <code>require.resolve()</code></li>
<li>CommonJs (webpack) <code>require.ensure([...])</code></li>
<li>CommonJs (webpack) <code>require.context</code></li>
<li>CommonJs HMR (webpack) <code>module.hot.accept/decline([...])</code></li>
<li>HTML <code>&lt;script src=&quot;...&quot;&gt;</code></li>
</ul>
<h4><span id="style"></span>style<a href="#style" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<p>The following syntax will set the <code>style</code> condition:</p>
<ul>
<li>CSS <code>@import</code></li>
<li>HTML <code>&lt;link rel=&quot;stylesheet&quot;&gt;</code></li>
</ul>
<h4><span id="asset"></span>asset<a href="#asset" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<p>The following syntax will set the <code>asset</code> condition:</p>
<ul>
<li>CSS <code>url()</code></li>
<li>ESM <code>new URL(..., import.meta.url)</code></li>
<li>HTML <code>&lt;img src=&quot;...&quot;&gt;</code></li>
</ul>
<h4><span id="script"></span>script<a href="#script" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<p>The following syntax will set the <code>script</code> condition:</p>
<ul>
<li>HTML <code>&lt;script src=&quot;...&quot;&gt;</code></li>
</ul>
<p><code>script</code> should only be set when no module system is supported.
When the script is preprocessed by a system supporting CommonJs
it should set <code>require</code> instead.</p>
<p>This condition should be used when looking for a javascript file that can be injected
as script tag in a HTML page without additional preprocessing.</p>
<h3><span id="optimizations"></span>Optimizations<a href="#optimizations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>The following conditions are set for various optimizations:</p>
<table><thead><tr><th>Condition</th><th>Description</th><th>Supported by</th></tr></thead><tbody><tr><td data-th="Condition"><span><code>production</code></span></td><td data-th="Description"><span>In a production environment.<br/>No devtooling should be included.</span></td><td data-th="Supported by"><span>webpack</span></td></tr><tr><td data-th="Condition"><span><code>development</code></span></td><td data-th="Description"><span>In a development environment.<br/>Devtooling should be included.</span></td><td data-th="Supported by"><span>webpack</span></td></tr></tbody></table>
<p>Note: Since <code>production</code> and <code>development</code> is not supported by everyone, no assumption should be made when none of these is set.</p>
<h3><span id="target-environment"></span>Target environment<a href="#target-environment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>The following conditions are set depending on the target environment:</p>
<table><thead><tr><th>Condition</th><th>Description</th><th>Supported by</th></tr></thead><tbody><tr><td data-th="Condition"><span><code>browser</code></span></td><td data-th="Description"><span>Code will run in a browser.</span></td><td data-th="Supported by"><span>webpack, esinstall, wmr</span></td></tr><tr><td data-th="Condition"><span><code>electron</code></span></td><td data-th="Description"><span>Code will run in electron.<sup>(1)</sup></span></td><td data-th="Supported by"><span>webpack</span></td></tr><tr><td data-th="Condition"><span><code>worker</code></span></td><td data-th="Description"><span>Code will run in a (Web)Worker.<sup>(1)</sup></span></td><td data-th="Supported by"><span>webpack</span></td></tr><tr><td data-th="Condition"><span><code>worklet</code></span></td><td data-th="Description"><span>Code will run in a Worklet.<sup>(1)</sup></span></td><td data-th="Supported by"><span>-</span></td></tr><tr><td data-th="Condition"><span><code>node</code></span></td><td data-th="Description"><span>Code will run in Node.js.</span></td><td data-th="Supported by"><span>Node.js, webpack, wmr<sup>(2)</sup></span></td></tr><tr><td data-th="Condition"><span><code>deno</code></span></td><td data-th="Description"><span>Code will run in Deno.</span></td><td data-th="Supported by"><span>-</span></td></tr><tr><td data-th="Condition"><span><code>react-native</code></span></td><td data-th="Description"><span>Code will run in react-native.</span></td><td data-th="Supported by"><span>-</span></td></tr></tbody></table>
<p>(1) <code>electron</code>, <code>worker</code> and <code>worklet</code> comes combined with either <code>node</code> or <code>browser</code>, depending on the context.</p>
<p>(2) This is set for browser target environment.</p>
<p>Since there are multiple versions of each environment the following guidelines apply:</p>
<ul>
<li><code>node</code>: See <code>engines</code> field for compatibility.</li>
<li><code>browser</code>: Compatible with current Spec and stage 4 proposals at time of publishing the package. Polyfilling resp. transpiling must be handled on consumer side.<!-- -->
<ul>
<li>Features that are not possible to polyfill or transpile should be used carefully as it limits the possible usage.</li>
</ul>
</li>
<li><code>deno</code>: TBD</li>
<li><code>react-native</code>: TBD</li>
</ul>
<h3><span id="conditions-preprocessor-and-runtimes"></span>Conditions: Preprocessor and runtimes<a href="#conditions-preprocessor-and-runtimes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>The following conditions are set depending on which tool preprocesses the source code.</p>
<table><thead><tr><th>Condition</th><th>Description</th><th>Supported by</th></tr></thead><tbody><tr><td data-th="Condition"><span><code>webpack</code></span></td><td data-th="Description"><span>Processed by webpack.</span></td><td data-th="Supported by"><span>webpack</span></td></tr></tbody></table>
<p>Sadly there is no <code>node-js</code> condition for Node.js as runtime.
This would simplify creating exceptions for Node.js.</p>
<h3><span id="conditions-custom"></span>Conditions: Custom<a href="#conditions-custom" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>The following tools support custom conditions:</p>
<table><thead><tr><th>Tool</th><th>Supported</th><th>Notes</th></tr></thead><tbody><tr><td data-th="Tool"><span>Node.js</span></td><td data-th="Supported"><span>yes</span></td><td data-th="Notes"><span>Use <a href="https://nodejs.org/api/cli.html#cli_c_condition_conditions_condition"><code>--conditions</code></a> CLI argument.</span></td></tr><tr><td data-th="Tool"><span>webpack</span></td><td data-th="Supported"><span>yes</span></td><td data-th="Notes"><span>Use <a href="/configuration/resolve/#resolveconditionnames"><code>resolve.conditionNames</code></a> configuration option.</span></td></tr><tr><td data-th="Tool"><span>rollup</span></td><td data-th="Supported"><span>yes</span></td><td data-th="Notes"><span>Use <code>exportConditions</code> option for <code>@rollup/plugin-node-resolve</code></span></td></tr><tr><td data-th="Tool"><span>esinstall</span></td><td data-th="Supported"><span>no</span></td><td data-th="Notes"><span>-</span></td></tr><tr><td data-th="Tool"><span>wmr</span></td><td data-th="Supported"><span>no</span></td><td data-th="Notes"><span>-</span></td></tr></tbody></table>
<p>For custom conditions the following naming schema is recommended:</p>
<p><code>&lt;company-name&gt;:&lt;condition-name&gt;</code></p>
<p>Examples: <code>example-corp:beta</code>, <code>google:internal</code>.</p>
<h2><span id="common-patterns"></span>Common patterns<a href="#common-patterns" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>All patterns are explained with a single <code>&quot;.&quot;</code> entry into the package, but they can be extended from multiple entries too, by repeating the pattern for each entry.</p>
<p>These pattern should be used as guide not as strict ruleset.
They can be adapted to the individual packages.</p>
<p>These pattern are based on the following list of goals/assumptions:</p>
<ul>
<li>Packages are rotting.<!-- -->
<ul>
<li>We assume at some point packages are no longer being maintained, but they are continued to be used.</li>
<li><code>exports</code> should be written to use fallbacks for unknown future cases. <code>default</code> condition can be used for that.</li>
<li>As the future is unknown we assume an environment similar to browsers and module system similar to ESM.</li>
</ul>
</li>
<li>Not all conditions are supported by every tool.<!-- -->
<ul>
<li>Fallbacks should be used to handled these cases.</li>
<li>We assume the following fallback make sense in general:<!-- -->
<ul>
<li>ESM &gt; CommonJs</li>
<li>Production &gt; Development</li>
<li>Browser &gt; node.js</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Depending on the package intention maybe something else makes sense and in this case the patterns should be adopted to that. Example: For a command line tool a browser-like future and fallback doesn&#x27;t make a lot of sense, and in this case node.js-like environments and fallbacks should be used instead.</p>
<p>For complex use cases multiple patterns need to be combined by nesting these conditions.</p>
<h3><span id="target-environment-independent-packages"></span>Target environment independent packages<a href="#target-environment-independent-packages" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>These patterns make sense for packages that do not use environment specific APIs.</p>
<h4><span id="providing-only-an-esm-version"></span>Providing only an ESM version<a href="#providing-only-an-esm-version" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
<span class="token punctuation">}</span></code></pre>
<p>Note: Providing only a ESM comes with restrictions for node.js.
Such a package would only work in Node.js &gt;= 14 and only when using <code>import</code>.
It won&#x27;t work with <code>require()</code>.</p>
<h4><span id="providing-commonjs-and-esm-version-stateless"></span>Providing CommonJs and ESM version (stateless)<a href="#providing-commonjs-and-esm-version-stateless" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.cjs&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Most tools get the ESM version.
Node.js is an exception here.
It gets a CommonJs version when using <code>require()</code>.
This will lead to two instances of these package when referencing it with <code>require()</code> and <code>import</code>, but that doesn&#x27;t hurt as the package doesn&#x27;t have state.</p>
<p>The <code>module</code> condition is used as optimization when preprocessing node-targeted code with a tool that supports ESM for <code>require()</code> (like a bundler, when bundling for Node.js).
For such a tool the exception is skipped.
This is technically optional, but bundlers would include the package source code twice otherwise.</p>
<p>You can also use the stateless pattern if you are able to isolate your package state in JSON files.
JSON is consumable from CommonJs and ESM without polluting the graph with the other module system.</p>
<p>Note that here stateless also means class instances are not tested with <code>instanceof</code> as there can be two different classes because of the double module instantiation.</p>
<h4><span id="providing-commonjs-and-esm-version-stateful"></span>Providing CommonJs and ESM version (stateful)<a href="#providing-commonjs-and-esm-version-stateful" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.cjs&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<pre><code class="hljs language-js"><span class="token comment">// wrapper.js</span>
<span class="token keyword">import</span> cjs <span class="token keyword">from</span> <span class="token string">&#x27;./index.cjs&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">A</span> <span class="token operator">=</span> cjs<span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">B</span> <span class="token operator">=</span> cjs<span class="token punctuation">.</span><span class="token constant">B</span><span class="token punctuation">;</span></code></pre>
<p>In a stateful package we must ensure that the package is never instantiated twice.</p>
<p>This isn&#x27;t a problem for most tools, but Node.js is again an exception here.
For Node.js we always use the CommonJs version and expose named exports in the ESM with a ESM wrapper.</p>
<p>We use the <code>module</code> condition as optimization again.</p>
<h4><span id="providing-only-a-commonjs-version"></span>Providing only a CommonJs version<a href="#providing-only-a-commonjs-version" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
<span class="token punctuation">}</span></code></pre>
<p>Providing <code>&quot;type&quot;: &quot;commonjs&quot;</code> helps to statically detect CommonJs files.</p>
<h4><span id="providing-a-bundled-script-version-for-direct-browser-consumption"></span>Providing a bundled script version for direct browser consumption<a href="#providing-a-bundled-script-version-for-direct-browser-consumption" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist-bundle.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Note that despite using <code>&quot;type&quot;: &quot;module&quot;</code> and <code>.js</code> for <code>dist-bundle.js</code> this file is not in ESM format.
It should use globals to allow direct consumption as script tag.</p>
<h3><span id="providing-devtools-or-production-optimizations"></span>Providing devtools or production optimizations<a href="#providing-devtools-or-production-optimizations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>These patterns make sense when a package contains two versions, one for development and one for production.
E. g. the development version could include additional code for better error message or additional warnings.</p>
<h4><span id="without-nodejs-runtime-detection"></span>Without Node.js runtime detection<a href="#without-nodejs-runtime-detection" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-with-devtools.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>When the <code>development</code> condition is supported we use the version enhanced for development.
Otherwise, in production or when mode is unknown, we use the optimized version.</p>
<h4><span id="with-nodejs-runtime-detection"></span>With Node.js runtime detection<a href="#with-nodejs-runtime-detection" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-with-devtools.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-process-env.cjs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<pre><code class="hljs language-js"><span class="token comment">// wrapper-process-env.cjs</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&#x27;development&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./index-optimized.cjs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./index-with-devtools.cjs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>We prefer static detection of production/development mode via the <code>production</code> or <code>development</code> condition.</p>
<p>Node.js allows to detection production/development mode at runtime via <code>process.env.NODE_ENV</code>, so we use that as fallback in Node.js. Sync conditional importing ESM is not possible and we don&#x27;t want to load the package twice, so we have to use CommonJs for the runtime detection.</p>
<p>When it&#x27;s not possible to detect mode we fallback to the production version.</p>
<h3><span id="providing-different-versions-depending-on-target-environment"></span>Providing different versions depending on target environment<a href="#providing-different-versions-depending-on-target-environment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>A fallback environment should be chosen that makes sense for the package to support future environments.
In general a browser-like environment should be assumed.</p>
<h4><span id="providing-nodejs-webworker-and-browser-versions"></span>Providing Node.js, WebWorker and browser versions<a href="#providing-nodejs-webworker-and-browser-versions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;worker&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-worker.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h4><span id="providing-nodejs-browser-and-electron-versions"></span>Providing Node.js, browser and electron versions<a href="#providing-nodejs-browser-and-electron-versions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;electron&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-node.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3><span id="combining-patterns"></span>Combining patterns<a href="#combining-patterns" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<h4><span id="example-1"></span>Example 1<a href="#example-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<p>This is an example for a package that has optimizations for production and development usage with runtime detection for <code>process.env</code> and also ships a CommonJs and ESM version</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-with-devtools.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-with-devtools.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-with-devtools.cjs&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-optimized.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.cjs&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-process-env.cjs&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-with-devtools.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h4><span id="example-2"></span>Example 2<a href="#example-2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<p>This is an example for a package that supports Node.js, browser and electron, has optimizations for production and development usage with runtime detection for <code>process.env</code> and also ships a CommonJs and ESM version.</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;electron&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-node-with-devtools.js&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-electron-node-with-devtools.js&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-node-with-devtools.cjs&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-node-optimized.js&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-electron-node-optimized.js&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-node-optimized.cjs&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-electron-node-process-env.cjs&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-with-devtools.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-optimized.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-optimized.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node-with-devtools.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-node-with-devtools.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node-with-devtools.cjs&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node-optimized.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-node-optimized.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node-optimized.cjs&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-node-process-env.cjs&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-with-devtools.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Looks complex, yes. We were already able to reduce some complexity due to a assumption we can make: Only <code>node</code> need a CommonJs version and can detect production/development with <code>process.env</code>.</p>
<h2><span id="guidelines"></span>Guidelines<a href="#guidelines" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<ul>
<li>Avoid the <code>default</code> export. It&#x27;s handled differently between tooling. Only use named exports.</li>
<li>Never provide different APIs or semantics for different conditions.</li>
<li>Write your source code as ESM and transpile to CJS via babel, typescript or similar tools.</li>
<li>Either use <code>.cjs</code> or <code>type: &quot;commonjs&quot;</code> in package.json to clearly mark source code as CommonJs. This makes it statically detectable for tools if CommonJs or ESM is used. This is important for tools that only support ESM and no CommonJs.</li>
<li>ESM used in packages support the following types of requests:<!-- -->
<ul>
<li>module requests are supported, pointing to other packages with a package.json.</li>
<li>relative requests are supported, pointing to other files within the package.<!-- -->
<ul>
<li>They must not point to files outside of the package.</li>
</ul>
</li>
<li><code>data:</code> url requests are supported.</li>
<li>other absolute or server-relative requests are not supported by default, but they might be supported by some tools or environments.</li>
</ul>
</li>
</ul></div><div class="print:hidden mt-20"><a class="text-gray-500 dark:text-gray-500 text-sm cursor-pointer font-sans hover:underline" href="https://github.com/webpack/webpack.js.org/edit/main/src/content/guides/printable.mdx">Edit this page</a><span class="mx-5 text-black font-bold dark:text-white">·</span><a class="text-gray-500 dark:text-gray-500 text-sm cursor-pointer font-sans hover:underline">Print this page</a></div><div data-testid="contributors" class="print:hidden"><h2 class="!font-sans !font-normal">1<!-- --> <!-- -->Contributor</h2><div><div class="grid gap-[10px] lg:gap-[15px] grid-cols-contributors"><a href="https://github.com/webpack"><img width="45" height="45" alt="webpack" title="webpack" class="w-full rounded-full shadow" src="/icon-square-small-slack.1c7f4f7a52c41f94.png"/></a></div></div></div></div></section></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="/guides/getting-started/">Get Started</a><a class="footer__link" href="/comparison/">Comparison</a><a href="https://privacy-policy.openjsf.org/" target="_blank" rel="noopener noreferrer" class="footer__link">Privacy Policy</a></section><section class="footer__middle"><a class="footer__icon" href="/"><img src="/icon-square-small.9e8aff7a67a5dd20.svg" alt="webpack icon" width="35" height="35"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener noreferrer" class="footer__link">Swag Store</a><a class="footer__link" href="/awesome-webpack/">Awesome webpack</a><a class="footer__link" href="/glossary/">Glossary</a><a class="footer__link" href="/branding/">Branding</a><a href="https://discord.com/invite/8WWf6F7p" target="_blank" rel="noopener noreferrer" class="footer__link">Discord</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener noreferrer" class="footer__link">Changelog</a><a class="footer__link footer__license" href="/license"><img alt="Creative Commons License" src="/cc.185f5779f354f6e9.svg" width="25" height="25"/><img alt="Creative Commons License" src="/by.d2da85793ea9d7bd.svg" width="25" height="25"/></a></section></div></footer></div></div><script>
window.matchMedia('print').addListener(function(mql) {
  if (!mql.matches) {
      window.close();
  }
});
window.print();
</script></body>