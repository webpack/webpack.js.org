<!DOCTYPE html><html lang="en"><head><title data-rh="true">Combined printable page | webpack</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="theme-color" content="#2B3A42"/><meta data-rh="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-rh="true" name="robots" content="noindex,nofollow"/><meta data-rh="true" name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta data-rh="true" property="og:site_name" content="webpack"/><meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" property="og:title" content="Combined printable page | webpack"/><meta data-rh="true" property="og:description" name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta data-rh="true" property="og:image" content="https://webpack.js.org/icon-pwa-512x512.934507c816afbcdb.png"/><meta data-rh="true" property="twitter:card" content="summary"/><meta data-rh="true" property="twitter:site" content="@webpack"/><meta data-rh="true" property="twitter:creator" content="@webpack"/><meta data-rh="true" property="twitter:domain" content="https://webpack.js.org/"/><meta data-rh="true" name="mobile-web-app-capable" content="yes"/><meta data-rh="true" name="apple-mobile-web-app-capable" content="yes"/><meta data-rh="true" name="apple-mobile-web-app-status-bar-style" content="black"/><meta data-rh="true" name="apple-mobile-web-app-title" content="webpack"/><meta data-rh="true" name="msapplication-TileImage" content="/icon_150x150.png"/><meta data-rh="true" name="msapplication-TileColor" content="#465e69"/><link data-rh="true" rel="icon" type="image/x-icon" href="/favicon.a3dd58d3142f7566.ico"/><link data-rh="true" rel="manifest" href="/manifest.json"/><link data-rh="true" rel="canonical" href="https://webpack.js.org/migrate/printable/"/><link data-rh="true" rel="icon" sizes="192x192" href="/icon_192x192.png"/><link data-rh="true" rel="icon" sizes="512x512" href="/icon_512x512.png"/><link data-rh="true" rel="apple-touch-icon" href="/icon_180x180.png"/><link data-rh="true" rel="mask-icon" href="/logo-on-white-bg.4a16a9aed80e42ee.svg" color="#465e69"/><link rel="stylesheet" href=/index.59204c33251d9eff.css /><link rel="stylesheet" href=/4513.869f0846a132527b.css /></head><body><div id="root"><div class="site"><div class="site__header"><header class="bg-blue-800 dark:bg-gray-900"><div class="flex items-center py-10 px-[16px] justify-between md:px-[24px] md:max-w-[1024px] md:mx-auto md:justify-start"><button class="bg-transparent border-none md:hidden"><svg viewBox="-62 138 25 25" width="20" height="20" class="fill-current text-white"><path fill="currentColor" d="M-60.2 140.2h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8M-60.2 148.7h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8M-60.2 157.2h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8"></path></svg></button><a class="md:mr-auto" href="/"><img class="logo" src="/site-logo.c0e60df418e04f58.svg" alt="webpack logo" width="122" height="35"/></a><nav class="hidden md:inline-grid md:grid-flow-col md:gap-x-[18px]"><a aria-label="webpack documentation" class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/concepts/">Documentation</a><a aria-label="contribute to webpack" class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/contribute/">Contribute</a><a aria-label="webpack blog" class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/blog/">Blog</a><div class="relative flex items-center justify-center "><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" aria-label="webpack on GitHub"><svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="16"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 6.8 9.5c.5 0 .7-.2.7-.5v-1.7C6.7 20 6.1 18 6.1 18c-.4-1.2-1-1.5-1-1.5-1-.6 0-.6 0-.6 1 0 1.5 1 1.5 1 .9 1.6 2.4 1.1 3 .9 0-.7.3-1.1.6-1.4-2.2-.2-4.6-1-4.6-4.9 0-1.1.4-2 1-2.7 0-.3-.4-1.3.2-2.7 0 0 .8-.2 2.7 1a9.4 9.4 0 0 1 5 0c2-1.2 2.8-1 2.8-1 .5 1.4.1 2.4 0 2.7.7.7 1 1.6 1 2.7 0 3.8-2.3 4.7-4.5 5 .4.2.7.8.7 1.8V21c0 .3.2.6.7.5 4-1.3 6.8-5 6.8-9.5A10 10 0 0 0 12 2"></path></svg></a></div><div class="relative flex items-center justify-center "><a href="https://x.com/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" aria-label="webpack on X"><svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="16"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a></div><div class="relative flex items-center justify-center "><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" aria-label="webpack on StackOverflow"><svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="16"><path d="M17.4 20.2v-5.4h1.8V22H3v-7.2h1.8v5.4zM6.8 14.3l.3-1.7 8.8 1.8-.3 1.8zm1.1-4.2.8-1.6 8.1 3.8-.7 1.6zm2.3-4 1.1-1.4 7 5.8-1.2 1.4L10 6m4.7-4L20 9l-1.4 1-5.4-7 1.4-1m-8 16.5v-1.8h9v1.8z"></path></svg></a></div><nav class="dropdown "><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><svg viewBox="0 0 610 560" xmlns="http://www.w3.org/2000/svg" class="dropdown__language text-gray-100 hover:text-blue-200 transition-colors duration-200"><path d="m304.8 99.2-162.5-57.3v353.6l162.5-52.6z"></path><path d="m300.9 99 168.7-57.3v353.6l-168.7-52.5zm-200.7 358.4 200.7-66.9v-291.5l-200.7 66.9z" fill="currentColor"></path><path d="m392.4 461.8 28.4 46.8 15-43.5zm-223.9-262.3c-1.1-1 1.4 8.6 4.8 12 6.1 6.1 10.8 6.9 13.3 7 5.6.2 12.5-1.4 16.5-3.1s10.9-5.2 13.5-10.4c.6-1.1 2.1-3 1.1-7.5-.7-3.5-3-4.8-5.7-4.6s-11 2.4-15 3.6-12.2 3.7-15.8 4.5-11.5-.3-12.7-1.5zm101.2 114.8c-1.6-.6-34.3-14.1-38.9-16.4a368 368 0 0 0 -17.5-7.5c12.3-19 20.1-33.4 21.2-35.6 1.9-4 15-29.5 15.3-31.1s.7-7.5.4-8.9-5.1 1.3-11.6 3.5-18.9 10.2-23.7 11.2-20.1 6.8-28 9.4c-7.8 2.6-22.7 7.1-28.8 8.8-6.1 1.6-11.4 1.8-14.9 2.8 0 0 .5 4.8 1.4 6.2s4.1 5 7.9 5.9c3.8 1 10 .6 12.8-.1s7.7-3.1 8.4-4.1c.7-1.1-.3-4.3.8-5.3s16.1-4.5 21.7-6.2 27.2-9.2 30.1-8.8a916 916 0 0 1 -23.9 47.7 821 821 0 0 1 -45 63.3c-5.3 6-18 21.5-22.4 25 1.1.3 9-.4 10.4-1.3 8.9-5.5 23.8-24.1 28.6-29.7a489.1 489.1 0 0 0 36.7-49.4c1.9.8 17.6 13.6 21.7 16.4a293 293 0 0 0 23.7 13.3c3.5 1.5 16.9 7.7 17.5 5.6.7-1.8-2.3-14.1-3.9-14.7z"></path><path clip-rule="evenodd" d="m194.1 484.7a204.9 204.9 0 0 0 30.7 14.5 233.6 233.6 0 0 0 46.4 12c.5 0 16 1.9 19.2 1.9h15.7c6.1-.5 11.8-.9 17.9-1.7 4.9-.7 10.3-1.6 15.5-2.8 3.8-.9 7.8-1.7 11.7-3 3.7-1 7.8-2.4 11.8-3.8l8.2-3.1c2.3-1 5.1-2.3 7.7-3.3a243 243 0 0 0 19.2-10c2.3-1.2 7.5-5.2 10.3-5.2 3.1 0 5.2 2.8 5.2 5.2 0 5.1-6.8 6.6-9.9 8.9-3.3 2.3-7.3 4-10.8 5.9-7 3.7-14.1 6.8-20.9 9.4a251 251 0 0 1 -27.3 8.5c-3.3.7-6.6 1.6-9.9 2.1-1.7.3-19.9 3.1-24.9 3.1h-23a293.9 293.9 0 0 1 -35.1-5.2 196 196 0 0 1 -33.1-10.3c-12-4.5-24.6-10.5-36.4-18.3-2.1-1.4-2.3-2.8-2.3-4.4a5 5 0 0 1 5.1-5.1c2.4.1 8 4.2 9 4.7zm101.4-98.1-189.9 63.2v-280.1l189.9-63.2zm10.6-288.3v292.7a6 6 0 0 1 -1.2 2.6c-.3.5-1 1.2-1.6 1.4a14621 14621 0 0 1 -203.1 67.6c-2.1 0-4-1.4-5.1-3.7 0-.2-.2-.3-.2-.7v-292.8c.3-.9.5-2.1 1.2-2.8 1.4-1.9 3.8-2.3 5.4-2.8 3-1 196.1-65.8 198.9-65.8 1.9 0 5.7 1.2 5.7 4.3z" fill-rule="evenodd"></path><path clip-rule="evenodd" d="m464.3 388-158-49.1v-236l158-53.7zm10.6-345.8v352.4c-.2 4-3 5.7-5.6 5.7-2.3 0-18.6-5.6-21.4-6.4l-65.8-20.4-14.6-4.7-12.9-4c-18.6-5.7-37.6-11.5-56.3-17.8-.7-.2-2.4-2.6-2.4-3.1v-246.1c.3-.9.7-1.9 1.6-2.6 1.4-1.6 61.1-21.4 84.7-29.3 6.3-2.3 84.8-29.3 87.3-29.3 3 .1 5.4 2.3 5.4 5.6z" fill-rule="evenodd"></path><path d="m515 461.8-211.1-67.3.9-292.8 210.2 66.9z"></path><path clip-rule="evenodd" d="m408.6 232.5-20.7 50.1 38.1 11.5zm-12.4-47.2 27.2 8.2 49.5 178.6-27.9-8.5-10-36.7-57.7-17.5-12.4 29.9-27.9-8.5z" fill="currentColor" fill-rule="evenodd"></path></svg><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="https://webpack.js.org/migrate/printable/" class="px-5 block"><span>English</span></a></li><li><a href="https://webpack.docschina.org/migrate/printable/" class="px-5 block"><span lang="zh">中文</span></a></li><li><a href="https://webpack.kr/migrate/printable/" class="px-5 block"><span lang="ko">한국어</span></a></li></ul></div></nav></nav><div class="inline-flex items-center ml-[18px]"><div class="relative flex items-center justify-center "><button aria-label="Switch to dark theme" class="bg-transparent border-none cursor-pointer text-[16px] p-0 inline-flex items-center text-gray-100 hover:text-blue-200 transition-colors duration-200" data-testid="hello-darkness"><svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18.14a.722.722 0 0 0-.722.722v2.166a.722.722 0 0 0 1.444 0v-2.166a.722.722 0 0 0-.722-.721ZM12 2.25a.722.722 0 0 0-.722.722v2.166a.722.722 0 0 0 1.444 0V2.972A.722.722 0 0 0 12 2.25ZM5.86 12a.722.722 0 0 0-.723-.722H2.972a.722.722 0 0 0 0 1.444h2.165A.722.722 0 0 0 5.86 12ZM21.028 11.278h-2.165a.722.722 0 0 0 0 1.444h2.165a.722.722 0 0 0 0-1.444ZM7.148 16.13a.72.72 0 0 0-.51.21l-1.533 1.534a.72.72 0 1 0 1.022 1.022l1.532-1.533a.724.724 0 0 0-.51-1.233ZM16.852 7.87a.72.72 0 0 0 .51-.21l1.533-1.533a.72.72 0 0 0 .211-.511.72.72 0 0 0-.722-.722.72.72 0 0 0-.51.21L16.34 6.639a.72.72 0 0 0-.211.51.72.72 0 0 0 .722.722ZM6.127 5.105a.72.72 0 0 0-.511-.211.72.72 0 0 0-.722.722.72.72 0 0 0 .21.51L6.638 7.66a.72.72 0 0 0 .511.211.72.72 0 0 0 .722-.722.72.72 0 0 0-.21-.51L6.126 5.105ZM17.363 16.34a.72.72 0 1 0-1.022 1.022l1.532 1.533a.72.72 0 0 0 1.022 0 .72.72 0 0 0 0-1.021l-1.532-1.533ZM12 7.5c-2.48 0-4.5 2.02-4.5 4.5s2.02 4.5 4.5 4.5 4.5-2.02 4.5-4.5-2.02-4.5-4.5-4.5Z" fill="currentColor"></path></svg></button></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="bg-gray-100 dark:bg-gray-800 hidden md:block"><div class="md:max-w-[1024px] md:mx-auto md:grid md:grid-flow-col md:justify-end md:gap-x-[20px] md:px-[24px]" data-testid="sub-navigation"><a title="api" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/api/">API</a><a title="concepts" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/concepts/">concepts</a><a title="configuration" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/configuration/">configuration</a><a title="guides" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/guides/">guides</a><a title="loaders" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/loaders/">loaders</a><a title="migrate" aria-current="page" class="!text-black dark:!text-white text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/migrate/">migrate</a><a title="plugins" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/plugins/">plugins</a></div></div></header></div><div class="container site__content"><div class="sponsors"><div class="sponsors__content"><div class="sponsors__link-wrapper"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener noreferrer"><img class="agGridLogo" src="/ag-grid-logo.6a68915181a34a15.png" alt="ag grid" width="220" loading="lazy"/></a></div><div class="sponsors__link-wrapper"><a href="https://charts.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener noreferrer"><img class="agChartsLogo" src="/ag-charts-logo.f1735fb8902861d2.png" alt="ag charts" width="220" loading="lazy"/></a></div><div class="sponsors__link-wrapper-2"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener noreferrer"><div class="sponsors__tagline">Datagrid and Charting for Enterprise Applications</div><div class="sponsors__img__wrapper"><img src="/icon-square-small.9e8aff7a67a5dd20.svg" alt="webpack" width="150" height="150" loading="lazy"/></div><div class="sponsors__footer">Proud to partner with webpack</div></a></div></div></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="relative z-0 bg-white dark:bg-gray-100 "><select class="text-gray-600 text-14 px-5 py-5 appearance-none box-border border border-gray-200 border-solid flex-col flex w-full rounded-none bg-transparent bg-none"><option selected="" value="5">webpack 5</option><option value="4">webpack 4</option></select><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="absolute right-5 top-5 fill-current text-gray-300 z-[-1]" width="20" height="20"><path d="M4.5 7.5c.5-.4 1-.4 1.6 0l3.9 3.8 4-3.8c.4-.4 1-.4 1.5 0 .4.5.4 1.2 0 1.7l-4.7 4.5a1 1 0 0 1-1.6 0L4.5 9.2c-.4-.5-.4-1.2 0-1.7"></path></svg></div><div class="sidebar-item sidebar-item--disabled`"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4"></path></svg><a class="sidebar-item__title sidebar-link__print" href="/migrate/printable/" rel="nofollow noopener noreferrer" alt="Print" title="Print" target="_blank">Print Section<img src="/icon-print.3c147a8b5a684f88.svg" width="27" height="20" alt="Printer Icon"/></a></div><div><div class="sidebar-item  sidebar-item--disabled"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4"></path></svg><a class="sidebar-item__title" href="/migrate/">Migrate</a></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/migrate/5/">To v5 from v4</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Preparations"><a class="" href="/migrate/5/#preparations">Preparations</a></li><li class="sidebar-item__anchor" title="Upgrade webpack 4 and its plugins/loaders"><a class="" href="/migrate/5/#upgrade-webpack-4-and-its-pluginsloaders">Upgrade webpack 4 and its plugins/loaders</a></li><li class="sidebar-item__anchor" title="Codemods"><a class="" href="/migrate/5/#codemods">Codemods</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Make sure your build has no errors or warnings"><a class="" href="/migrate/5/#make-sure-your-build-has-no-errors-or-warnings">Make sure your build has no errors or warnings</a></li><li class="sidebar-item__anchor" title="Make sure to use mode"><a class="" href="/migrate/5/#make-sure-to-use-mode">Make sure to use mode</a></li><li class="sidebar-item__anchor" title="Update outdated options"><a class="" href="/migrate/5/#update-outdated-options">Update outdated options</a></li><li class="sidebar-item__anchor" title="Test webpack 5 compatibility"><a class="" href="/migrate/5/#test-webpack-5-compatibility">Test webpack 5 compatibility</a></li></ul></li><li class="sidebar-item__anchor" title="Upgrade webpack to 5"><a class="" href="/migrate/5/#upgrade-webpack-to-5">Upgrade webpack to 5</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Clean up configuration"><a class="" href="/migrate/5/#clean-up-configuration">Clean up configuration</a></li><li class="sidebar-item__anchor" title="Need to support an older browser like IE 11?"><a class="" href="/migrate/5/#need-to-support-an-older-browser-like-ie-11">Need to support an older browser like IE 11?</a></li><li class="sidebar-item__anchor" title="Cleanup the code"><a class="" href="/migrate/5/#cleanup-the-code">Cleanup the code</a></li><li class="sidebar-item__anchor" title="Run a single build and follow advice"><a class="" href="/migrate/5/#run-a-single-build-and-follow-advice">Run a single build and follow advice</a></li></ul></li><li class="sidebar-item__anchor" title="Everything works?"><a class="" href="/migrate/5/#everything-works">Everything works?</a></li><li class="sidebar-item__anchor" title="It is not working?"><a class="" href="/migrate/5/#it-is-not-working">It is not working?</a></li><li class="sidebar-item__anchor" title="Something missing in this guide?"><a class="" href="/migrate/5/#something-missing-in-this-guide">Something missing in this guide?</a></li><li class="sidebar-item__anchor" title="Changes to internals"><a class="" href="/migrate/5/#changes-to-internals">Changes to internals</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="getOptions method for Loaders"><a class="" href="/migrate/5/#getoptions-method-for-loaders">getOptions method for Loaders</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/migrate/4/">To v4 from v3</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Node.js v4"><a class="" href="/migrate/4/#nodejs-v4">Node.js v4</a></li><li class="sidebar-item__anchor" title="CLI"><a class="" href="/migrate/4/#cli">CLI</a></li><li class="sidebar-item__anchor" title="Update plugins"><a class="" href="/migrate/4/#update-plugins">Update plugins</a></li><li class="sidebar-item__anchor" title="mode"><a class="" href="/migrate/4/#mode">mode</a></li><li class="sidebar-item__anchor" title="Deprecated/Removed plugins"><a class="" href="/migrate/4/#deprecatedremoved-plugins">Deprecated/Removed plugins</a></li><li class="sidebar-item__anchor" title="CommonsChunkPlugin"><a class="" href="/migrate/4/#commonschunkplugin">CommonsChunkPlugin</a></li><li class="sidebar-item__anchor" title="import() and CommonJS"><a class="" href="/migrate/4/#import-and-commonjs">import() and CommonJS</a></li><li class="sidebar-item__anchor" title="json and loaders"><a class="" href="/migrate/4/#json-and-loaders">json and loaders</a></li><li class="sidebar-item__anchor" title="module.loaders"><a class="" href="/migrate/4/#moduleloaders">module.loaders</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/migrate/3/">To v2 or v3 from v1</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="resolve.root, resolve.fallback, resolve.modulesDirectories"><a class="" href="/migrate/3/#resolveroot-resolvefallback-resolvemodulesdirectories">resolve.root, resolve.fallback, resolve.modulesDirectories</a></li><li class="sidebar-item__anchor" title="resolve.extensions"><a class="" href="/migrate/3/#resolveextensions">resolve.extensions</a></li><li class="sidebar-item__anchor" title="resolve.*"><a class="" href="/migrate/3/#resolve">resolve.*</a></li><li class="sidebar-item__anchor" title="module.loaders is now module.rules"><a class="" href="/migrate/3/#moduleloaders-is-now-modulerules">module.loaders is now module.rules</a></li><li class="sidebar-item__anchor" title="Chaining loaders"><a class="" href="/migrate/3/#chaining-loaders">Chaining loaders</a></li><li class="sidebar-item__anchor" title="Automatic -loader module name extension removed"><a class="" href="/migrate/3/#automatic--loader-module-name-extension-removed">Automatic -loader module name extension removed</a></li><li class="sidebar-item__anchor" title="json-loader is not required anymore"><a class="" href="/migrate/3/#json-loader-is-not-required-anymore">json-loader is not required anymore</a></li><li class="sidebar-item__anchor" title="Loaders in configuration resolve relative to context"><a class="" href="/migrate/3/#loaders-in-configuration-resolve-relative-to-context">Loaders in configuration resolve relative to context</a></li><li class="sidebar-item__anchor" title="module.preLoaders and module.postLoaders were removed:"><a class="" href="/migrate/3/#modulepreloaders-and-modulepostloaders-were-removed">module.preLoaders and module.postLoaders were removed:</a></li><li class="sidebar-item__anchor" title="UglifyJsPlugin sourceMap"><a class="" href="/migrate/3/#uglifyjsplugin-sourcemap">UglifyJsPlugin sourceMap</a></li><li class="sidebar-item__anchor" title="UglifyJsPlugin warnings"><a class="" href="/migrate/3/#uglifyjsplugin-warnings">UglifyJsPlugin warnings</a></li><li class="sidebar-item__anchor" title="UglifyJsPlugin minimize loaders"><a class="" href="/migrate/3/#uglifyjsplugin-minimize-loaders">UglifyJsPlugin minimize loaders</a></li><li class="sidebar-item__anchor" title="DedupePlugin has been removed"><a class="" href="/migrate/3/#dedupeplugin-has-been-removed">DedupePlugin has been removed</a></li><li class="sidebar-item__anchor" title="BannerPlugin - breaking change"><a class="" href="/migrate/3/#bannerplugin---breaking-change">BannerPlugin - breaking change</a></li><li class="sidebar-item__anchor" title="OccurrenceOrderPlugin is now on by default"><a class="" href="/migrate/3/#occurrenceorderplugin-is-now-on-by-default">OccurrenceOrderPlugin is now on by default</a></li><li class="sidebar-item__anchor" title="ExtractTextWebpackPlugin - breaking change"><a class="" href="/migrate/3/#extracttextwebpackplugin---breaking-change">ExtractTextWebpackPlugin - breaking change</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="ExtractTextPlugin.extract"><a class="" href="/migrate/3/#extracttextpluginextract">ExtractTextPlugin.extract</a></li><li class="sidebar-item__anchor" title="new ExtractTextPlugin({options})"><a class="" href="/migrate/3/#new-extracttextpluginoptions">new ExtractTextPlugin({options})</a></li></ul></li><li class="sidebar-item__anchor" title="Full dynamic requires now fail by default"><a class="" href="/migrate/3/#full-dynamic-requires-now-fail-by-default">Full dynamic requires now fail by default</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Using custom arguments in CLI and configuration"><a class="" href="/migrate/3/#using-custom-arguments-in-cli-and-configuration">Using custom arguments in CLI and configuration</a></li></ul></li><li class="sidebar-item__anchor" title="require.ensure and AMD require are asynchronous"><a class="" href="/migrate/3/#requireensure-and-amd-require-are-asynchronous">require.ensure and AMD require are asynchronous</a></li><li class="sidebar-item__anchor" title="Loader configuration is through options"><a class="" href="/migrate/3/#loader-configuration-is-through-options">Loader configuration is through options</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="What are options?"><a class="" href="/migrate/3/#what-are-options">What are options?</a></li></ul></li><li class="sidebar-item__anchor" title="LoaderOptionsPlugin context"><a class="" href="/migrate/3/#loaderoptionsplugin-context">LoaderOptionsPlugin context</a></li><li class="sidebar-item__anchor" title="debug"><a class="" href="/migrate/3/#debug">debug</a></li><li class="sidebar-item__anchor" title="Code Splitting with ES2015"><a class="" href="/migrate/3/#code-splitting-with-es2015">Code Splitting with ES2015</a></li><li class="sidebar-item__anchor" title="Dynamic expressions"><a class="" href="/migrate/3/#dynamic-expressions">Dynamic expressions</a></li><li class="sidebar-item__anchor" title="Mixing ES2015 with AMD and CommonJS"><a class="" href="/migrate/3/#mixing-es2015-with-amd-and-commonjs">Mixing ES2015 with AMD and CommonJS</a></li><li class="sidebar-item__anchor" title="Hints"><a class="" href="/migrate/3/#hints">Hints</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Template strings"><a class="" href="/migrate/3/#template-strings">Template strings</a></li><li class="sidebar-item__anchor" title="Configuration Promise"><a class="" href="/migrate/3/#configuration-promise">Configuration Promise</a></li><li class="sidebar-item__anchor" title="Advanced loader matching"><a class="" href="/migrate/3/#advanced-loader-matching">Advanced loader matching</a></li><li class="sidebar-item__anchor" title="More CLI options"><a class="" href="/migrate/3/#more-cli-options">More CLI options</a></li></ul></li><li class="sidebar-item__anchor" title="Loader changes"><a class="" href="/migrate/3/#loader-changes">Loader changes</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Cacheable"><a class="" href="/migrate/3/#cacheable">Cacheable</a></li><li class="sidebar-item__anchor" title="Complex options"><a class="" href="/migrate/3/#complex-options">Complex options</a></li></ul></li></ul></div></div></div></nav><section class="page"><div class="markdown"><h1>Printable</h1><div id="md-content"><h1><span id="migrate"></span>Migrate<a href="#migrate" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>This section contains information about migrating from older versions of webpack to newer ones.</p>
<h1><span id="to-v5-from-v4"></span>To v5 from v4<a href="#to-v5-from-v4" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>This guide aims to help you migrating to webpack 5 when using webpack directly. If you are using a higher level tool to run webpack, please refer to the tool for migration instructions.</p>
<h2><span id="preparations"></span>Preparations<a href="#preparations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Webpack 5 requires at least Node.js 10.13.0 (LTS), so make sure you upgrade your Node.js if you&#x27;re still running an older one.</p>
<h2><span id="upgrade-webpack-4-and-its-pluginsloaders"></span>Upgrade webpack 4 and its plugins/loaders<a href="#upgrade-webpack-4-and-its-pluginsloaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<ol>
<li>
<p>Upgrade <code>webpack</code> 4 to the latest available version.</p>
<ul>
<li>
<p>When using webpack &gt;= 4, upgrading to the latest webpack 4 version should not require additional guidance.</p>
</li>
<li>
<p>If you are using webpack version less than 4 please see the <a href="/migrate/4/">webpack 4 migration guide</a>.</p>
</li>
</ul>
</li>
<li>
<p>Upgrade <code>webpack-cli</code> to the latest available version (when used)</p>
</li>
<li>
<p>Upgrade all used Plugins and Loaders to the latest available version</p>
<p>Some Plugins and Loaders might have a beta version that has to be used in order to be compatible with webpack 5.
Make sure to read release notes of each individual plugin/loader when upgrading it, since latest version might only support webpack 5 and will fail in v4. In such case, it&#x27;s recommended to update to the latest version that supports webpack 4.</p>
</li>
</ol>
<h2><span id="codemods"></span>Codemods<a href="#codemods" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>To assist with the upgrade from webpack v4 to v5, <a href="https://github.com/codemod-com/codemod">Codemod</a> provides open-source community codemods that can help automate most of the migration process.</p>
<p>Please note that these are not official webpack codemods, and while it aims to streamline the migration, it may not cover all cases. You may still need to perform additional manual steps to fully complete the upgrade.</p>
<p>Run the <a href="https://go.codemod.com/webpack-v5-recipe">webpack v5 migration codemods</a>:</p>
<pre><code class="hljs language-bash">npx codemod@latest webpack/v5/migration-recipe</code></pre>
<p>This will run the following codemods from <a href="https://codemod.com/registry">Codemod registry</a>:</p>
<ul>
<li><a href="https://go.codemod.com/webpack-set-target-false"><code>webpack/v5/set-target-to-false-and-update-plugins</code></a></li>
<li><a href="https://go.codemod.com/webpack-migrate-library-target"><code>webpack/v5/migrate-library-target-to-library-object</code></a></li>
<li><a href="https://go.codemod.com/webpack-json-imports"><code>webpack/v5/json-imports-to-default-imports</code></a></li>
</ul>
<p>Each of these codemods automates a change listed in the webpack v5 migration guide. For a complete list of available webpack v5 codemods, see <a href="https://go.codemod.com/webpack-v5">Codemod Registry</a>.</p>
<h3><span id="make-sure-your-build-has-no-errors-or-warnings"></span>Make sure your build has no errors or warnings<a href="#make-sure-your-build-has-no-errors-or-warnings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>There might be new errors or warnings because of the upgraded versions of <code>webpack</code>, <code>webpack-cli</code>, Plugins and Loaders. Keep an eye for deprecation warnings during the build.</p>
<p>You can invoke <code>webpack</code> this way to get stack traces for deprecation warnings to figure out which Plugins and Loaders are responsible.</p>
<pre><code class="hljs language-bash">node --trace-deprecation node_modules/webpack/bin/webpack.js</code></pre>
<p>As webpack 5 removes all deprecated features, make sure there&#x27;s no webpack deprecation warnings during the build in order to proceed.</p>
<h3><span id="make-sure-to-use-mode"></span>Make sure to use <code>mode</code><a href="#make-sure-to-use-mode" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Set <code>mode</code> to either <a href="/configuration/mode/#mode-production"><code>production</code></a> or <a href="/configuration/mode/#mode-development"><code>development</code></a> to make sure that corresponding defaults are set.</p>
<h3><span id="update-outdated-options"></span>Update outdated options<a href="#update-outdated-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Update the following options to their new version (if used):</p>
<ul>
<li><code>optimization.hashedModuleIds: true</code> → <code>optimization.moduleIds: &#x27;hashed&#x27;</code></li>
<li><code>optimization.namedChunks: true</code> → <code>optimization.chunkIds: &#x27;named&#x27;</code></li>
<li><code>optimization.namedModules: true</code> → <code>optimization.moduleIds: &#x27;named&#x27;</code></li>
<li><code>NamedModulesPlugin</code> → <code>optimization.moduleIds: &#x27;named&#x27;</code></li>
<li><code>NamedChunksPlugin</code> → <code>optimization.chunkIds: &#x27;named&#x27;</code></li>
<li><code>HashedModuleIdsPlugin</code> → <code>optimization.moduleIds: &#x27;hashed&#x27;</code></li>
<li><code>optimization.noEmitOnErrors: false</code> → <code>optimization.emitOnErrors: true</code></li>
<li><code>optimization.occurrenceOrder: true</code> → <code>optimization: { chunkIds: &#x27;total-size&#x27;, moduleIds: &#x27;size&#x27; }</code></li>
<li><code>optimization.splitChunks.cacheGroups.vendors</code> → <code>optimization.splitChunks.cacheGroups.defaultVendors</code></li>
<li><code>optimization.splitChunks.cacheGroups.test(module, chunks)</code> → <code>optimization.splitChunks.cacheGroups.test(module, { chunkGraph, moduleGraph })</code></li>
<li><code>Compilation.entries</code> → <code>Compilation.entryDependencies</code></li>
<li><code>serve</code> → <code>serve</code> is removed in favor of <a href="/configuration/dev-server/"><code>DevServer</code></a></li>
<li><a href="/configuration/module/#ruleoptions--rulequery"><code>Rule.query</code></a> (deprecated since v3) → <code>Rule.options</code>/<code>UseEntry.options</code></li>
<li><code>Rule.loaders</code> → <a href="/configuration/module/#ruleuse"><code>Rule.use</code></a></li>
</ul>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Checkout the detailed changes in the configuration options <a href="/blog/2020-10-10-webpack-5-release/#changes-to-the-configuration">here</a>.</p></aside>
<h3><span id="test-webpack-5-compatibility"></span>Test webpack 5 compatibility<a href="#test-webpack-5-compatibility" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Try to set the following options in your webpack 4 configuration and check if build still works correctly.</p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  node<span class="token operator">:</span> <span class="token punctuation">{</span>
    Buffer<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    process<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>You have to remove these options again when upgrading your configuration for webpack 5.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>webpack 5 removes these options from the configuration schema and will always use <code>false</code>.</p></aside>
<h2><span id="upgrade-webpack-to-5"></span>Upgrade webpack to 5<a href="#upgrade-webpack-to-5" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Now let&#x27;s upgrade webpack to version 5:</p>
<ul>
<li>
<p>npm: <code>npm install webpack@latest</code></p>
</li>
<li>
<p>Yarn: <code>yarn add webpack@latest</code></p>
</li>
</ul>
<p>If you were not able to upgrade some plugins/loaders to the latest in Upgrade webpack 4 and its plugins/loaders step, don&#x27;t forget to upgrade them now.</p>
<h3><span id="clean-up-configuration"></span>Clean up configuration<a href="#clean-up-configuration" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<ul>
<li>
<p>Consider removing <code>optimization.moduleIds</code> and <code>optimization.chunkIds</code> from your webpack configuration. The defaults could be better, because they support long term caching in <a href="/configuration/mode/#mode-production"><code>production mode</code></a> and debugging in <a href="/configuration/mode/#mode-development"><code>development</code> mode</a>.</p>
</li>
<li>
<p>When using <code>[hash]</code> placeholder in webpack configuration, consider changing it to <code>[contenthash]</code>. It is not the same, but proven to be more effective.</p>
</li>
<li>
<p>If you are using Yarn&#x27;s PnP and the <code>pnp-webpack-plugin</code>, we have good news: it is supported by default now. You have to remove it from the configuration.</p>
</li>
<li>
<p>If you are using <code>IgnorePlugin</code> with a regular expression as argument, it takes an <code>options</code> object now: <code>new IgnorePlugin({ resourceRegExp: /regExp/ })</code>.</p>
</li>
<li>
<p>If you are using something like <code>node.fs: &#x27;empty&#x27;</code> replace it with <code>resolve.fallback.fs: false</code>.</p>
</li>
<li>
<p>If you are using <code>watch: true</code> in webpack Node.js API, remove it. There&#x27;s no need to set it as it&#x27;s indicated by the compiler method you call, either <code>true</code> for <code>watch()</code> or <code>false</code> for <code>run()</code>.</p>
</li>
<li>
<p>If you have <code>rules</code> defined for loading assets using <code>raw-loader</code>, <code>url-loader</code>, or <code>file-loader</code>, please use <a href="/guides/asset-modules/">Asset Modules</a> instead as they&#x27;re going to be deprecated in near future.</p>
</li>
<li>
<p>If you have <code>target</code> set to a function, update it to <code>false</code> and apply that function within <code>plugins</code> option. See example below:</p>
<pre><code class="hljs language-json"><span class="token comment">// for webpack 4</span>
<span class="token punctuation">{</span>
    target<span class="token operator">:</span> WebExtensionTarget(nodeConfig)
<span class="token punctuation">}</span>

<span class="token comment">// for webpack 5</span>
<span class="token punctuation">{</span>
    target<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        WebExtensionTarget(nodeConfig)
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<blockquote>
<p><strong>Note</strong>: Codemod for this change:</p>
<pre><code class="hljs language-bash">npx codemod webpack/v5/set-target-to-false-and-update-plugins</code></pre>
<p>(See the <a href="https://codemod.com/registry/webpack-v5-set-target-to-false-and-update-plugins">registry here</a>.)</p>
</blockquote>
</li>
<li>
<p>If you have output.library or output.libraryTarget defined, change the property names: (output.libraryTarget -&gt; output.library.type, output.library -&gt; output.library.name). Example</p>
<pre><code class="hljs language-json"><span class="token comment">// for webpack 4</span>
<span class="token punctuation">{</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
      library<span class="token operator">:</span> &#x27;MyLibrary&#x27;<span class="token punctuation">,</span>
      libraryTarget<span class="token operator">:</span> &#x27;commonjs2&#x27;
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// for webpack 5</span>
<span class="token punctuation">{</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
      library<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> &#x27;MyLibrary&#x27;<span class="token punctuation">,</span>
        type<span class="token operator">:</span> &#x27;commonjs2&#x27;
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<blockquote>
<p><strong>Note</strong>: Codemod for this change:</p>
<pre><code class="hljs language-bash">npx codemod webpack/v5/migrate-library-target-to-library-object</code></pre>
<p>(See the <a href="https://codemod.com/registry/webpack-v5-migrate-library-target-to-library-object">registry here</a>.)</p>
</blockquote>
</li>
</ul>
<p>If you were using WebAssembly via import, you should follow this two step process:</p>
<ul>
<li>Enable the deprecated spec by setting <code>experiments.syncWebAssembly: true</code>, to get the same behavior as in webpack 4.</li>
<li>After successful migration to webpack 5, change the <code>experiments</code> value to <code>experiments: { asyncWebAssembly: true }</code> to use the up-to-date spec for WASM integration.</li>
</ul>
<p>Reconsider <code>optimization.splitChunks</code>:</p>
<ul>
<li>It&#x27;s recommended to use either the defaults or <code>optimization.splitChunks: { chunks: &#x27;all&#x27; }</code>.</li>
<li>When using a custom configuration, drop <code>name: false</code> and replace <code>name: string | function</code> with <code>idHint: string | function</code>.</li>
<li>It was possible to turn off the defaults by setting <code>optimization.splitChunks.cacheGroups: { default: false, vendors: false }</code>. We don&#x27;t recommend doing this, but if you really want to get the same effect in webpack 5: <code>optimization.splitChunks.cacheGroups: { default: false, defaultVendors: false }</code>.</li>
</ul>
<p>Consider removing defaults:</p>
<ul>
<li>Using <code>entry: &#x27;./src/index.js&#x27;</code>: you can omit it, that&#x27;s the default.</li>
<li>Using <code>output.path: path.resolve(__dirname, &#x27;dist&#x27;)</code>: you can omit it, that&#x27;s the default.</li>
<li>Using <code>output.filename: &#x27;[name].js&#x27;</code>: you can omit it, that&#x27;s the default.</li>
</ul>
<h3><span id="need-to-support-an-older-browser-like-ie-11"></span>Need to support an older browser like IE 11?<a href="#need-to-support-an-older-browser-like-ie-11" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<ul>
<li>
<p>If you have <a href="https://github.com/browserslist/browserslist">browserslist</a> enabled for your project, webpack 5 will reuse your <code>browserslist</code> config to decide which code style to emit for the runtime code.</p>
<p>Make sure to:</p>
<ol>
<li>set <a href="/configuration/target/#root"><code>target</code></a> to <code>browserslist</code> or remove <code>target</code> letting webpack set <code>browserslist</code> automatically for you.</li>
<li>add a <code>IE 11</code> to your browserslist configuration.</li>
</ol>
</li>
<li>
<p>Without a <code>browserslist</code> webpack&#x27;s runtime code uses ES2015 syntax (e.g., arrow function) to build smaller bundles. Hence you&#x27;ll need to set <code>target: [&#x27;web&#x27;, &#x27;es5&#x27;]</code> to use the ES5 syntax for browsers (like IE11) which don&#x27;t support ES2015 syntax .</p>
</li>
<li>
<p>For Node.js, builds include the supported Node.js version in the <code>target</code> option and webpack will automatically figure out which syntax is supported, e.g. <code>target: &#x27;node8.6&#x27;</code>.</p>
</li>
</ul>
<h3><span id="cleanup-the-code"></span>Cleanup the code<a href="#cleanup-the-code" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<h4><span id="using--webpackchunkname--"></span>Using <code>/* webpackChunkName: &#x27;...&#x27; */</code><a href="#using--webpackchunkname--" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<p>Make sure to understand the intention:</p>
<ul>
<li>The chunk&#x27;s name here is intended to be public.</li>
<li>It&#x27;s not a development-only name.</li>
<li>Webpack will use it to name files in production and development modes.</li>
<li>Webpack 5 will automatically assign useful file names in <code>development</code> mode even when not using <code>webpackChunkName</code>.</li>
</ul>
<h4><span id="using-named-exports-from-json-modules"></span>Using named exports from JSON modules<a href="#using-named-exports-from-json-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<p>This is not supported by the new specification and you will get a warning. Instead of:</p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> version <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./package.json&#x27;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>version<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>use:</p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> pkg <span class="token keyword">from</span> <span class="token string">&#x27;./package.json&#x27;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>version<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote>
<p><strong>Note</strong>: Codemod for this change:</p>
<pre><code class="hljs language-bash">npx codemod webpack/v5/json-imports-to-default-imports</code></pre>
<p>(See the <a href="https://codemod.com/registry/webpack-v5-json-imports-to-default-imports">registry here</a>.)</p>
</blockquote>
<h4><span id="cleanup-the-build-code"></span>Cleanup the build code<a href="#cleanup-the-build-code" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4>
<ul>
<li>When using <code>const compiler = webpack(...);</code>, make sure to close the compiler after using it: <code>compiler.close(callback);</code>.<!-- -->
<ul>
<li>This doesn&#x27;t apply to the <code>webpack(..., callback)</code> form which automatically closes.</li>
<li>This is optional if you use webpack in watching mode until the user ends the process. The idle phases in watch mode will be used for this kind of work.</li>
</ul>
</li>
</ul>
<h3><span id="run-a-single-build-and-follow-advice"></span>Run a single build and follow advice<a href="#run-a-single-build-and-follow-advice" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Please make sure to read the building errors/warnings carefully. If there is no corresponding advice, please create an issue and we will try to resolve it.</p>
<p>Repeat the following steps until you solved at least level 3 or 4:</p>
<ul>
<li>
<p>Level 1: <strong>Schema validation fails</strong>.</p>
<p>Configuration options have changed. There should be a validation error with a <code>BREAKING CHANGE:</code> note, or a hint of which option should be used instead.</p>
</li>
<li>
<p>Level 2: <strong>Webpack exits with an error</strong>.</p>
<p>The error message should tell you what needs to be changed.</p>
</li>
<li>
<p>Level 3: <strong>Build Errors</strong>.</p>
<p>The error message should have a <code>BREAKING CHANGE:</code> note.</p>
</li>
<li>
<p>Level 4: <strong>Build Warnings</strong>.</p>
<p>The warning message should tell you what can be improved.</p>
</li>
<li>
<p>Level 5: <strong>Runtime Errors</strong>.</p>
<p>This is tricky. You probably have to debug to find the problem. General advice is difficult here. But we do list some common advice below regarding Runtime Errors:</p>
<ul>
<li><code>process</code> is not defined.<!-- -->
<ul>
<li>webpack 5 does no longer include a polyfill for this Node.js variable. Avoid using it in the frontend code.</li>
<li>Want to support browser usage? Use the <code>exports</code> or <code>imports</code> package.json field to use different code depending on the environment.<!-- -->
<ul>
<li>Also use the <code>browser</code> field to support older bundlers.</li>
<li>Alternative: Wrap code blocks with the <code>typeof process</code> checks. Note that this will have a negative impact on the bundle size.</li>
</ul>
</li>
<li>Want to use environment variables with <code>process.env.VARIABLE</code>? You need to use the <code>DefinePlugin</code> or <code>EnvironmentPlugin</code> to define these variables in the configuration.<!-- -->
<ul>
<li>Consider using <code>VARIABLE</code> instead and make sure to check <code>typeof VARIABLE !== &#x27;undefined&#x27;</code> too. <code>process.env</code> is Node.js specific and should be avoided in frontend code.</li>
</ul>
</li>
</ul>
</li>
<li>404 errors pointing to URLs containing <code>auto</code>
<ul>
<li>Not all ecosystem tooling is ready for the new default automatic <code>publicPath</code> via <code>output.publicPath: &quot;auto&quot;</code>
<ul>
<li>Use a static <code>output.publicPath: &quot;&quot;</code> instead.</li>
</ul>
</li>
</ul>
</li>
<li>Cannot read properties of undefined (reading &#x27;call&#x27;)<!-- -->
<ul>
<li>If you see this error during runtime, it may be related to the <a href="https://webpack.js.org/plugins/module-concatenation-plugin/">ModuleConcatenationPlugin</a>. Check if you are using the plugin, and if you&#x27;ve included it in the <code>plugins</code> sections of a config, and that config is also set to <code>production</code> mode, remove the plugin (ie <code>new webpack.optimize.ModuleConcatenationPlugin()</code>) from your plugins list. In webpack 5, the plugin is enabled by default in production mode, and it may get included twice.</li>
<li>In general, disabling each plugin and testing the build is a good way to triage where the issue might be coming from.</li>
<li>See: <a href="https://github.com/webpack/webpack/discussions/15369#discussioncomment-13420496">this issue</a> for more details.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Level 6: <strong>Deprecation Warnings</strong>.</p>
<p>You probably get a lot of deprecation warnings. This is not directly a problem. Plugins need time to catch up with core changes. Please report these deprecations to the plugins. These deprecations are only warnings and the build will still work with only minor drawbacks (like less performance).</p>
<ul>
<li>You can hide deprecation warnings by running node with <code>--no-deprecation</code> flag, e.g.: <code>node --no-deprecation node_modules/webpack/bin/webpack.js</code>. This should only be a temporary workaround.</li>
<li>Plugins and Loaders contributors can follow the advice in the deprecation messages to improve the code.</li>
</ul>
</li>
<li>
<p>Level 7: <strong>Performance issues</strong>.</p>
<p>Usually, performance should improve with webpack 5, but there are also a few cases where performance gets worse.</p>
<p>And here are something you can do to improve the situation:</p>
<ul>
<li>Profile where the time is spent.<!-- -->
<ul>
<li><code>--profile --progress</code> displays a simple performance profile now</li>
<li><code>node --inspect-brk node_modules/webpack/bin/webpack.js</code> + <a href="chrome://inspect"><code>chrome://inspect</code></a> / <a href="edge://inspect"><code>edge://inspect</code></a> (see profiler tab).<!-- -->
<ul>
<li>You can save these profiles to files and provide them in issues.</li>
<li>Try using <code>--no-turbo-inlining</code> flag for better stack traces in some cases.</li>
</ul>
</li>
</ul>
</li>
<li>Time for building modules in incremental builds can be improved by reverting to unsafe caching like in webpack 4:<!-- -->
<ul>
<li><code>module.unsafeCache: true</code></li>
<li>But this might affect the ability to handle some of the changes to the code base</li>
</ul>
</li>
<li>Full build<!-- -->
<ul>
<li>Backward-compatibility layer for the deprecated features will usually have worse performance compared to the new features.</li>
<li>Creating many warnings can affect build performance, even if they are ignored.</li>
<li>Source Maps are expensive. Check <a href="/configuration/devtool/"><code>devtool</code></a> option in the documentation to see a comparison of the different options.</li>
<li>Anti-Virus protection might affect performance of the file system access.</li>
<li>Persistent Caching can help to improve the repetitive full builds.</li>
<li>Module Federation allows to split the application into multiple smaller builds.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><span id="everything-works"></span>Everything works?<a href="#everything-works" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Please tweet that you have successfully migrated to webpack 5. <a href="https://twitter.com/intent/tweet?source=https://webpack.js.org/migrate/5/&amp;text=I%20just%20migrated%20to%20webpack%205%20using%20its%20migration%20guide!%20&amp;via=webpack&amp;hashtags=webpack,webpack5">Tweet it</a></p>
<h2><span id="it-is-not-working"></span>It is not working?<a href="#it-is-not-working" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Create an <a href="https://github.com/webpack/webpack/issues/new?template=Bug_report.md">issue</a> and tell us about the issues you have encountered during the migration.</p>
<h2><span id="something-missing-in-this-guide"></span>Something missing in this guide?<a href="#something-missing-in-this-guide" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Please open a <a href="https://github.com/webpack/webpack.js.org/edit/main/src/content/migrate/5.mdx">Pull Request</a> to help the next person using this guide.</p>
<h2><span id="changes-to-internals"></span>Changes to internals<a href="#changes-to-internals" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The changes to webpack internals such as: adding types, refactoring code and methods renaming are listed here for anyone interested. But they are not intended as a part of common use-case migration.</p>
<ul>
<li><code>Module.nameForCondition</code>, <code>Module.updateCacheModule</code> and <code>Module.chunkCondition</code> are no longer optional.</li>
</ul>
<h3><span id="getoptions-method-for-loaders"></span>getOptions method for Loaders<a href="#getoptions-method-for-loaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Webpack 5 ships with built-in <a href="/api/loaders/#thisgetoptionsschema"><code>this.getOptions</code></a> method available in loader context. This is a breaking change for loaders that had been using <code>getOptions</code> method from previously preferred <a href="https://github.com/webpack/schema-utils">schema-utils</a>:</p>
<ul>
<li><code>this.getOptions</code> is available since webpack 5</li>
<li>Instead of JSON5 it supports JSON as a query string: <code>?{arg:true}</code> → <code>?{&quot;arg&quot;:true}</code>. Using JSON5 should be considered and documented as deprecated in favor of JSON in the respective Loader&#x27;s documentation.</li>
<li><a href="https://github.com/webpack/loader-utils"><code>loader-utils</code></a> has specific behavior for parsing query strings (<code>true</code>, <code>false</code> and <code>null</code> won&#x27;t be parsed as <code>string</code> but as a primitive value). This is no longer the case for the new built-in <code>this.getOptions</code> method, which uses native <a href="https://nodejs.org/api/querystring.html"><code>querystring</code></a> parsing (ships with Node.js). It is still possible to add custom behavior for these cases in the Loader&#x27;s code after getting the options by using <code>this.getOptions</code> method.</li>
<li>Schema argument is optional for the new <code>this.getOptions</code> method, but we strongly advise to add schema validation for your Loader&#x27;s options. The <code>title</code> field in the schema, can be used to customize the validation error message e.g. <code>&quot;title&quot;: &quot;My Loader ooooptions&quot;</code> will result in displaying errors this way: <code>Invalid ooooptions object. My Loader has been initialised using an ooooptions object that does not match the API schema. - ooooptions.foo.bar.baz should be a string.</code></li>
</ul>
<h1><span id="to-v4-from-v3"></span>To v4 from v3<a href="#to-v4-from-v3" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>This guide only shows major changes that affect end users. For more details please see <a href="https://github.com/webpack/webpack/releases">the changelog</a>.</p>
<h2><span id="nodejs-v4"></span>Node.js v4<a href="#nodejs-v4" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>If you are still using Node.js v4 or lower, you need to upgrade your Node.js installation to Node.js v6 or higher.</p>
<p>Instructions for upgrading your Node.js version can be found <a href="https://stackoverflow.com/questions/10075990/upgrading-node-js-to-latest-version">here</a>.</p>
<h2><span id="cli"></span>CLI<a href="#cli" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The CLI has moved to a separate package: webpack-cli. You need to install it before using webpack, see <a href="/guides/getting-started/#basic-setup">basic setup</a>.</p>
<p>The installation guide can be found <a href="/guides/installation">here</a>.</p>
<h2><span id="update-plugins"></span>Update plugins<a href="#update-plugins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Many 3rd party plugins need to be updated to the latest versions to be compatible with webpack 4. Links to popular plugins can be found <a href="/awesome-webpack/#webpack-plugins">here</a>.</p>
<h2><span id="mode"></span>mode<a href="#mode" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Add the new <a href="/configuration/mode/"><code>mode</code></a> option to your configuration. Set it to <code>&#x27;production&#x27;</code>, <code>&#x27;development&#x27;</code> or <code>&#x27;none&#x27;</code> depending on your configuration type.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  mode: &#x27;production&#x27;,
</span></span>}</code></pre>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>The purpose of <code>&#x27;development&#x27;</code> mode and <code>&#x27;production&#x27;</code> mode is different. You can use <code>webpack-merge</code> as shown in <a href="/guides/production/#setup">production guide</a> to optimize configurations.</p></aside>
<h2><span id="deprecatedremoved-plugins"></span>Deprecated/Removed plugins<a href="#deprecatedremoved-plugins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>These plugins can be removed from configuration as they are default in production mode:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...
</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    new NoEmitOnErrorsPlugin(),
</span><span class="token prefix deleted">-</span><span class="token line">    new ModuleConcatenationPlugin(),
</span><span class="token prefix deleted">-</span><span class="token line">    new DefinePlugin({ &quot;process.env.NODE_ENV&quot;: JSON.stringify(&quot;production&quot;) })
</span><span class="token prefix deleted">-</span><span class="token line">    new UglifyJsPlugin()
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ],
</span></span>}</code></pre>
<p>These plugins are default in development mode</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...
</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    new NamedModulesPlugin()
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ],
</span></span>}</code></pre>
<p>These plugins were deprecated and are now removed:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...
</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    new NoErrorsPlugin(),
</span><span class="token prefix deleted">-</span><span class="token line">    new NewWatchingPlugin()
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ],
</span></span>}</code></pre>
<h2><span id="commonschunkplugin"></span>CommonsChunkPlugin<a href="#commonschunkplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The <code>CommonsChunkPlugin</code> was removed. Instead the <a href="/configuration/optimization/#optimizationsplitchunks"><code>optimization.splitChunks</code></a> options can be used.</p>
<p>See documentation of the <a href="/configuration/optimization/#optimizationsplitchunks"><code>optimization.splitChunks</code></a> for more details. The default configuration may already suit your needs.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>When generating the HTML from the stats you can use <code>optimization.splitChunks.chunks: &quot;all&quot;</code> which is the optimal configuration in most cases.</p></aside>
<h2><span id="import-and-commonjs"></span>import() and CommonJS<a href="#import-and-commonjs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>When using <code>import()</code> to load non-ESM the result has changed in webpack 4. Now you need to access the <code>default</code> property to get the value of <code>module.exports</code>.</p>
<p><strong>non-esm.js</strong></p>
<pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;hello world&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><strong>example.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#x27;./non-esm.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>default<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h2><span id="json-and-loaders"></span>json and loaders<a href="#json-and-loaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>When using a custom loader to transform <code>.json</code> files you now need to change the module <code>type</code>:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...
</span><span class="token prefix unchanged"> </span><span class="token line"> rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">   {
</span><span class="token prefix unchanged"> </span><span class="token line">     test: /config\.json$/,
</span><span class="token prefix unchanged"> </span><span class="token line">     loader: &#x27;special-loader&#x27;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     type: &#x27;javascript/auto&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     options: {...}
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> ]
</span></span>};</code></pre>
<p>When still using the <code>json-loader</code>, it can be removed:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...
</span><span class="token prefix unchanged"> </span><span class="token line"> rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">   {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     test: /\.json$/,
</span><span class="token prefix deleted">-</span><span class="token line">     loader: &#x27;json-loader&#x27;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> ]
</span></span>};</code></pre>
<h2><span id="moduleloaders"></span>module.loaders<a href="#moduleloaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p><code>module.loaders</code> were deprecated since webpack 2 and are now removed in favor of <a href="/configuration/module/#rule"><code>module.rules</code></a>.</p>
<h1><span id="to-v2-or-v3-from-v1"></span>To v2 or v3 from v1<a href="#to-v2-or-v3-from-v1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<!-- -->
<p>The following sections describe the major changes from webpack 1 to 2.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6><p>Note that there were far fewer changes between 2 and 3, so that migration shouldn&#x27;t be too bad. If you are running into issues, please see <a href="https://github.com/webpack/webpack/releases">the changelog</a> for details.</p></aside>
<h2><span id="resolveroot-resolvefallback-resolvemodulesdirectories"></span>resolve.root, resolve.fallback, resolve.modulesDirectories<a href="#resolveroot-resolvefallback-resolvemodulesdirectories" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>These options were replaced by a single option <code>resolve.modules</code>. See <a href="/configuration/resolve">resolving</a> for more usage.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> resolve: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   root: path.join(__dirname, &quot;src&quot;)
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   modules: [
</span><span class="token prefix inserted">+</span><span class="token line">     path.join(__dirname, &quot;src&quot;),
</span><span class="token prefix inserted">+</span><span class="token line">     &quot;node_modules&quot;
</span><span class="token prefix inserted">+</span><span class="token line">   ]
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h2><span id="resolveextensions"></span>resolve.extensions<a href="#resolveextensions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>This option no longer requires passing an empty string. This behavior was moved to <code>resolve.enforceExtension</code>. See <a href="/configuration/resolve">resolving</a> for more usage.</p>
<h2><span id="resolve"></span>resolve.*<a href="#resolve" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Several APIs were changed here. Not listed in detail as it&#x27;s not commonly used. See <a href="/configuration/resolve">resolving</a> for details.</p>
<h2><span id="moduleloaders-is-now-modulerules"></span>module.loaders is now module.rules<a href="#moduleloaders-is-now-modulerules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The old loader configuration was superseded by a more powerful rules system, which allows configuration of loaders and more.
For compatibility reasons, the old <code>module.loaders</code> syntax is still valid and the old names are parsed.
The new naming conventions are easier to understand and are a good reason to upgrade the configuration to using <code>module.rules</code>.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   loaders: [
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   rules: [
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\.css$/,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       loaders: [
</span><span class="token prefix deleted">-</span><span class="token line">         &quot;style-loader&quot;,
</span><span class="token prefix deleted">-</span><span class="token line">         &quot;css-loader?modules=true&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       use: [
</span><span class="token prefix inserted">+</span><span class="token line">         {
</span><span class="token prefix inserted">+</span><span class="token line">           loader: &quot;style-loader&quot;
</span><span class="token prefix inserted">+</span><span class="token line">         },
</span><span class="token prefix inserted">+</span><span class="token line">         {
</span><span class="token prefix inserted">+</span><span class="token line">           loader: &quot;css-loader&quot;,
</span><span class="token prefix inserted">+</span><span class="token line">           options: {
</span><span class="token prefix inserted">+</span><span class="token line">             modules: true
</span><span class="token prefix inserted">+</span><span class="token line">           }
</span><span class="token prefix inserted">+</span><span class="token line">         }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       ]
</span><span class="token prefix unchanged"> </span><span class="token line">     },
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\.jsx$/,
</span><span class="token prefix unchanged"> </span><span class="token line">       loader: &quot;babel-loader&quot;, // Do not use &quot;use&quot; here
</span><span class="token prefix unchanged"> </span><span class="token line">       options: {
</span><span class="token prefix unchanged"> </span><span class="token line">         // ...
</span><span class="token prefix unchanged"> </span><span class="token line">       }
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h2><span id="chaining-loaders"></span>Chaining loaders<a href="#chaining-loaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Like in webpack 1, loaders can be chained to pass results from loader to loader. Using the <a href="/configuration/module/#ruleuse">rule.use</a>
configuration option, <code>use</code> can be set to an array of loaders.
In webpack 1, loaders were commonly chained with <code>!</code>. This style is only supported using the legacy option <code>module.loaders</code>.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   loaders: [{
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   rules: [{
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     test: /\.less$/,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     loader: &quot;style-loader!css-loader!less-loader&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     use: [
</span><span class="token prefix inserted">+</span><span class="token line">       &quot;style-loader&quot;,
</span><span class="token prefix inserted">+</span><span class="token line">       &quot;css-loader&quot;,
</span><span class="token prefix inserted">+</span><span class="token line">       &quot;less-loader&quot;
</span><span class="token prefix inserted">+</span><span class="token line">     ]
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }]
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h2><span id="automatic--loader-module-name-extension-removed"></span>Automatic <code>-loader</code> module name extension removed<a href="#automatic--loader-module-name-extension-removed" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>It is not possible anymore to omit the <code>-loader</code> extension when referencing loaders:</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       use: [
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">         &quot;style&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">         &quot;style-loader&quot;,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">         &quot;css&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">         &quot;css-loader&quot;,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">         &quot;less&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">         &quot;less-loader&quot;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       ]
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<p>You can still opt-in to the old behavior with the <code>resolveLoader.moduleExtensions</code> configuration option, but this is not recommended.</p>
<pre><code class="hljs language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> resolveLoader: {
</span><span class="token prefix inserted">+</span><span class="token line">   moduleExtensions: [&quot;-loader&quot;]
</span><span class="token prefix inserted">+</span><span class="token line"> }</span></span></code></pre>
<p>See <a href="https://github.com/webpack/webpack/issues/2986">#2986</a> for the reason behind this change.</p>
<h2><span id="json-loader-is-not-required-anymore"></span>json-loader is not required anymore<a href="#json-loader-is-not-required-anymore" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>When no loader has been configured for a JSON file, webpack will automatically try to load the JSON
file with the <a href="https://github.com/webpack-contrib/json-loader"><code>json-loader</code></a>.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     {
</span><span class="token prefix deleted">-</span><span class="token line">       test: /\.json/,
</span><span class="token prefix deleted">-</span><span class="token line">       loader: &quot;json-loader&quot;
</span><span class="token prefix deleted">-</span><span class="token line">     }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<p><a href="https://github.com/webpack/webpack/issues/3363">We decided to do this</a> in order to iron out environment differences
between webpack, node.js and browserify.</p>
<h2><span id="loaders-in-configuration-resolve-relative-to-context"></span>Loaders in configuration resolve relative to context<a href="#loaders-in-configuration-resolve-relative-to-context" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>In <strong>webpack 1</strong>, configured loaders resolve relative to the matched file. However, in <strong>webpack 2</strong>, configured loaders resolve relative to the <code>context</code> option.</p>
<p>This solves some problems with duplicate modules caused by loaders when using <code>npm link</code> or referencing modules outside of the <code>context</code>.</p>
<p>You may remove some hacks to work around this:</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span><span class="token prefix unchanged"> </span><span class="token line">   rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       // ...
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       loader: require.resolve(&quot;my-loader&quot;)
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       loader: &quot;my-loader&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> resolveLoader: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   root: path.resolve(__dirname, &quot;node_modules&quot;)
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h2><span id="modulepreloaders-and-modulepostloaders-were-removed"></span>module.preLoaders and module.postLoaders were removed:<a href="#modulepreloaders-and-modulepostloaders-were-removed" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   preLoaders: [
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   rules: [
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     {
</span><span class="token prefix unchanged"> </span><span class="token line">       test: /\.js$/,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       enforce: &quot;pre&quot;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       loader: &quot;eslint-loader&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h2><span id="uglifyjsplugin-sourcemap"></span>UglifyJsPlugin sourceMap<a href="#uglifyjsplugin-sourcemap" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The <code>sourceMap</code> option of the <code>UglifyJsPlugin</code> now defaults to <code>false</code> instead of <code>true</code>. This means that if you are using source maps for minimized code or want correct line numbers for uglifyjs warnings, you need to set <code>sourceMap: true</code> for <code>UglifyJsPlugin</code>.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> devtool: &quot;source-map&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">   new UglifyJsPlugin({
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     sourceMap: true
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   })
</span><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2><span id="uglifyjsplugin-warnings"></span>UglifyJsPlugin warnings<a href="#uglifyjsplugin-warnings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The <code>compress.warnings</code> option of the <code>UglifyJsPlugin</code> now defaults to <code>false</code> instead of <code>true</code>.
This means that if you want to see uglifyjs warnings, you need to set <code>compress.warnings</code> to <code>true</code>.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> devtool: &quot;source-map&quot;,
</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">   new UglifyJsPlugin({
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     compress: {
</span><span class="token prefix inserted">+</span><span class="token line">       warnings: true
</span><span class="token prefix inserted">+</span><span class="token line">     }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   })
</span><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2><span id="uglifyjsplugin-minimize-loaders"></span>UglifyJsPlugin minimize loaders<a href="#uglifyjsplugin-minimize-loaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p><code>UglifyJsPlugin</code> no longer switches loaders into minimize mode. The <code>minimize: true</code> setting needs to be passed via loader options in the long-term. See loader documentation for relevant options.</p>
<p>The minimize mode for loaders will be removed in webpack 3 or later.</p>
<p>To keep compatibility with old loaders, loaders can be switched to minimize mode via plugin:</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   new webpack.LoaderOptionsPlugin({
</span><span class="token prefix inserted">+</span><span class="token line">     minimize: true
</span><span class="token prefix inserted">+</span><span class="token line">   })
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2><span id="dedupeplugin-has-been-removed"></span>DedupePlugin has been removed<a href="#dedupeplugin-has-been-removed" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p><code>webpack.optimize.DedupePlugin</code> isn&#x27;t needed anymore. Remove it from your configuration.</p>
<h2><span id="bannerplugin---breaking-change"></span>BannerPlugin - breaking change<a href="#bannerplugin---breaking-change" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p><code>BannerPlugin</code> no longer accepts two parameters, but a single options object.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    new webpack.BannerPlugin(&#x27;Banner&#x27;, {raw: true, entryOnly: true});
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    new webpack.BannerPlugin({banner: &#x27;Banner&#x27;, raw: true, entryOnly: true});
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2><span id="occurrenceorderplugin-is-now-on-by-default"></span>OccurrenceOrderPlugin is now on by default<a href="#occurrenceorderplugin-is-now-on-by-default" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The <code>OccurrenceOrderPlugin</code> is now enabled by default and has been renamed (<code>OccurenceOrderPlugin</code> in webpack 1).
Thus make sure to remove the plugin from your configuration:</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">   // webpack 1
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   new webpack.optimize.OccurenceOrderPlugin()
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // webpack 2
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   new webpack.optimize.OccurrenceOrderPlugin()
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2><span id="extracttextwebpackplugin---breaking-change"></span>ExtractTextWebpackPlugin - breaking change<a href="#extracttextwebpackplugin---breaking-change" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p><a href="https://github.com/webpack/extract-text-webpack-plugin">ExtractTextPlugin</a> requires version 2 to work with webpack 2.</p>
<p><code>npm install --save-dev extract-text-webpack-plugin</code></p>
<p>The configuration changes for this plugin are mainly syntactical.</p>
<h3><span id="extracttextpluginextract"></span>ExtractTextPlugin.extract<a href="#extracttextpluginextract" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<pre><code class="hljs language-diff">module: {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">   {
</span><span class="token prefix unchanged"> </span><span class="token line">     test: /.css$/,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">      loader: ExtractTextPlugin.extract(&quot;style-loader&quot;, &quot;css-loader&quot;, { publicPath: &quot;/dist&quot; })
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      use: ExtractTextPlugin.extract({
</span><span class="token prefix inserted">+</span><span class="token line">        fallback: &quot;style-loader&quot;,
</span><span class="token prefix inserted">+</span><span class="token line">        use: &quot;css-loader&quot;,
</span><span class="token prefix inserted">+</span><span class="token line">        publicPath: &quot;/dist&quot;
</span><span class="token prefix inserted">+</span><span class="token line">      })
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> ]
</span></span>}</code></pre>
<h3><span id="new-extracttextpluginoptions"></span><code>new ExtractTextPlugin({options})</code><a href="#new-extracttextpluginoptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<pre><code class="hljs language-diff">plugins: [
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  new ExtractTextPlugin(&quot;bundle.css&quot;, { allChunks: true, disable: false })
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  new ExtractTextPlugin({
</span><span class="token prefix inserted">+</span><span class="token line">    filename: &quot;bundle.css&quot;,
</span><span class="token prefix inserted">+</span><span class="token line">    disable: false,
</span><span class="token prefix inserted">+</span><span class="token line">    allChunks: true
</span><span class="token prefix inserted">+</span><span class="token line">  })
</span></span>]</code></pre>
<h2><span id="full-dynamic-requires-now-fail-by-default"></span>Full dynamic requires now fail by default<a href="#full-dynamic-requires-now-fail-by-default" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>A dependency with only an expression (i. e. <code>require(expr)</code>) will now create an empty context instead of the context of the complete directory.</p>
<p>Code like this should be refactored as it won&#x27;t work with ES2015 modules. If this is not possible you can use the <code>ContextReplacementPlugin</code> to hint the compiler towards the correct resolving.</p>
<aside class="todo"><h6 class="todo__prefix">todo</h6><p>Link to an article about dynamic dependencies.</p></aside>
<h3><span id="using-custom-arguments-in-cli-and-configuration"></span>Using custom arguments in CLI and configuration<a href="#using-custom-arguments-in-cli-and-configuration" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>If you abused the CLI to pass custom arguments to the configuration like so:</p>
<p><code>webpack --custom-stuff</code></p>
<pre><code class="hljs language-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">var</span> customStuff <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#x27;--custom-stuff&#x27;</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">/* ... */</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span></code></pre>
<p>You may notice that this is no longer allowed. The CLI is more strict now.</p>
<p>Instead there is an interface for passing arguments to the configuration. This should be used instead. Future tools may rely on this.</p>
<p><code>webpack --env.customStuff</code></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> customStuff <span class="token operator">=</span> env<span class="token punctuation">.</span>customStuff<span class="token punctuation">;</span>
  <span class="token comment">/* ... */</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>See <a href="/api/cli">CLI</a>.</p>
<h2><span id="requireensure-and-amd-require-are-asynchronous"></span>require.ensure and AMD require are asynchronous<a href="#requireensure-and-amd-require-are-asynchronous" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>These functions are now always asynchronous instead of calling their callback synchronously if the chunk is already loaded.</p>
<p><strong><code>require.ensure</code> now depends upon native <code>Promise</code>s. If using <code>require.ensure</code> in an environment that lacks them then you will need a polyfill.</strong></p>
<h2><span id="loader-configuration-is-through-options"></span>Loader configuration is through <code>options</code><a href="#loader-configuration-is-through-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>You can <em>no longer</em> configure a loader with a custom property in the <code>webpack.config.js</code>. It must be done through the <code>options</code>. The following configuration with the <code>ts</code> property is no longer valid with webpack 2:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&#x27;ts-loader&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// does not work with webpack 2</span>
  ts<span class="token operator">:</span> <span class="token punctuation">{</span> transpileOnly<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3><span id="what-are-options"></span>What are <code>options</code>?<a href="#what-are-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Good question. Well, strictly speaking it&#x27;s 2 possible things; both ways to configure a webpack loader. Classically <code>options</code> was called <code>query</code> and was a string which could be appended to the name of the loader. Much like a query string but actually with <a href="https://github.com/webpack/loader-utils#parsequery">greater powers</a>:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&#x27;ts-loader?&#x27;</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> transpileOnly<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>But it can also be a separately specified object that&#x27;s supplied alongside a loader:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&#x27;ts-loader&#x27;</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span> transpileOnly<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2><span id="loaderoptionsplugin-context"></span>LoaderOptionsPlugin context<a href="#loaderoptionsplugin-context" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Some loaders need context information and read them from the configuration. This needs to be passed via loader options in the long-term. See loader documentation for relevant options.</p>
<p>To keep compatibility with old loaders, this information can be passed via plugin:</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   new webpack.LoaderOptionsPlugin({
</span><span class="token prefix inserted">+</span><span class="token line">     options: {
</span><span class="token prefix inserted">+</span><span class="token line">       context: __dirname
</span><span class="token prefix inserted">+</span><span class="token line">     }
</span><span class="token prefix inserted">+</span><span class="token line">   })
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2><span id="debug"></span>debug<a href="#debug" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>The <code>debug</code> option switched loaders to debug mode in webpack 1. This needs to be passed via loader options in long-term. See loader documentation for relevant options.</p>
<p>The debug mode for loaders will be removed in webpack 3 or later.</p>
<p>To keep compatibility with old loaders, loaders can be switched to debug mode via a plugin:</p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> debug: true,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> plugins: [
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   new webpack.LoaderOptionsPlugin({
</span><span class="token prefix inserted">+</span><span class="token line">     debug: true
</span><span class="token prefix inserted">+</span><span class="token line">   })
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span></code></pre>
<h2><span id="code-splitting-with-es2015"></span>Code Splitting with ES2015<a href="#code-splitting-with-es2015" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>In webpack 1, you could use <a href="/api/module-methods/#requireensure"><code>require.ensure()</code></a> as a method to lazily-load chunks for your application:</p>
<pre><code class="hljs language-javascript">require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./module&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The ES2015 Loader spec defines <a href="/api/module-methods/#import-1"><code>import()</code></a> as method to load ES2015 Modules dynamically on runtime. Webpack treats <code>import()</code> as a split-point and puts the requested module in a separate chunk. <code>import()</code> takes the module name as argument and returns a Promise.</p>
<pre><code class="hljs language-js"><span class="token keyword">function</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#x27;./module&#x27;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> module<span class="token punctuation">.</span>default<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Chunk loading failed&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Good news: Failure to load a chunk can now be handled because they are <code>Promise</code> based.</p>
<h2><span id="dynamic-expressions"></span>Dynamic expressions<a href="#dynamic-expressions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>It&#x27;s possible to pass a partial expression to <code>import()</code>. This is handled similar to expressions in CommonJS (webpack creates a <a href="/plugins/context-replacement-plugin/">context</a> with all possible files).</p>
<p><code>import()</code> creates a separate chunk for each possible module.</p>
<pre><code class="hljs language-js"><span class="token keyword">function</span> <span class="token function">route</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./routes/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/route</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">route<span class="token punctuation">.</span>Route</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// This creates a separate chunk for each possible route</span></code></pre>
<h2><span id="mixing-es2015-with-amd-and-commonjs"></span>Mixing ES2015 with AMD and CommonJS<a href="#mixing-es2015-with-amd-and-commonjs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>As for AMD and CommonJS you can freely mix all three module types (even within the same file). Webpack behaves similar to babel and node-eps in this case:</p>
<pre><code class="hljs language-javascript"><span class="token comment">// CommonJS consuming ES2015 Module</span>
<span class="token keyword">var</span> book <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./book&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

book<span class="token punctuation">.</span>currentPage<span class="token punctuation">;</span>
book<span class="token punctuation">.</span><span class="token function">readPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
book<span class="token punctuation">.</span>default <span class="token operator">===</span> <span class="token string">&#x27;This is a book&#x27;</span><span class="token punctuation">;</span></code></pre>
<pre><code class="hljs language-javascript"><span class="token comment">// ES2015 Module consuming CommonJS</span>
<span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">&#x27;fs&#x27;</span><span class="token punctuation">;</span> <span class="token comment">// module.exports map to default</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> readFileSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;fs&#x27;</span><span class="token punctuation">;</span> <span class="token comment">// named exports are read from returned object+</span>

<span class="token keyword">typeof</span> fs<span class="token punctuation">.</span>readFileSync <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> readFileSync <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span><span class="token punctuation">;</span></code></pre>
<p>It is important to note that you will want to tell Babel to not parse these module symbols so webpack can use them. You can do this by setting the following in your <code>.babelrc</code> or <code>babel-loader</code> options.</p>
<p><strong>.babelrc</strong></p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;es2015&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property">&quot;modules&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<h2><span id="hints"></span>Hints<a href="#hints" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>No need to change something, but opportunities</p>
<h3><span id="template-strings"></span>Template strings<a href="#template-strings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Webpack now supports template strings in expressions. This means you can start using them in webpack constructs:</p>
<pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> require(&quot;./templates/&quot; + name);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> require(`./templates/${name}`);</span></span></code></pre>
<h3><span id="configuration-promise"></span>Configuration Promise<a href="#configuration-promise" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Webpack now supports returning a <code>Promise</code> from the configuration file. This allows async processing in your configuration file.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">fetchLangs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">lang</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">&#x27;...&#x27;</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token constant">LANGUAGE</span><span class="token operator">:</span> lang <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3><span id="advanced-loader-matching"></span>Advanced loader matching<a href="#advanced-loader-matching" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Webpack now supports more things to match on for loaders.</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        resource<span class="token operator">:</span> <span class="token regex">/filename/</span><span class="token punctuation">,</span> <span class="token comment">// matches &quot;/path/filename.js&quot;</span>
        resourceQuery<span class="token operator">:</span> <span class="token regex">/^\?querystring$/</span><span class="token punctuation">,</span> <span class="token comment">// matches &quot;?querystring&quot;</span>
        issuer<span class="token operator">:</span> <span class="token regex">/filename/</span><span class="token punctuation">,</span> <span class="token comment">// matches &quot;/path/something.js&quot; if requested from &quot;/path/filename.js&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3><span id="more-cli-options"></span>More CLI options<a href="#more-cli-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>There are some new CLI options for you to use:</p>
<p><code>--define process.env.NODE_ENV=&quot;production&quot;</code> See <a href="/plugins/define-plugin/"><code>DefinePlugin</code></a>.</p>
<p><code>--display-depth</code> displays the distance to the entry point for each module.</p>
<p><code>--display-used-exports</code> display info about which exports are used in a module.</p>
<p><code>--display-max-modules</code> sets the number for modules displayed in the output (defaults to 15).</p>
<p><code>-p</code> also defines <code>process.env.NODE_ENV</code> to <code>&quot;production&quot;</code> now.</p>
<h2><span id="loader-changes"></span>Loader changes<a href="#loader-changes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2>
<p>Changes only relevant for loader authors.</p>
<h3><span id="cacheable"></span>Cacheable<a href="#cacheable" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p>Loaders are now cacheable by default. Loaders must opt-out if they are not cacheable.</p>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // Cacheable loader
</span><span class="token prefix unchanged"> </span><span class="token line"> module.exports = function(source) {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   this.cacheable();
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return source;
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<pre><code class="hljs language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // Not cacheable loader
</span><span class="token prefix unchanged"> </span><span class="token line"> module.exports = function(source) {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   this.cacheable(false);
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return source;
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<h3><span id="complex-options"></span>Complex options<a href="#complex-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3>
<p><strong>webpack 1</strong> only supports <code>JSON.stringify</code>-able options for loaders.</p>
<p><strong>webpack 2</strong> now supports any JS object as loader options.</p>
<p>Before webpack <a href="https://github.com/webpack/webpack/releases/tag/v2.2.1">2.2.1</a> (i.e. from 2.0.0 through 2.2.0), using complex options required using <code>ident</code> for the <code>options</code> object to allow its reference from other loaders. <strong>This was removed in 2.2.1</strong> and thus current migrations do not require any use of the <code>ident</code> key.</p>
<pre><code class="hljs language-diff">{
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> test: /\.ext/
</span><span class="token prefix unchanged"> </span><span class="token line"> use: {
</span><span class="token prefix unchanged"> </span><span class="token line">   loader: &#x27;...&#x27;,
</span><span class="token prefix unchanged"> </span><span class="token line">   options: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     ident: &#x27;id&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     fn: () =&gt; require(&#x27;./foo.js&#x27;)
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}</code></pre></div><div class="print:hidden mt-20"><a class="text-gray-500 dark:text-gray-500 text-sm cursor-pointer font-sans hover:underline" href="https://github.com/webpack/webpack.js.org/edit/main/src/content/migrate/printable.mdx">Edit this page</a><span class="mx-5 text-black font-bold dark:text-white">·</span><a class="text-gray-500 dark:text-gray-500 text-sm cursor-pointer font-sans hover:underline">Print this page</a></div><div data-testid="contributors" class="print:hidden"><h2 class="!font-sans !font-normal">1<!-- --> <!-- -->Contributor</h2><div><div class="grid gap-[10px] lg:gap-[15px] grid-cols-contributors"><a href="https://github.com/webpack"><img width="45" height="45" alt="webpack" title="webpack" class="w-full rounded-full shadow" src="/icon-square-small-slack.1c7f4f7a52c41f94.png"/></a></div></div></div></div></section></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="/guides/getting-started/">Get Started</a><a class="footer__link" href="/comparison/">Comparison</a><a href="https://privacy-policy.openjsf.org/" target="_blank" rel="noopener noreferrer" class="footer__link">Privacy Policy</a></section><section class="footer__middle"><a class="footer__icon" href="/"><img src="/icon-square-small.9e8aff7a67a5dd20.svg" alt="webpack icon" width="35" height="35"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener noreferrer" class="footer__link">Swag Store</a><a class="footer__link" href="/awesome-webpack/">Awesome webpack</a><a class="footer__link" href="/glossary/">Glossary</a><a class="footer__link" href="/branding/">Branding</a><a href="https://discord.com/invite/5sxFZPdx2k" target="_blank" rel="noopener noreferrer" class="footer__link">Discord</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener noreferrer" class="footer__link">Changelog</a><a class="footer__link footer__license" href="/license"><img alt="Creative Commons License" src="/cc.185f5779f354f6e9.svg" width="25" height="25"/><img alt="Creative Commons License" src="/by.d2da85793ea9d7bd.svg" width="25" height="25"/></a></section></div></footer></div></div><script>
window.matchMedia('print').addListener(function(mql) {
  if (!mql.matches) {
      window.close();
  }
});
window.print();
</script></body>